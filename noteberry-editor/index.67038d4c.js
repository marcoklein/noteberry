function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequirec1fc;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequirec1fc=i),i.register("9nuB3",(function(t,n){var r,o,s;e(t.exports,"Fragment",(()=>r),(e=>r=e)),e(t.exports,"jsx",(()=>o),(e=>o=e)),e(t.exports,"jsxs",(()=>s),(e=>s=e)),i("8Yvkm");var a=i("lydNP"),l=60103;if(r=60107,"function"==typeof Symbol&&Symbol.for){var c=Symbol.for;l=c("react.element"),r=c("react.fragment")}var u=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h=Object.prototype.hasOwnProperty,f={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,n){var r,i={},o=null,s=null;for(r in void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(s=t.ref),t)h.call(t,r)&&!f.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:l,type:e,key:o,ref:s,props:i,_owner:u.current}}o=d,s=d})),i.register("8Yvkm",(function(e,t){var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;if("abc"[5]="de","5"===Object.getOwnPropertyNames("abc")[0])return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var s,a,l=o(e),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))r.call(s,u)&&(l[u]=s[u]);if(n){a=n(s);for(var h=0;h<a.length;h++)i.call(s,a[h])&&(l[a[h]]=s[a[h]])}}return l}})),i.register("lydNP",(function(e,t){e.exports=i("fxX4G")})),i.register("fxX4G",(function(t,n){var r,o,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,k,x,S,C,M,A,E,O,L,T,R;e(t.exports,"Fragment",(()=>r),(e=>r=e)),e(t.exports,"StrictMode",(()=>o),(e=>o=e)),e(t.exports,"Profiler",(()=>s),(e=>s=e)),e(t.exports,"Suspense",(()=>a),(e=>a=e)),e(t.exports,"Children",(()=>l),(e=>l=e)),e(t.exports,"Component",(()=>c),(e=>c=e)),e(t.exports,"PureComponent",(()=>u),(e=>u=e)),e(t.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(()=>h),(e=>h=e)),e(t.exports,"cloneElement",(()=>f),(e=>f=e)),e(t.exports,"createContext",(()=>d),(e=>d=e)),e(t.exports,"createElement",(()=>p),(e=>p=e)),e(t.exports,"createFactory",(()=>m),(e=>m=e)),e(t.exports,"createRef",(()=>g),(e=>g=e)),e(t.exports,"forwardRef",(()=>v),(e=>v=e)),e(t.exports,"isValidElement",(()=>y),(e=>y=e)),e(t.exports,"lazy",(()=>w),(e=>w=e)),e(t.exports,"memo",(()=>b),(e=>b=e)),e(t.exports,"useCallback",(()=>k),(e=>k=e)),e(t.exports,"useContext",(()=>x),(e=>x=e)),e(t.exports,"useDebugValue",(()=>S),(e=>S=e)),e(t.exports,"useEffect",(()=>C),(e=>C=e)),e(t.exports,"useImperativeHandle",(()=>M),(e=>M=e)),e(t.exports,"useLayoutEffect",(()=>A),(e=>A=e)),e(t.exports,"useMemo",(()=>E),(e=>E=e)),e(t.exports,"useReducer",(()=>O),(e=>O=e)),e(t.exports,"useRef",(()=>L),(e=>L=e)),e(t.exports,"useState",(()=>T),(e=>T=e)),e(t.exports,"version",(()=>R),(e=>R=e));var D=i("8Yvkm"),P=60103,N=60106;r=60107,o=60108,s=60114;var B=60109,I=60110,_=60112;a=60113;var z=60115,F=60116;if("function"==typeof Symbol&&Symbol.for){var V=Symbol.for;P=V("react.element"),N=V("react.portal"),r=V("react.fragment"),o=V("react.strict_mode"),s=V("react.profiler"),B=V("react.provider"),I=V("react.context"),_=V("react.forward_ref"),a=V("react.suspense"),z=V("react.memo"),F=V("react.lazy")}var H="function"==typeof Symbol&&Symbol.iterator;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U={};function K(e,t,n){this.props=e,this.context=t,this.refs=U,this.updater=n||j}function q(){}function $(e,t,n){this.props=e,this.context=t,this.refs=U,this.updater=n||j}K.prototype.isReactComponent={},K.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(W(85));this.updater.enqueueSetState(this,e,t,"setState")},K.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},q.prototype=K.prototype;var Q=$.prototype=new q;Q.constructor=$,D(Q,K.prototype),Q.isPureReactComponent=!0;var J={current:null},G=Object.prototype.hasOwnProperty,Y={key:!0,ref:!0,__self:!0,__source:!0};function X(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)G.call(t,r)&&!Y.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:P,type:e,key:o,ref:s,props:i,_owner:J.current}}function Z(e){return"object"==typeof e&&null!==e&&e.$$typeof===P}var ee=/\/+/g;function te(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function ne(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var s,a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case P:case N:a=!0}}if(a)return i=i(a=e),e=""===r?"."+te(a,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(ee,"$&/")+"/"),ne(i,t,n,"",(function(e){return e}))):null!=i&&(Z(i)&&(i=function(e,t){return{$$typeof:P,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(ee,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+te(o=e[l],l);a+=ne(o,t,n,c,i)}else if("function"==typeof(c=null===(s=e)||"object"!=typeof s?null:"function"==typeof(s=H&&s[H]||s["@@iterator"])?s:null))for(e=c.call(e),l=0;!(o=e.next()).done;)a+=ne(o=o.value,t,n,c=r+te(o,l++),i);else if("object"===o)throw t=""+e,Error(W(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function re(e,t,n){if(null==e)return e;var r=[],i=0;return ne(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function ie(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var oe={current:null};function se(){var e=oe.current;if(null===e)throw Error(W(321));return e}l={map:re,forEach:function(e,t,n){re(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return re(e,(function(){t++})),t},toArray:function(e){return re(e,(function(e){return e}))||[]},only:function(e){if(!Z(e))throw Error(W(143));return e}},c=K,u=$,h={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:D},f=function(e,t,n){if(null==e)throw Error(W(267,e));var r=D({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=J.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)G.call(t,l)&&!Y.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==a?a[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:P,type:e.type,key:i,ref:o,props:r,_owner:s}},d=function(e,t){return void 0===t&&(t=null),(e={$$typeof:I,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:B,_context:e},e.Consumer=e},p=X,m=function(e){var t=X.bind(null,e);return t.type=e,t},g=function(){return{current:null}},v=function(e){return{$$typeof:_,render:e}},y=Z,w=function(e){return{$$typeof:F,_payload:{_status:-1,_result:e},_init:ie}},b=function(e,t){return{$$typeof:z,type:e,compare:void 0===t?null:t}},k=function(e,t){return se().useCallback(e,t)},x=function(e,t){return se().useContext(e,t)},S=function(){},C=function(e,t){return se().useEffect(e,t)},M=function(e,t,n){return se().useImperativeHandle(e,t,n)},A=function(e,t){return se().useLayoutEffect(e,t)},E=function(e,t){return se().useMemo(e,t)},O=function(e,t,n){return se().useReducer(e,t,n)},L=function(e){return se().useRef(e)},T=function(e){return se().useState(e)},R="17.0.2"})),i.register("afazG",(function(t,n){var r,o,s,a,l,c,u,h,f,d,p;e(t.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(()=>r),(e=>r=e)),e(t.exports,"createPortal",(()=>o),(e=>o=e)),e(t.exports,"findDOMNode",(()=>s),(e=>s=e)),e(t.exports,"flushSync",(()=>a),(e=>a=e)),e(t.exports,"hydrate",(()=>l),(e=>l=e)),e(t.exports,"render",(()=>c),(e=>c=e)),e(t.exports,"unmountComponentAtNode",(()=>u),(e=>u=e)),e(t.exports,"unstable_batchedUpdates",(()=>h),(e=>h=e)),e(t.exports,"unstable_createPortal",(()=>f),(e=>f=e)),e(t.exports,"unstable_renderSubtreeIntoContainer",(()=>d),(e=>d=e)),e(t.exports,"version",(()=>p),(e=>p=e));var m=i("lydNP"),g=i("8Yvkm"),v=i("cvIIE");function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!m)throw Error(y(227));var w=new Set,b={};function k(e,t){x(e,t),x(e+"Capture",t)}function x(e,t){for(b[e]=t,e=0;e<t.length;e++)w.add(t[e])}var S=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M=Object.prototype.hasOwnProperty,A={},E={};function O(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){L[e]=new O(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];L[t]=new O(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){L[e]=new O(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){L[e]=new O(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){L[e]=new O(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){L[e]=new O(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){L[e]=new O(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){L[e]=new O(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){L[e]=new O(e,5,!1,e.toLowerCase(),null,!1,!1)}));var T=/[\-:]([a-z])/g;function R(e){return e[1].toUpperCase()}function D(e,t,n,r){var i=L.hasOwnProperty(t)?L[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!M.call(E,e)||!M.call(A,e)&&(C.test(e)?E[e]=!0:(A[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(T,R);L[t]=new O(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(T,R);L[t]=new O(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(T,R);L[t]=new O(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){L[e]=new O(e,1,!1,e.toLowerCase(),null,!1,!1)})),L.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){L[e]=new O(e,1,!1,e.toLowerCase(),null,!0,!0)}));var P=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=60103,B=60106,I=60107,_=60108,z=60114,F=60109,V=60110,H=60112,W=60113,j=60120,U=60115,K=60116,q=60121,$=60128,Q=60129,J=60130,G=60131;if("function"==typeof Symbol&&Symbol.for){var Y=Symbol.for;N=Y("react.element"),B=Y("react.portal"),I=Y("react.fragment"),_=Y("react.strict_mode"),z=Y("react.profiler"),F=Y("react.provider"),V=Y("react.context"),H=Y("react.forward_ref"),W=Y("react.suspense"),j=Y("react.suspense_list"),U=Y("react.memo"),K=Y("react.lazy"),q=Y("react.block"),Y("react.scope"),$=Y("react.opaque.id"),Q=Y("react.debug_trace_mode"),J=Y("react.offscreen"),G=Y("react.legacy_hidden")}var X,Z="function"==typeof Symbol&&Symbol.iterator;function ee(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Z&&e[Z]||e["@@iterator"])?e:null}function te(e){if(void 0===X)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);X=t&&t[1]||""}return"\n"+X+e}var ne=!1;function re(e,t){if(!e||ne)return"";ne=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a])return"\n"+i[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{ne=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?te(e):""}function ie(e){switch(e.tag){case 5:return te(e.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return e=re(e.type,!1);case 11:return e=re(e.type.render,!1);case 22:return e=re(e.type._render,!1);case 1:return e=re(e.type,!0);default:return""}}function oe(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case I:return"Fragment";case B:return"Portal";case z:return"Profiler";case _:return"StrictMode";case W:return"Suspense";case j:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case V:return(e.displayName||"Context")+".Consumer";case F:return(e._context.displayName||"Context")+".Provider";case H:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case U:return oe(e.type);case q:return oe(e._render);case K:t=e._payload,e=e._init;try{return oe(e(t))}catch(e){}}return null}function se(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ae(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function le(e){e._valueTracker||(e._valueTracker=function(e){var t=ae(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ce(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ae(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ue(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function he(e,t){var n=t.checked;return g({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function fe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=se(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function de(e,t){null!=(t=t.checked)&&D(e,"checked",t,!1)}function pe(e,t){de(e,t);var n=se(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ge(e,t.type,n):t.hasOwnProperty("defaultValue")&&ge(e,t.type,se(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function me(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ge(e,t,n){"number"===t&&ue(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ve(e,t){return e=g({children:void 0},t),(t=function(e){var t="";return m.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ye(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+se(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function we(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(y(91));return g({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function be(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(y(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(y(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:se(n)}}function ke(e,t){var n=se(t.value),r=se(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function xe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Se="http://www.w3.org/1999/xhtml",Ce="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ae(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ee,Oe,Le=(Oe=function(e,t){if(e.namespaceURI!==Ce||"innerHTML"in e)e.innerHTML=t;else{for((Ee=Ee||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ee.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Oe(e,t)}))}:Oe);function Te(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Re={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},De=["Webkit","ms","Moz","O"];function Pe(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Re.hasOwnProperty(e)&&Re[e]?(""+t).trim():t+"px"}function Ne(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Re).forEach((function(e){De.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Re[t]=Re[e]}))}));var Be=g({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(y(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(y(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(y(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(y(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ze(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Fe=null,Ve=null,He=null;function We(e){if(e=fi(e)){if("function"!=typeof Fe)throw Error(y(280));var t=e.stateNode;t&&(t=pi(t),Fe(e.stateNode,e.type,t))}}function je(e){Ve?He?He.push(e):He=[e]:Ve=e}function Ue(){if(Ve){var e=Ve,t=He;if(He=Ve=null,We(e),t)for(e=0;e<t.length;e++)We(t[e])}}function Ke(e,t){return e(t)}function qe(e,t,n,r,i){return e(t,n,r,i)}function $e(){}var Qe=Ke,Je=!1,Ge=!1;function Ye(){null===Ve&&null===He||($e(),Ue())}function Xe(e,t){var n=e.stateNode;if(null===n)return null;var r=pi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(y(231,t,typeof n));return n}var Ze=!1;if(S)try{var et={};Object.defineProperty(et,"passive",{get:function(){Ze=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch(Oe){Ze=!1}function tt(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var nt=!1,rt=null,it=!1,ot=null,st={onError:function(e){nt=!0,rt=e}};function at(e,t,n,r,i,o,s,a,l){nt=!1,rt=null,tt.apply(st,arguments)}function lt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ct(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ut(e){if(lt(e)!==e)throw Error(y(188))}function ht(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=lt(e)))throw Error(y(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ut(i),e;if(o===r)return ut(i),t;o=o.sibling}throw Error(y(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(y(189))}}if(n.alternate!==r)throw Error(y(190))}if(3!==n.tag)throw Error(y(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function ft(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var dt,pt,mt,gt,vt=!1,yt=[],wt=null,bt=null,kt=null,xt=new Map,St=new Map,Ct=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function Et(e,t){switch(e){case"focusin":case"focusout":wt=null;break;case"dragenter":case"dragleave":bt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":xt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Ot(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=At(t,n,r,i,o),null!==t&&(null!==(t=fi(t))&&pt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=hi(e.target);if(null!==t){var n=lt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ct(n)))return e.blockedOn=t,void gt(e.lanePriority,(function(){v.unstable_runWithPriority(e.priority,(function(){mt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Tt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=fn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=fi(n))&&pt(t),e.blockedOn=n,!1;t.shift()}return!0}function Rt(e,t,n){Tt(e)&&n.delete(t)}function Dt(){for(vt=!1;0<yt.length;){var e=yt[0];if(null!==e.blockedOn){null!==(e=fi(e.blockedOn))&&dt(e);break}for(var t=e.targetContainers;0<t.length;){var n=fn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&yt.shift()}null!==wt&&Tt(wt)&&(wt=null),null!==bt&&Tt(bt)&&(bt=null),null!==kt&&Tt(kt)&&(kt=null),xt.forEach(Rt),St.forEach(Rt)}function Pt(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,v.unstable_scheduleCallback(v.unstable_NormalPriority,Dt)))}function Nt(e){function t(t){return Pt(t,e)}if(0<yt.length){Pt(yt[0],e);for(var n=1;n<yt.length;n++){var r=yt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==wt&&Pt(wt,e),null!==bt&&Pt(bt,e),null!==kt&&Pt(kt,e),xt.forEach(t),St.forEach(t),n=0;n<Ct.length;n++)(r=Ct[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ct.length&&null===(n=Ct[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ct.shift()}function Bt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:Bt("Animation","AnimationEnd"),animationiteration:Bt("Animation","AnimationIteration"),animationstart:Bt("Animation","AnimationStart"),transitionend:Bt("Transition","TransitionEnd")},_t={},zt={};function Ft(e){if(_t[e])return _t[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in zt)return _t[e]=n[t];return e}S&&(zt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Vt=Ft("animationend"),Ht=Ft("animationiteration"),Wt=Ft("animationstart"),jt=Ft("transitionend"),Ut=new Map,Kt=new Map,qt=["abort","abort",Vt,"animationEnd",Ht,"animationIteration",Wt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",jt,"transitionEnd","waiting","waiting"];function $t(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Kt.set(r,t),Ut.set(r,i),k(i,[r])}}(0,v.unstable_now)();var Qt=8;function Jt(e){if(0!=(1&e))return Qt=15,1;if(0!=(2&e))return Qt=14,2;if(0!=(4&e))return Qt=13,4;var t=24&e;return 0!==t?(Qt=12,t):0!=(32&e)?(Qt=11,32):0!==(t=192&e)?(Qt=10,t):0!=(256&e)?(Qt=9,256):0!==(t=3584&e)?(Qt=8,t):0!=(4096&e)?(Qt=7,4096):0!==(t=4186112&e)?(Qt=6,t):0!==(t=62914560&e)?(Qt=5,t):67108864&e?(Qt=4,67108864):0!=(134217728&e)?(Qt=3,134217728):0!==(t=805306368&e)?(Qt=2,t):0!=(1073741824&e)?(Qt=1,1073741824):(Qt=8,e)}function Gt(e,t){var n=e.pendingLanes;if(0===n)return Qt=0;var r=0,i=0,o=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(0!==o)r=o,i=Qt=15;else if(0!==(o=134217727&n)){var l=o&~s;0!==l?(r=Jt(l),i=Qt):0!==(a&=o)&&(r=Jt(a),i=Qt)}else 0!==(o=n&~s)?(r=Jt(o),i=Qt):0!==a&&(r=Jt(a),i=Qt);if(0===r)return 0;if(r=n&((0>(r=31-nn(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&s)){if(Jt(t),i<=Qt)return t;Qt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-nn(t)),r|=e[n],t&=~i;return r}function Yt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Xt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Zt(24&~t))?Xt(10,t):e;case 10:return 0===(e=Zt(192&~t))?Xt(8,t):e;case 8:return 0===(e=Zt(3584&~t))&&(0===(e=Zt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Zt(805306368&~t))&&(t=268435456),t}throw Error(y(358,e))}function Zt(e){return e&-e}function en(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tn(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-nn(t)]=n}var nn=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(rn(e)/on|0)|0},rn=Math.log,on=Math.LN2;var sn=v.unstable_UserBlockingPriority,an=v.unstable_runWithPriority,ln=!0;function cn(e,t,n,r){Je||$e();var i=hn,o=Je;Je=!0;try{qe(i,e,t,n,r)}finally{(Je=o)||Ye()}}function un(e,t,n,r){an(sn,hn.bind(null,e,t,n,r))}function hn(e,t,n,r){var i;if(ln)if((i=0==(4&t))&&0<yt.length&&-1<Mt.indexOf(e))e=At(null,e,t,n,r),yt.push(e);else{var o=fn(e,t,n,r);if(null===o)i&&Et(e,r);else{if(i){if(-1<Mt.indexOf(e))return e=At(o,e,t,n,r),void yt.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return wt=Ot(wt,e,t,n,r,i),!0;case"dragenter":return bt=Ot(bt,e,t,n,r,i),!0;case"mouseover":return kt=Ot(kt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return xt.set(o,Ot(xt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,St.set(o,Ot(St.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;Et(e,r)}Ur(e,t,r,null,n)}}}function fn(e,t,n,r){var i=ze(r);if(null!==(i=hi(i))){var o=lt(i);if(null===o)i=null;else{var s=o.tag;if(13===s){if(null!==(i=ct(o)))return i;i=null}else if(3===s){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ur(e,t,r,i,n),null}var dn=null,pn=null,mn=null;function gn(){if(mn)return mn;var e,t,n=pn,r=n.length,i="value"in dn?dn.value:dn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return mn=i.slice(e,1<t?1-t:void 0)}function vn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function yn(){return!0}function wn(){return!1}function bn(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?yn:wn,this.isPropagationStopped=wn,this}return g(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=yn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=yn)},persist:function(){},isPersistent:yn}),t}var kn,xn,Sn,Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mn=bn(Cn),An=g({},Cn,{view:0,detail:0}),En=bn(An),On=g({},An,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sn&&(Sn&&"mousemove"===e.type?(kn=e.screenX-Sn.screenX,xn=e.screenY-Sn.screenY):xn=kn=0,Sn=e),kn)},movementY:function(e){return"movementY"in e?e.movementY:xn}}),Ln=bn(On),Tn=bn(g({},On,{dataTransfer:0})),Rn=bn(g({},An,{relatedTarget:0})),Dn=bn(g({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0})),Pn=bn(g({},Cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),Nn=bn(g({},Cn,{data:0})),Bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Fn(){return zn}var Vn=bn(g({},An,{key:function(e){if(e.key){var t=Bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=vn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fn,charCode:function(e){return"keypress"===e.type?vn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?vn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Hn=bn(g({},On,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Wn=bn(g({},An,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fn})),jn=bn(g({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Un=bn(g({},On,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Kn=[9,13,27,32],qn=S&&"CompositionEvent"in window,$n=null;S&&"documentMode"in document&&($n=document.documentMode);var Qn=S&&"TextEvent"in window&&!$n,Jn=S&&(!qn||$n&&8<$n&&11>=$n),Gn=String.fromCharCode(32),Yn=!1;function Xn(e,t){switch(e){case"keyup":return-1!==Kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var er=!1;var tr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!tr[e.type]:"textarea"===t}function rr(e,t,n,r){je(r),0<(t=qr(t,"onChange")).length&&(n=new Mn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ir=null,or=null;function sr(e){zr(e,0)}function ar(e){if(ce(di(e)))return e}function lr(e,t){if("change"===e)return t}var cr=!1;if(S){var ur;if(S){var hr="oninput"in document;if(!hr){var fr=document.createElement("div");fr.setAttribute("oninput","return;"),hr="function"==typeof fr.oninput}ur=hr}else ur=!1;cr=ur&&(!document.documentMode||9<document.documentMode)}function dr(){ir&&(ir.detachEvent("onpropertychange",pr),or=ir=null)}function pr(e){if("value"===e.propertyName&&ar(or)){var t=[];if(rr(t,or,e,ze(e)),e=sr,Je)e(t);else{Je=!0;try{Ke(e,t)}finally{Je=!1,Ye()}}}}function mr(e,t,n){"focusin"===e?(dr(),or=n,(ir=t).attachEvent("onpropertychange",pr)):"focusout"===e&&dr()}function gr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ar(or)}function vr(e,t){if("click"===e)return ar(t)}function yr(e,t){if("input"===e||"change"===e)return ar(t)}var wr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},br=Object.prototype.hasOwnProperty;function kr(e,t){if(wr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!br.call(t,n[r])||!wr(e[n[r]],t[n[r]]))return!1;return!0}function xr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sr(e,t){var n,r=xr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xr(r)}}function Cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Mr(){for(var e=window,t=ue();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=ue((e=t.contentWindow).document)}return t}function Ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Er=S&&"documentMode"in document&&11>=document.documentMode,Or=null,Lr=null,Tr=null,Rr=!1;function Dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Rr||null==Or||Or!==ue(r)||("selectionStart"in(r=Or)&&Ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Tr&&kr(Tr,r)||(Tr=r,0<(r=qr(Lr,"onSelect")).length&&(t=new Mn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Or)))}$t("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),$t("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),$t(qt,2);for(var Pr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Nr=0;Nr<Pr.length;Nr++)Kt.set(Pr[Nr],0);x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),k("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),k("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),k("onBeforeInput",["compositionend","keypress","textInput","paste"]),k("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),k("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),k("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function _r(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,a,l){if(at.apply(this,arguments),nt){if(!nt)throw Error(y(198));var c=rt;nt=!1,rt=null,it||(it=!0,ot=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;_r(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;_r(i,a,c),o=l}}}if(it)throw e=ot,it=!1,ot=null,e}function Fr(e,t){var n=mi(t),r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){e[Vr]||(e[Vr]=!0,w.forEach((function(t){Ir.has(t)||Wr(t,!1,e,null),Wr(t,!0,e,null)})))}function Wr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Ir.has(e)){if("scroll"!==e)return;i|=2,o=r}var s=mi(o),a=e+"__"+(t?"capture":"bubble");s.has(a)||(t&&(i|=4),jr(o,e,i,t),s.add(a))}function jr(e,t,n,r){var i=Kt.get(t);switch(void 0===i?2:i){case 0:i=cn;break;case 1:i=un;break;default:i=hn}n=i.bind(null,t,n,e),i=void 0,!Ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=hi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Ge)return e(t,n);Ge=!0;try{Qe(e,t,n)}finally{Ge=!1,Ye()}}((function(){var r=o,i=ze(n),s=[];e:{var a=Ut.get(e);if(void 0!==a){var l=Mn,c=e;switch(e){case"keypress":if(0===vn(n))break e;case"keydown":case"keyup":l=Vn;break;case"focusin":c="focus",l=Rn;break;case"focusout":c="blur",l=Rn;break;case"beforeblur":case"afterblur":l=Rn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Tn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Wn;break;case Vt:case Ht:case Wt:l=Dn;break;case jt:l=jn;break;case"scroll":l=En;break;case"wheel":l=Un;break;case"copy":case"cut":case"paste":l=Pn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Hn}var u=0!=(4&t),h=!u&&"scroll"===e,f=u?null!==a?a+"Capture":null:a;u=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&(null!=(m=Xe(p,f))&&u.push(Kr(p,m,d)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!hi(c)&&!c[ci])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?hi(c):null)&&(c!==(h=lt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=Ln,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Hn,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?a:di(l),d=null==c?a:di(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=d,m=null,hi(i)===r&&((u=new u(f,p+"enter",c,n,i)).target=d,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(f=c,p=0,d=u=l;d;d=$r(d))p++;for(d=0,m=f;m;m=$r(m))d++;for(;0<p-d;)u=$r(u),p--;for(;0<d-p;)f=$r(f),d--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=$r(u),f=$r(f)}u=null}else u=null;null!==l&&Qr(s,a,l,u,!1),null!==c&&null!==h&&Qr(s,h,c,u,!0)}if("select"===(l=(a=r?di(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=lr;else if(nr(a))if(cr)g=yr;else{g=gr;var v=mr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=vr);switch(g&&(g=g(e,r))?rr(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ge(a,"number",a.value)),v=r?di(r):window,e){case"focusin":(nr(v)||"true"===v.contentEditable)&&(Or=v,Lr=r,Tr=null);break;case"focusout":Tr=Lr=Or=null;break;case"mousedown":Rr=!0;break;case"contextmenu":case"mouseup":case"dragend":Rr=!1,Dr(s,n,i);break;case"selectionchange":if(Er)break;case"keydown":case"keyup":Dr(s,n,i)}var y;if(qn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else er?Xn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Jn&&"ko"!==n.locale&&(er||"onCompositionStart"!==w?"onCompositionEnd"===w&&er&&(y=gn()):(pn="value"in(dn=i)?dn.value:dn.textContent,er=!0)),0<(v=qr(r,w)).length&&(w=new Nn(w,e,null,n,i),s.push({event:w,listeners:v}),y?w.data=y:null!==(y=Zn(n))&&(w.data=y))),(y=Qn?function(e,t){switch(e){case"compositionend":return Zn(t);case"keypress":return 32!==t.which?null:(Yn=!0,Gn);case"textInput":return(e=t.data)===Gn&&Yn?null:e;default:return null}}(e,n):function(e,t){if(er)return"compositionend"===e||!qn&&Xn(e,t)?(e=gn(),mn=pn=dn=null,er=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new Nn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}zr(s,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Xe(e,n))&&r.unshift(Kr(e,o,i)),null!=(o=Xe(e,t))&&r.push(Kr(e,o,i))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Xe(n,o))&&s.unshift(Kr(n,l,a)):i||null!=(l=Xe(n,o))&&s.push(Kr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}function Jr(){}var Gr=null,Yr=null;function Xr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Zr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"==typeof setTimeout?setTimeout:void 0,ti="function"==typeof clearTimeout?clearTimeout:void 0;function ni(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function ri(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function ii(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var oi=0;var si=Math.random().toString(36).slice(2),ai="__reactFiber$"+si,li="__reactProps$"+si,ci="__reactContainer$"+si,ui="__reactEvents$"+si;function hi(e){var t=e[ai];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ci]||n[ai]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ii(e);null!==e;){if(n=e[ai])return n;e=ii(e)}return t}n=(e=n).parentNode}return null}function fi(e){return!(e=e[ai]||e[ci])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function di(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(y(33))}function pi(e){return e[li]||null}function mi(e){var t=e[ui];return void 0===t&&(t=e[ui]=new Set),t}var gi=[],vi=-1;function yi(e){return{current:e}}function wi(e){0>vi||(e.current=gi[vi],gi[vi]=null,vi--)}function bi(e,t){vi++,gi[vi]=e.current,e.current=t}var ki={},xi=yi(ki),Si=yi(!1),Ci=ki;function Mi(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ai(e){return null!=(e=e.childContextTypes)}function Ei(){wi(Si),wi(xi)}function Oi(e,t,n){if(xi.current!==ki)throw Error(y(168));bi(xi,t),bi(Si,n)}function Li(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(y(108,oe(t)||"Unknown",i));return g({},n,r)}function Ti(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ci=xi.current,bi(xi,e),bi(Si,Si.current),!0}function Ri(e,t,n){var r=e.stateNode;if(!r)throw Error(y(169));n?(e=Li(e,t,Ci),r.__reactInternalMemoizedMergedChildContext=e,wi(Si),wi(xi),bi(xi,e)):wi(Si),bi(Si,n)}var Di=null,Pi=null,Ni=v.unstable_runWithPriority,Bi=v.unstable_scheduleCallback,Ii=v.unstable_cancelCallback,_i=v.unstable_shouldYield,zi=v.unstable_requestPaint,Fi=v.unstable_now,Vi=v.unstable_getCurrentPriorityLevel,Hi=v.unstable_ImmediatePriority,Wi=v.unstable_UserBlockingPriority,ji=v.unstable_NormalPriority,Ui=v.unstable_LowPriority,Ki=v.unstable_IdlePriority,qi={},$i=void 0!==zi?zi:function(){},Qi=null,Ji=null,Gi=!1,Yi=Fi(),Xi=1e4>Yi?Fi:function(){return Fi()-Yi};function Zi(){switch(Vi()){case Hi:return 99;case Wi:return 98;case ji:return 97;case Ui:return 96;case Ki:return 95;default:throw Error(y(332))}}function eo(e){switch(e){case 99:return Hi;case 98:return Wi;case 97:return ji;case 96:return Ui;case 95:return Ki;default:throw Error(y(332))}}function to(e,t){return e=eo(e),Ni(e,t)}function no(e,t,n){return e=eo(e),Bi(e,t,n)}function ro(){if(null!==Ji){var e=Ji;Ji=null,Ii(e)}io()}function io(){if(!Gi&&null!==Qi){Gi=!0;var e=0;try{var t=Qi;to(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Qi=null}catch(t){throw null!==Qi&&(Qi=Qi.slice(e+1)),Bi(Hi,ro),t}finally{Gi=!1}}}var oo=P.ReactCurrentBatchConfig;function so(e,t){if(e&&e.defaultProps){for(var n in t=g({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ao=yi(null),lo=null,co=null,uo=null;function ho(){uo=co=lo=null}function fo(e){var t=ao.current;wi(ao),e.type._context._currentValue=t}function po(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function mo(e,t){lo=e,uo=co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(qs=!0),e.firstContext=null)}function go(e,t){if(uo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(uo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===co){if(null===lo)throw Error(y(308));co=t,lo.dependencies={lanes:0,firstContext:t,responders:null}}else co=co.next=t;return e._currentValue}var vo=!1;function yo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function wo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ko(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function xo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function So(e,t,n,r){var i=e.updateQueue;vo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;if(null!==u){var h=(u=u.updateQueue).lastBaseUpdate;h!==s&&(null===h?u.firstBaseUpdate=c:h.next=c,u.lastBaseUpdate=l)}}if(null!==o){for(h=i.baseState,s=0,u=c=l=null;;){a=o.lane;var f=o.eventTime;if((r&a)===a){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,p=o;switch(a=t,f=n,p.tag){case 1:if("function"==typeof(d=p.payload)){h=d.call(f,h,a);break e}h=d;break e;case 3:d.flags=-4097&d.flags|64;case 0:if(null==(a="function"==typeof(d=p.payload)?d.call(f,h,a):d))break e;h=g({},h,a);break e;case 2:vo=!0}}null!==o.callback&&(e.flags|=32,null===(a=i.effects)?i.effects=[o]:a.push(o))}else f={eventTime:f,lane:a,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=a;if(null===(o=o.next)){if(null===(a=i.shared.pending))break;o=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,Ga|=s,e.lanes=s,e.memoizedState=h}}function Co(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(y(191,i));i.call(r)}}}var Mo=(new m.Component).refs;function Ao(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:g({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Eo={isMounted:function(e){return!!(e=e._reactInternals)&&lt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kl(),i=xl(e),o=bo(r,i);o.payload=t,null!=n&&(o.callback=n),ko(e,o),Sl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kl(),i=xl(e),o=bo(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),ko(e,o),Sl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kl(),r=xl(e),i=bo(n,r);i.tag=2,null!=t&&(i.callback=t),ko(e,i),Sl(e,r,n)}};function Oo(e,t,n,r,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!kr(n,r)||!kr(i,o))}function Lo(e,t,n){var r=!1,i=ki,o=t.contextType;return"object"==typeof o&&null!==o?o=go(o):(i=Ai(t)?Ci:xi.current,o=(r=null!=(r=t.contextTypes))?Mi(e,i):ki),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Eo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function To(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Eo.enqueueReplaceState(t,t.state,null)}function Ro(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Mo,yo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=go(o):(o=Ai(t)?Ci:xi.current,i.context=Mi(e,o)),So(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Ao(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Eo.enqueueReplaceState(i,i.state,null),So(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var Do=Array.isArray;function Po(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(y(309));var r=n.stateNode}if(!r)throw Error(y(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===Mo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(y(284));if(!n._owner)throw Error(y(290,e))}return e}function No(e,t){if("textarea"!==e.type)throw Error(y(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Bo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=tc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=oc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Po(e,t,n),r.return=e,r):((r=nc(n.type,n.key,n.props,null,e.mode,r)).ref=Po(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=sc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=rc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=oc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case N:return(n=nc(t.type,t.key,t.props,null,e.mode,n)).ref=Po(e,null,t),n.return=e,n;case B:return(t=sc(t,e.mode,n)).return=e,t}if(Do(t)||ee(t))return(t=rc(t,e.mode,n,null)).return=e,t;No(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case N:return n.key===i?n.type===I?u(e,t,n.props.children,r,i):l(e,t,n,r):null;case B:return n.key===i?c(e,t,n,r):null}if(Do(n)||ee(n))return null!==i?null:u(e,t,n,r,null);No(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case N:return e=e.get(null===r.key?n:r.key)||null,r.type===I?u(t,e,r.props.children,i,r.key):l(t,e,r,i);case B:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Do(r)||ee(r))return u(t,e=e.get(n)||null,r,i,null);No(t,r)}return null}return function(a,l,c,u){var p="object"==typeof c&&null!==c&&c.type===I&&null===c.key;p&&(c=c.props.children);var m="object"==typeof c&&null!==c;if(m)switch(c.$$typeof){case N:e:{for(m=c.key,p=l;null!==p;){if(p.key===m){if(7===p.tag){if(c.type===I){n(a,p.sibling),(l=i(p,c.props.children)).return=a,a=l;break e}}else if(p.elementType===c.type){n(a,p.sibling),(l=i(p,c.props)).ref=Po(a,p,c),l.return=a,a=l;break e}n(a,p);break}t(a,p),p=p.sibling}c.type===I?((l=rc(c.props.children,a.mode,u,c.key)).return=a,a=l):((u=nc(c.type,c.key,c.props,null,a.mode,u)).ref=Po(a,l,c),u.return=a,a=u)}return s(a);case B:e:{for(p=c.key;null!==l;){if(l.key===p){if(4===l.tag&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){n(a,l.sibling),(l=i(l,c.children||[])).return=a,a=l;break e}n(a,l);break}t(a,l),l=l.sibling}(l=sc(c,a.mode,u)).return=a,a=l}return s(a)}if("string"==typeof c||"number"==typeof c)return c=""+c,null!==l&&6===l.tag?(n(a,l.sibling),(l=i(l,c)).return=a,a=l):(n(a,l),(l=oc(c,a.mode,u)).return=a,a=l),s(a);if(Do(c))return function(i,s,a,l){for(var c=null,u=null,p=s,m=s=0,g=null;null!==p&&m<a.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var v=f(i,p,a[m],l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,p=g}if(m===a.length)return n(i,p),c;if(null===p){for(;m<a.length;m++)null!==(p=h(i,a[m],l))&&(s=o(p,s,m),null===u?c=p:u.sibling=p,u=p);return c}for(p=r(i,p);m<a.length;m++)null!==(g=d(p,i,m,a[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&p.forEach((function(e){return t(i,e)})),c}(a,l,c,u);if(ee(c))return function(i,s,a,l){var c=ee(a);if("function"!=typeof c)throw Error(y(150));if(null==(a=c.call(a)))throw Error(y(151));for(var u=c=null,p=s,m=s=0,g=null,v=a.next();null!==p&&!v.done;m++,v=a.next()){p.index>m?(g=p,p=null):g=p.sibling;var w=f(i,p,v.value,l);if(null===w){null===p&&(p=g);break}e&&p&&null===w.alternate&&t(i,p),s=o(w,s,m),null===u?c=w:u.sibling=w,u=w,p=g}if(v.done)return n(i,p),c;if(null===p){for(;!v.done;m++,v=a.next())null!==(v=h(i,v.value,l))&&(s=o(v,s,m),null===u?c=v:u.sibling=v,u=v);return c}for(p=r(i,p);!v.done;m++,v=a.next())null!==(v=d(p,i,m,v.value,l))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v);return e&&p.forEach((function(e){return t(i,e)})),c}(a,l,c,u);if(m&&No(a,c),void 0===c&&!p)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,oe(a.type)||"Component"))}return n(a,l)}}var Io=Bo(!0),_o=Bo(!1),zo={},Fo=yi(zo),Vo=yi(zo),Ho=yi(zo);function Wo(e){if(e===zo)throw Error(y(174));return e}function jo(e,t){switch(bi(Ho,t),bi(Vo,e),bi(Fo,zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ae(null,"");break;default:t=Ae(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}wi(Fo),bi(Fo,t)}function Uo(){wi(Fo),wi(Vo),wi(Ho)}function Ko(e){Wo(Ho.current);var t=Wo(Fo.current),n=Ae(t,e.type);t!==n&&(bi(Vo,e),bi(Fo,n))}function qo(e){Vo.current===e&&(wi(Fo),wi(Vo))}var $o=yi(0);function Qo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jo=null,Go=null,Yo=!1;function Xo(e,t){var n=Zl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Zo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function es(e){if(Yo){var t=Go;if(t){var n=t;if(!Zo(e,t)){if(!(t=ri(n.nextSibling))||!Zo(e,t))return e.flags=-1025&e.flags|2,Yo=!1,void(Jo=e);Xo(Jo,n)}Jo=e,Go=ri(t.firstChild)}else e.flags=-1025&e.flags|2,Yo=!1,Jo=e}}function ts(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Jo=e}function ns(e){if(e!==Jo)return!1;if(!Yo)return ts(e),Yo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Zr(t,e.memoizedProps))for(t=Go;t;)Xo(e,t),t=ri(t.nextSibling);if(ts(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(y(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Go=ri(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Go=null}}else Go=Jo?ri(e.stateNode.nextSibling):null;return!0}function rs(){Go=Jo=null,Yo=!1}var is=[];function os(){for(var e=0;e<is.length;e++)is[e]._workInProgressVersionPrimary=null;is.length=0}var ss=P.ReactCurrentDispatcher,as=P.ReactCurrentBatchConfig,ls=0,cs=null,us=null,hs=null,fs=!1,ds=!1;function ps(){throw Error(y(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wr(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,o){if(ls=o,cs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ss.current=null===e||null===e.memoizedState?Ws:js,e=n(r,i),ds){o=0;do{if(ds=!1,!(25>o))throw Error(y(301));o+=1,hs=us=null,t.updateQueue=null,ss.current=Us,e=n(r,i)}while(ds)}if(ss.current=Hs,t=null!==us&&null!==us.next,ls=0,hs=us=cs=null,fs=!1,t)throw Error(y(300));return e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===hs?cs.memoizedState=hs=e:hs=hs.next=e,hs}function ys(){if(null===us){var e=cs.alternate;e=null!==e?e.memoizedState:null}else e=us.next;var t=null===hs?cs.memoizedState:hs.next;if(null!==t)hs=t,us=e;else{if(null===e)throw Error(y(310));e={memoizedState:(us=e).memoizedState,baseState:us.baseState,baseQueue:us.baseQueue,queue:us.queue,next:null},null===hs?cs.memoizedState=hs=e:hs=hs.next=e}return hs}function ws(e,t){return"function"==typeof t?t(e):t}function bs(e){var t=ys(),n=t.queue;if(null===n)throw Error(y(311));n.lastRenderedReducer=e;var r=us,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var a=s=o=null,l=i;do{var c=l.lane;if((ls&c)===c)null!==a&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var u={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===a?(s=a=u,o=r):a=a.next=u,cs.lanes|=c,Ga|=c}l=l.next}while(null!==l&&l!==i);null===a?o=r:a.next=s,wr(r,t.memoizedState)||(qs=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ks(e){var t=ys(),n=t.queue;if(null===n)throw Error(y(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);wr(o,t.memoizedState)||(qs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function xs(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(ls&e)===e)&&(t._workInProgressVersionPrimary=r,is.push(t))),e)return n(t._source);throw is.push(t),Error(y(350))}function Ss(e,t,n,r){var i=Wa;if(null===i)throw Error(y(349));var o=t._getVersion,s=o(t._source),a=ss.current,l=a.useState((function(){return xs(i,t,n)})),c=l[1],u=l[0];l=hs;var h=e.memoizedState,f=h.refs,d=f.getSnapshot,p=h.source;h=h.subscribe;var m=cs;return e.memoizedState={refs:f,source:t,subscribe:r},a.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=o(t._source);if(!wr(s,e)){e=n(t._source),wr(u,e)||(c(e),e=xl(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var l=31-nn(a),h=1<<l;r[l]|=e,a&=~h}}}),[n,t,r]),a.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=xl(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),wr(d,n)&&wr(p,t)&&wr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ws,lastRenderedState:u}).dispatch=c=Vs.bind(null,cs,e),l.queue=e,l.baseQueue=null,u=xs(i,t,n),l.memoizedState=l.baseState=u),u}function Cs(e,t,n){return Ss(ys(),e,t,n)}function Ms(e){var t=vs();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e}).dispatch=Vs.bind(null,cs,e),[t.memoizedState,e]}function As(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=cs.updateQueue)?(t={lastEffect:null},cs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Es(e){return e={current:e},vs().memoizedState=e}function Os(){return ys().memoizedState}function Ls(e,t,n,r){var i=vs();cs.flags|=e,i.memoizedState=As(1|t,n,void 0,void 0===r?null:r)}function Ts(e,t,n,r){var i=ys();r=void 0===r?null:r;var o=void 0;if(null!==us){var s=us.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void As(t,n,o,r)}cs.flags|=e,i.memoizedState=As(1|t,n,o,r)}function Rs(e,t){return Ls(516,4,e,t)}function Ds(e,t){return Ts(516,4,e,t)}function Ps(e,t){return Ts(4,2,e,t)}function Ns(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bs(e,t,n){return n=null!=n?n.concat([e]):null,Ts(4,2,Ns.bind(null,t,e),n)}function Is(){}function _s(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zs(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Fs(e,t){var n=Zi();to(98>n?98:n,(function(){e(!0)})),to(97<n?97:n,(function(){var n=as.transition;as.transition=1;try{e(!1),t()}finally{as.transition=n}}))}function Vs(e,t,n){var r=kl(),i=xl(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?o.next=o:(o.next=s.next,s.next=o),t.pending=o,s=e.alternate,e===cs||null!==s&&s===cs)ds=fs=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=s(a,n);if(o.eagerReducer=s,o.eagerState=l,wr(l,a))return}catch(e){}Sl(e,i,r)}}var Hs={readContext:go,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useOpaqueIdentifier:ps,unstable_isNewReconciler:!1},Ws={readContext:go,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:go,useEffect:Rs,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ls(4,2,Ns.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Vs.bind(null,cs,e),[r.memoizedState,e]},useRef:Es,useState:Ms,useDebugValue:Is,useDeferredValue:function(e){var t=Ms(e),n=t[0],r=t[1];return Rs((function(){var t=as.transition;as.transition=1;try{r(e)}finally{as.transition=t}}),[e]),n},useTransition:function(){var e=Ms(!1),t=e[0];return Es(e=Fs.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=vs();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Ss(r,e,t,n)},useOpaqueIdentifier:function(){if(Yo){var e=!1,t={$$typeof:$,toString:r=function(){throw e||(e=!0,n("r:"+(oi++).toString(36))),Error(y(355))},valueOf:r},n=Ms(t)[1];return 0==(2&cs.mode)&&(cs.flags|=516,As(5,(function(){n("r:"+(oi++).toString(36))}),void 0,null)),t}var r;return Ms(t="r:"+(oi++).toString(36)),t},unstable_isNewReconciler:!1},js={readContext:go,useCallback:_s,useContext:go,useEffect:Ds,useImperativeHandle:Bs,useLayoutEffect:Ps,useMemo:zs,useReducer:bs,useRef:Os,useState:function(){return bs(ws)},useDebugValue:Is,useDeferredValue:function(e){var t=bs(ws),n=t[0],r=t[1];return Ds((function(){var t=as.transition;as.transition=1;try{r(e)}finally{as.transition=t}}),[e]),n},useTransition:function(){var e=bs(ws)[0];return[Os().current,e]},useMutableSource:Cs,useOpaqueIdentifier:function(){return bs(ws)[0]},unstable_isNewReconciler:!1},Us={readContext:go,useCallback:_s,useContext:go,useEffect:Ds,useImperativeHandle:Bs,useLayoutEffect:Ps,useMemo:zs,useReducer:ks,useRef:Os,useState:function(){return ks(ws)},useDebugValue:Is,useDeferredValue:function(e){var t=ks(ws),n=t[0],r=t[1];return Ds((function(){var t=as.transition;as.transition=1;try{r(e)}finally{as.transition=t}}),[e]),n},useTransition:function(){var e=ks(ws)[0];return[Os().current,e]},useMutableSource:Cs,useOpaqueIdentifier:function(){return ks(ws)[0]},unstable_isNewReconciler:!1},Ks=P.ReactCurrentOwner,qs=!1;function $s(e,t,n,r){t.child=null===e?_o(t,null,n,r):Io(t,e.child,n,r)}function Qs(e,t,n,r,i){n=n.render;var o=t.ref;return mo(t,i),r=gs(e,t,n,r,o,i),null===e||qs?(t.flags|=1,$s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,pa(e,t,i))}function Js(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!=typeof s||ec(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=nc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Gs(e,t,s,r,i,o))}return s=e.child,0==(i&o)&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:kr)(i,r)&&e.ref===t.ref)?pa(e,t,o):(t.flags|=1,(e=tc(s,r)).ref=t.ref,e.return=t,t.child=e)}function Gs(e,t,n,r,i,o){if(null!==e&&kr(e.memoizedProps,r)&&e.ref===t.ref){if(qs=!1,0==(o&i))return t.lanes=e.lanes,pa(e,t,o);0!=(16384&e.flags)&&(qs=!0)}return Zs(e,t,n,r,o)}function Ys(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},Rl(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Rl(t,e),null;t.memoizedState={baseLanes:0},Rl(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Rl(t,r);return $s(e,t,i,n),t.child}function Xs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Zs(e,t,n,r,i){var o=Ai(n)?Ci:xi.current;return o=Mi(t,o),mo(t,i),n=gs(e,t,n,r,o,i),null===e||qs?(t.flags|=1,$s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,pa(e,t,i))}function ea(e,t,n,r,i){if(Ai(n)){var o=!0;Ti(t)}else o=!1;if(mo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Lo(t,n,r),Ro(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=go(c):c=Mi(t,c=Ai(n)?Ci:xi.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&To(t,s,r,c),vo=!1;var f=t.memoizedState;s.state=f,So(t,r,s,i),l=t.memoizedState,a!==r||f!==l||Si.current||vo?("function"==typeof u&&(Ao(t,n,u,r),l=t.memoizedState),(a=vo||Oo(t,n,a,r,f,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4)):("function"==typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"==typeof s.componentDidMount&&(t.flags|=4),r=!1)}else{s=t.stateNode,wo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:so(t.type,a),s.props=c,h=t.pendingProps,f=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=go(l):l=Mi(t,l=Ai(n)?Ci:xi.current);var d=n.getDerivedStateFromProps;(u="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==h||f!==l)&&To(t,s,r,l),vo=!1,f=t.memoizedState,s.state=f,So(t,r,s,i);var p=t.memoizedState;a!==h||f!==p||Si.current||vo?("function"==typeof d&&(Ao(t,n,d,r),p=t.memoizedState),(c=vo||Oo(t,n,c,r,f,p,l))?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return ta(e,t,n,r,o,i)}function ta(e,t,n,r,i,o){Xs(e,t);var s=0!=(64&t.flags);if(!r&&!s)return i&&Ri(t,n,!1),pa(e,t,o);r=t.stateNode,Ks.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Io(t,e.child,null,o),t.child=Io(t,null,a,o)):$s(e,t,a,o),t.memoizedState=r.state,i&&Ri(t,n,!0),t.child}function na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),jo(e,t.containerInfo)}var ra,ia,oa,sa={dehydrated:null,retryLane:0};function aa(e,t,n){var r,i=t.pendingProps,o=$o.current,s=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),bi($o,1&o),null===e?(void 0!==i.fallback&&es(t),e=i.children,o=i.fallback,s?(e=la(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=sa,e):"number"==typeof i.unstable_expectedLoadTime?(e=la(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=sa,t.lanes=33554432,e):((n=ic({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,s?(i=ua(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},s.childLanes=e.childLanes&~n,t.memoizedState=sa,i):(n=ca(e,t,i.children,n),t.memoizedState=null,n))}function la(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=ic(t,i,0,null),n=rc(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function ca(e,t,n,r){var i=e.child;return e=i.sibling,n=tc(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ua(e,t,n,r,i){var o=t.mode,s=e.child;e=s.sibling;var a={mode:"hidden",children:n};return 0==(2&o)&&t.child!==s?((n=t.child).childLanes=0,n.pendingProps=a,null!==(s=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):n=tc(s,a),null!==e?r=tc(e,r):(r=rc(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ha(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),po(e.return,t)}function fa(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.lastEffect=o)}function da(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if($s(e,t,r.children,n),0!=(2&(r=$o.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ha(e,n);else if(19===e.tag)ha(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(bi($o,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Qo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),fa(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Qo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}fa(t,!0,n,null,o,t.lastEffect);break;case"together":fa(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function pa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ga|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(y(153));if(null!==t.child){for(n=tc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=tc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ma(e,t){if(!Yo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ga(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Ai(t.type)&&Ei(),null;case 3:return Uo(),wi(Si),wi(xi),os(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ns(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:qo(t);var i=Wo(Ho.current);if(n=t.type,null!==e&&null!=t.stateNode)ia(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(y(166));return null}if(e=Wo(Fo.current),ns(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ai]=t,r[li]=o,n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(e=0;e<Br.length;e++)Fr(Br[e],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":fe(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":be(r,o),Fr("invalid",r)}for(var s in Ie(n,o),e=null,o)o.hasOwnProperty(s)&&(i=o[s],"children"===s?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):b.hasOwnProperty(s)&&null!=i&&"onScroll"===s&&Fr("scroll",r));switch(n){case"input":le(r),me(r,o,!0);break;case"textarea":le(r),xe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(s=9===i.nodeType?i:i.ownerDocument,e===Se&&(e=Me(n)),e===Se?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ai]=t,e[li]=r,ra(e,t),t.stateNode=e,s=_e(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Br.length;i++)Fr(Br[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":fe(e,r),i=he(e,r),Fr("invalid",e);break;case"option":i=ve(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=g({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":be(e,r),i=we(e,r),Fr("invalid",e);break;default:i=r}Ie(n,i);var a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];"style"===o?Ne(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&Le(e,l):"children"===o?"string"==typeof l?("textarea"!==n||""!==l)&&Te(e,l):"number"==typeof l&&Te(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(b.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fr("scroll",e):null!=l&&D(e,o,l,s))}switch(n){case"input":le(e),me(e,r,!1);break;case"textarea":le(e),xe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+se(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ye(e,!!r.multiple,o,!1):null!=r.defaultValue&&ye(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Jr)}Xr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)oa(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(y(166));n=Wo(Ho.current),Wo(Fo.current),ns(t)?(r=t.stateNode,n=t.memoizedProps,r[ai]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ai]=t,t.stateNode=r)}return null;case 13:return wi($o),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&ns(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&$o.current)?0===$a&&($a=3):(0!==$a&&3!==$a||($a=4),null===Wa||0==(134217727&Ga)&&0==(134217727&Ya)||El(Wa,Ua))),(r||n)&&(t.flags|=4),null);case 4:return Uo(),null===e&&Hr(t.stateNode.containerInfo),null;case 10:return fo(t),null;case 19:if(wi($o),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(s=r.rendering))if(o)ma(r,!1);else{if(0!==$a||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(s=Qo(e))){for(t.flags|=64,ma(r,!1),null!==(o=s.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return bi($o,1&$o.current|2),t.child}e=e.sibling}null!==r.tail&&Xi()>tl&&(t.flags|=64,o=!0,ma(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Qo(s))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ma(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!Yo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Xi()-r.renderingStartTime>tl&&1073741824!==n&&(t.flags|=64,o=!0,ma(r,!1),t.lanes=33554432);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Xi(),n.sibling=null,t=$o.current,bi($o,o?1&t|2:1&t),n):null;case 23:case 24:return Dl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(y(156,t.tag))}function va(e){switch(e.tag){case 1:Ai(e.type)&&Ei();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Uo(),wi(Si),wi(xi),os(),0!=(64&(t=e.flags)))throw Error(y(285));return e.flags=-4097&t|64,e;case 5:return qo(e),null;case 13:return wi($o),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return wi($o),null;case 4:return Uo(),null;case 10:return fo(e),null;case 23:case 24:return Dl(),null;default:return null}}function ya(e,t){try{var n="",r=t;do{n+=ie(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function wa(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ia=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Wo(Fo.current);var o,s=null;switch(n){case"input":i=he(e,i),r=he(e,r),s=[];break;case"option":i=ve(e,i),r=ve(e,r),s=[];break;case"select":i=g({},i,{value:void 0}),r=g({},r,{value:void 0}),s=[];break;case"textarea":i=we(e,i),r=we(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Jr)}for(c in Ie(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(b.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(null!=l||null!=a))if("style"===c)if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(s=s||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(b.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Fr("scroll",e),s||a===l||(s=[])):"object"==typeof l&&null!==l&&l.$$typeof===$?l.toString():(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var ba="function"==typeof WeakMap?WeakMap:Map;function ka(e,t,n){(n=bo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ol||(ol=!0,sl=r),wa(0,t)},n}function xa(e,t,n){(n=bo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return wa(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===al?al=new Set([this]):al.add(this),wa(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var Sa="function"==typeof WeakSet?WeakSet:Set;function Ca(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Jl(e,t)}else t.current=null}function Ma(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:so(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&ni(t.stateNode.containerInfo))}throw Error(y(163))}function Aa(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(ql(n,e),Kl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:so(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&Co(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}Co(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Xr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Nt(n)))))}throw Error(y(163))}function Ea(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=Pe("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Oa(e,t){if(Pi&&"function"==typeof Pi.onCommitFiberUnmount)try{Pi.onCommitFiberUnmount(Di,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))ql(t,n);else{r=t;try{i()}catch(e){Jl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(Ca(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Jl(t,e)}break;case 5:Ca(t);break;case 4:Na(e,t)}}function La(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Ta(e){return 5===e.tag||3===e.tag||4===e.tag}function Ra(e){e:{for(var t=e.return;null!==t;){if(Ta(t))break e;t=t.return}throw Error(y(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(y(161))}16&n.flags&&(Te(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Ta(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Da(e,n,t):Pa(e,n,t)}function Da(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(Da(e,t,n),e=e.sibling;null!==e;)Da(e,t,n),e=e.sibling}function Pa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Pa(e,t,n),e=e.sibling;null!==e;)Pa(e,t,n),e=e.sibling}function Na(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(y(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,a=i,l=a;;)if(Oa(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===a)break e;for(;null===l.sibling;){if(null===l.return||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,a=i.stateNode,8===s.nodeType?s.parentNode.removeChild(a):s.removeChild(a)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(Oa(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[li]=r,"input"===e&&"radio"===r.type&&null!=r.name&&de(n,r),_e(e,i),t=_e(e,r),i=0;i<o.length;i+=2){var s=o[i],a=o[i+1];"style"===s?Ne(n,a):"dangerouslySetInnerHTML"===s?Le(n,a):"children"===s?Te(n,a):D(n,s,a,t)}switch(e){case"input":pe(n,r);break;case"textarea":ke(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ye(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ye(n,!!r.multiple,r.defaultValue,!0):ye(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(y(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Nt(n.containerInfo)));case 13:return null!==t.memoizedState&&(el=Xi(),Ea(t.child,!0)),void Ia(t);case 19:return void Ia(t);case 23:case 24:return void Ea(t,null!==t.memoizedState)}throw Error(y(163))}function Ia(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Sa),t.forEach((function(t){var r=Yl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function _a(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var za=Math.ceil,Fa=P.ReactCurrentDispatcher,Va=P.ReactCurrentOwner,Ha=0,Wa=null,ja=null,Ua=0,Ka=0,qa=yi(0),$a=0,Qa=null,Ja=0,Ga=0,Ya=0,Xa=0,Za=null,el=0,tl=1/0;function nl(){tl=Xi()+500}var rl,il=null,ol=!1,sl=null,al=null,ll=!1,cl=null,ul=90,hl=[],fl=[],dl=null,pl=0,ml=null,gl=-1,vl=0,yl=0,wl=null,bl=!1;function kl(){return 0!=(48&Ha)?Xi():-1!==gl?gl:gl=Xi()}function xl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Zi()?1:2;if(0===vl&&(vl=Ja),0!==oo.transition){0!==yl&&(yl=null!==Za?Za.pendingLanes:0),e=vl;var t=4186112&~yl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Zi(),0!=(4&Ha)&&98===e?e=Xt(12,vl):e=Xt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),vl),e}function Sl(e,t,n){if(50<pl)throw pl=0,ml=null,Error(y(185));if(null===(e=Cl(e,t)))return null;tn(e,t,n),e===Wa&&(Ya|=t,4===$a&&El(e,Ua));var r=Zi();1===t?0!=(8&Ha)&&0==(48&Ha)?Ol(e):(Ml(e,n),0===Ha&&(nl(),ro())):(0==(4&Ha)||98!==r&&99!==r||(null===dl?dl=new Set([e]):dl.add(e)),Ml(e,n)),Za=e}function Cl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ml(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-nn(s),l=1<<a,c=o[a];if(-1===c){if(0==(l&r)||0!=(l&i)){c=t,Jt(l);var u=Qt;o[a]=10<=u?c+250:6<=u?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=Gt(e,e===Wa?Ua:0),t=Qt,0===r)null!==n&&(n!==qi&&Ii(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==qi&&Ii(n)}15===t?(n=Ol.bind(null,e),null===Qi?(Qi=[n],Ji=Bi(Hi,io)):Qi.push(n),n=qi):14===t?n=no(99,Ol.bind(null,e)):n=no(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,e))}}(t),Al.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function Al(e){if(gl=-1,yl=vl=0,0!=(48&Ha))throw Error(y(327));var t=e.callbackNode;if(Ul()&&e.callbackNode!==t)return null;var n=Gt(e,e===Wa?Ua:0);if(0===n)return null;var r=n,i=Ha;Ha|=16;var o=Bl();for(Wa===e&&Ua===r||(nl(),Pl(e,r));;)try{zl();break}catch(t){Nl(e,t)}if(ho(),Fa.current=o,Ha=i,null!==ja?r=0:(Wa=null,Ua=0,r=$a),0!=(Ja&Ya))Pl(e,0);else if(0!==r){if(2===r&&(Ha|=64,e.hydrate&&(e.hydrate=!1,ni(e.containerInfo)),0!==(n=Yt(e))&&(r=Il(e,n))),1===r)throw t=Qa,Pl(e,0),El(e,n),Ml(e,Xi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(y(345));case 2:case 5:Hl(e);break;case 3:if(El(e,n),(62914560&n)===n&&10<(r=el+500-Xi())){if(0!==Gt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){kl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(Hl.bind(null,e),r);break}Hl(e);break;case 4:if(El(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-nn(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Xi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*za(n/1960))-n)){e.timeoutHandle=ei(Hl.bind(null,e),n);break}Hl(e);break;default:throw Error(y(329))}}return Ml(e,Xi()),e.callbackNode===t?Al.bind(null,e):null}function El(e,t){for(t&=~Xa,t&=~Ya,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-nn(t),r=1<<n;e[n]=-1,t&=~r}}function Ol(e){if(0!=(48&Ha))throw Error(y(327));if(Ul(),e===Wa&&0!=(e.expiredLanes&Ua)){var t=Ua,n=Il(e,t);0!=(Ja&Ya)&&(n=Il(e,t=Gt(e,t)))}else n=Il(e,t=Gt(e,0));if(0!==e.tag&&2===n&&(Ha|=64,e.hydrate&&(e.hydrate=!1,ni(e.containerInfo)),0!==(t=Yt(e))&&(n=Il(e,t))),1===n)throw n=Qa,Pl(e,0),El(e,t),Ml(e,Xi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hl(e),Ml(e,Xi()),null}function Ll(e,t){var n=Ha;Ha|=1;try{return e(t)}finally{0===(Ha=n)&&(nl(),ro())}}function Tl(e,t){var n=Ha;Ha&=-2,Ha|=8;try{return e(t)}finally{0===(Ha=n)&&(nl(),ro())}}function Rl(e,t){bi(qa,Ka),Ka|=t,Ja|=t}function Dl(){Ka=qa.current,wi(qa)}function Pl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ja)for(n=ja.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ei();break;case 3:Uo(),wi(Si),wi(xi),os();break;case 5:qo(r);break;case 4:Uo();break;case 13:case 19:wi($o);break;case 10:fo(r);break;case 23:case 24:Dl()}n=n.return}Wa=e,ja=tc(e.current,null),Ua=Ka=Ja=t,$a=0,Qa=null,Xa=Ya=Ga=0}function Nl(e,t){for(;;){var n=ja;try{if(ho(),ss.current=Hs,fs){for(var r=cs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}fs=!1}if(ls=0,hs=us=cs=null,ds=!1,Va.current=null,null===n||null===n.return){$a=1,Qa=t,ja=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Ua,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&$o.current),f=s;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var m=f.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(d){var g=f.updateQueue;if(null===g){var v=new Set;v.add(c),f.updateQueue=v}else g.add(c);if(0==(2&f.mode)){if(f.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=bo(-1,1);y.tag=2,ko(a,y)}a.lanes|=1;break e}l=void 0,a=t;var w=o.pingCache;if(null===w?(w=o.pingCache=new ba,l=new Set,w.set(c,l)):void 0===(l=w.get(c))&&(l=new Set,w.set(c,l)),!l.has(a)){l.add(a);var b=Gl.bind(null,o,c,a);c.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);l=Error((oe(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==$a&&($a=2),l=ya(l,a),f=s;do{switch(f.tag){case 3:o=l,f.flags|=4096,t&=-t,f.lanes|=t,xo(f,ka(0,o,t));break e;case 1:o=l;var k=f.type,x=f.stateNode;if(0==(64&f.flags)&&("function"==typeof k.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===al||!al.has(x)))){f.flags|=4096,t&=-t,f.lanes|=t,xo(f,xa(f,o,t));break e}}f=f.return}while(null!==f)}Vl(n)}catch(e){t=e,ja===n&&null!==n&&(ja=n=n.return);continue}break}}function Bl(){var e=Fa.current;return Fa.current=Hs,null===e?Hs:e}function Il(e,t){var n=Ha;Ha|=16;var r=Bl();for(Wa===e&&Ua===t||Pl(e,t);;)try{_l();break}catch(t){Nl(e,t)}if(ho(),Ha=n,Fa.current=r,null!==ja)throw Error(y(261));return Wa=null,Ua=0,$a}function _l(){for(;null!==ja;)Fl(ja)}function zl(){for(;null!==ja&&!_i();)Fl(ja)}function Fl(e){var t=rl(e.alternate,e,Ka);e.memoizedProps=e.pendingProps,null===t?Vl(e):ja=t,Va.current=null}function Vl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ga(n,t,Ka)))return void(ja=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Ka)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=va(t)))return n.flags&=2047,void(ja=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(ja=t);ja=t=e}while(null!==t);0===$a&&($a=5)}function Hl(e){var t=Zi();return to(99,Wl.bind(null,e,t)),null}function Wl(e,t){do{Ul()}while(null!==cl);if(0!=(48&Ha))throw Error(y(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(y(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,a=e.expirationTimes;0<o;){var l=31-nn(o),c=1<<l;i[l]=0,s[l]=-1,a[l]=-1,o&=~c}if(null!==dl&&0==(24&r)&&dl.has(e)&&dl.delete(e),e===Wa&&(ja=Wa=null,Ua=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ha,Ha|=32,Va.current=null,Gr=ln,Ar(s=Mr())){if("selectionStart"in s)a={start:s.selectionStart,end:s.selectionEnd};else e:if(a=(a=s.ownerDocument)&&a.defaultView||window,(c=a.getSelection&&a.getSelection())&&0!==c.rangeCount){a=c.anchorNode,o=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{a.nodeType,l.nodeType}catch(e){a=null;break e}var u=0,h=-1,f=-1,d=0,p=0,m=s,g=null;t:for(;;){for(var v;m!==a||0!==o&&3!==m.nodeType||(h=u+o),m!==l||0!==c&&3!==m.nodeType||(f=u+c),3===m.nodeType&&(u+=m.nodeValue.length),null!==(v=m.firstChild);)g=m,m=v;for(;;){if(m===s)break t;if(g===a&&++d===o&&(h=u),g===l&&++p===c&&(f=u),null!==(v=m.nextSibling))break;g=(m=g).parentNode}m=v}a=-1===h||-1===f?null:{start:h,end:f}}else a=null;a=a||{start:0,end:0}}else a=null;Yr={focusedElem:s,selectionRange:a},ln=!1,wl=null,bl=!1,il=r;do{try{jl()}catch(e){if(null===il)throw Error(y(330));Jl(il,e),il=il.nextEffect}}while(null!==il);wl=null,il=r;do{try{for(s=e;null!==il;){var w=il.flags;if(16&w&&Te(il.stateNode,""),128&w){var b=il.alternate;if(null!==b){var k=b.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&w){case 2:Ra(il),il.flags&=-3;break;case 6:Ra(il),il.flags&=-3,Ba(il.alternate,il);break;case 1024:il.flags&=-1025;break;case 1028:il.flags&=-1025,Ba(il.alternate,il);break;case 4:Ba(il.alternate,il);break;case 8:Na(s,a=il);var x=a.alternate;La(a),null!==x&&La(x)}il=il.nextEffect}}catch(e){if(null===il)throw Error(y(330));Jl(il,e),il=il.nextEffect}}while(null!==il);if(k=Yr,b=Mr(),w=k.focusedElem,s=k.selectionRange,b!==w&&w&&w.ownerDocument&&Cr(w.ownerDocument.documentElement,w)){null!==s&&Ar(w)&&(b=s.start,void 0===(k=s.end)&&(k=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(k,w.value.length)):(k=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(k=k.getSelection(),a=w.textContent.length,x=Math.min(s.start,a),s=void 0===s.end?x:Math.min(s.end,a),!k.extend&&x>s&&(a=s,s=x,x=a),a=Sr(w,x),o=Sr(w,s),a&&o&&(1!==k.rangeCount||k.anchorNode!==a.node||k.anchorOffset!==a.offset||k.focusNode!==o.node||k.focusOffset!==o.offset)&&((b=b.createRange()).setStart(a.node,a.offset),k.removeAllRanges(),x>s?(k.addRange(b),k.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),k.addRange(b))))),b=[];for(k=w;k=k.parentNode;)1===k.nodeType&&b.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<b.length;w++)(k=b[w]).element.scrollLeft=k.left,k.element.scrollTop=k.top}ln=!!Gr,Yr=Gr=null,e.current=n,il=r;do{try{for(w=e;null!==il;){var S=il.flags;if(36&S&&Aa(w,il.alternate,il),128&S){b=void 0;var C=il.ref;if(null!==C){var M=il.stateNode;il.tag,b=M,"function"==typeof C?C(b):C.current=b}}il=il.nextEffect}}catch(e){if(null===il)throw Error(y(330));Jl(il,e),il=il.nextEffect}}while(null!==il);il=null,$i(),Ha=i}else e.current=n;if(ll)ll=!1,cl=e,ul=t;else for(il=r;null!==il;)t=il.nextEffect,il.nextEffect=null,8&il.flags&&((S=il).sibling=null,S.stateNode=null),il=t;if(0===(r=e.pendingLanes)&&(al=null),1===r?e===ml?pl++:(pl=0,ml=e):pl=0,n=n.stateNode,Pi&&"function"==typeof Pi.onCommitFiberRoot)try{Pi.onCommitFiberRoot(Di,n,void 0,64==(64&n.current.flags))}catch(e){}if(Ml(e,Xi()),ol)throw ol=!1,e=sl,sl=null,e;return 0!=(8&Ha)||ro(),null}function jl(){for(;null!==il;){var e=il.alternate;bl||null===wl||(0!=(8&il.flags)?ft(il,wl)&&(bl=!0):13===il.tag&&_a(e,il)&&ft(il,wl)&&(bl=!0));var t=il.flags;0!=(256&t)&&Ma(e,il),0==(512&t)||ll||(ll=!0,no(97,(function(){return Ul(),null}))),il=il.nextEffect}}function Ul(){if(90!==ul){var e=97<ul?97:ul;return ul=90,to(e,$l)}return!1}function Kl(e,t){hl.push(t,e),ll||(ll=!0,no(97,(function(){return Ul(),null})))}function ql(e,t){fl.push(t,e),ll||(ll=!0,no(97,(function(){return Ul(),null})))}function $l(){if(null===cl)return!1;var e=cl;if(cl=null,0!=(48&Ha))throw Error(y(331));var t=Ha;Ha|=32;var n=fl;fl=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===o)throw Error(y(330));Jl(o,e)}}for(n=hl,hl=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var a=i.create;i.destroy=a()}catch(e){if(null===o)throw Error(y(330));Jl(o,e)}}for(a=e.current.firstEffect;null!==a;)e=a.nextEffect,a.nextEffect=null,8&a.flags&&(a.sibling=null,a.stateNode=null),a=e;return Ha=t,ro(),!0}function Ql(e,t,n){ko(e,t=ka(0,t=ya(n,t),1)),t=kl(),null!==(e=Cl(e,1))&&(tn(e,1,t),Ml(e,t))}function Jl(e,t){if(3===e.tag)Ql(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ql(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===al||!al.has(r))){var i=xa(n,e=ya(t,e),1);if(ko(n,i),i=kl(),null!==(n=Cl(n,1)))tn(n,1,i),Ml(n,i);else if("function"==typeof r.componentDidCatch&&(null===al||!al.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Gl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=kl(),e.pingedLanes|=e.suspendedLanes&n,Wa===e&&(Ua&n)===n&&(4===$a||3===$a&&(62914560&Ua)===Ua&&500>Xi()-el?Pl(e,0):Xa|=n),Ml(e,t)}function Yl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Zi()?1:2:(0===vl&&(vl=Ja),0===(t=Zt(62914560&~vl))&&(t=4194304))),n=kl(),null!==(e=Cl(e,t))&&(tn(e,t,n),Ml(e,n))}function Xl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Zl(e,t,n,r){return new Xl(e,t,n,r)}function ec(e){return!(!(e=e.prototype)||!e.isReactComponent)}function tc(e,t){var n=e.alternate;return null===n?((n=Zl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function nc(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)ec(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case I:return rc(n.children,i,o,t);case Q:s=8,i|=16;break;case _:s=8,i|=1;break;case z:return(e=Zl(12,n,t,8|i)).elementType=z,e.type=z,e.lanes=o,e;case W:return(e=Zl(13,n,t,i)).type=W,e.elementType=W,e.lanes=o,e;case j:return(e=Zl(19,n,t,i)).elementType=j,e.lanes=o,e;case J:return ic(n,i,o,t);case G:return(e=Zl(24,n,t,i)).elementType=G,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case F:s=10;break e;case V:s=9;break e;case H:s=11;break e;case U:s=14;break e;case K:s=16,r=null;break e;case q:s=22;break e}throw Error(y(130,null==e?e:typeof e,""))}return(t=Zl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function rc(e,t,n,r){return(e=Zl(7,e,r,t)).lanes=n,e}function ic(e,t,n,r){return(e=Zl(23,e,r,t)).elementType=J,e.lanes=n,e}function oc(e,t,n){return(e=Zl(6,e,null,t)).lanes=n,e}function sc(e,t,n){return(t=Zl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ac(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=en(0),this.expirationTimes=en(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=en(0),this.mutableSourceEagerHydrationData=null}function lc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:B,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function cc(e,t,n,r){var i=t.current,o=kl(),s=xl(i);e:if(n){t:{if(lt(n=n._reactInternals)!==n||1!==n.tag)throw Error(y(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Ai(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(null!==a);throw Error(y(171))}if(1===n.tag){var l=n.type;if(Ai(l)){n=Li(n,l,a);break e}}n=a}else n=ki;return null===t.context?t.context=n:t.pendingContext=n,(t=bo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ko(i,t),Sl(i,s,o),s}function uc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function fc(e,t){hc(e,t),(e=e.alternate)&&hc(e,t)}function dc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new ac(e,t,null!=n&&!0===n.hydrate),t=Zl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,yo(t),e[ci]=n.current,Hr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function pc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function mc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=uc(s);a.call(e)}}cc(t,s,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new dc(e,0,t?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=uc(s);l.call(e)}}Tl((function(){cc(t,s,e,i)}))}return uc(s)}function gc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!pc(t))throw Error(y(200));return lc(e,t,null,n)}rl=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||Si.current)qs=!0;else{if(0==(n&r)){switch(qs=!1,t.tag){case 3:na(t),rs();break;case 5:Ko(t);break;case 1:Ai(t.type)&&Ti(t);break;case 4:jo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;bi(ao,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?aa(e,t,n):(bi($o,1&$o.current),null!==(t=pa(e,t,n))?t.sibling:null);bi($o,1&$o.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return da(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),bi($o,$o.current),r)break;return null;case 23:case 24:return t.lanes=0,Ys(e,t,n)}return pa(e,t,n)}qs=0!=(16384&e.flags)}else qs=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Mi(t,xi.current),mo(t,n),i=gs(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)){var o=!0;Ti(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,yo(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&Ao(t,r,s,e),i.updater=Eo,t.stateNode=i,i._reactInternals=t,Ro(t,r,e,n),t=ta(null,t,r,!0,o,n)}else t.tag=0,$s(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return ec(e)?1:0;if(null!=e){if((e=e.$$typeof)===H)return 11;if(e===U)return 14}return 2}(i),e=so(i,e),o){case 0:t=Zs(null,t,i,e,n);break e;case 1:t=ea(null,t,i,e,n);break e;case 11:t=Qs(null,t,i,e,n);break e;case 14:t=Js(null,t,i,so(i.type,e),r,n);break e}throw Error(y(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Zs(e,t,r,i=t.elementType===r?i:so(r,i),n);case 1:return r=t.type,i=t.pendingProps,ea(e,t,r,i=t.elementType===r?i:so(r,i),n);case 3:if(na(t),r=t.updateQueue,null===e||null===r)throw Error(y(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,wo(e,t),So(t,r,null,n),(r=t.memoizedState.element)===i)rs(),t=pa(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Go=ri(t.stateNode.containerInfo.firstChild),Jo=t,o=Yo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],is.push(o);for(n=_o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else $s(e,t,r,n),rs();t=t.child}return t;case 5:return Ko(t),null===e&&es(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Zr(r,i)?s=null:null!==o&&Zr(r,o)&&(t.flags|=16),Xs(e,t),$s(e,t,s,n),t.child;case 6:return null===e&&es(t),null;case 13:return aa(e,t,n);case 4:return jo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Io(t,null,r,n):$s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Qs(e,t,r,i=t.elementType===r?i:so(r,i),n);case 7:return $s(e,t,t.pendingProps,n),t.child;case 8:case 12:return $s(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var a=t.type._context;if(bi(ao,a._currentValue),a._currentValue=o,null!==s)if(a=s.value,0===(o=wr(a,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(a,o):1073741823))){if(s.children===i.children&&!Si.current){t=pa(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===a.tag&&((c=bo(-1,n&-n)).tag=2,ko(a,c)),a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),po(a.return,n),l.lanes|=n;break}c=c.next}}else s=10===a.tag&&a.type===t.type?null:a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}$s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,mo(t,n),r=r(i=go(i,o.unstable_observedBits)),t.flags|=1,$s(e,t,r,n),t.child;case 14:return o=so(i=t.type,t.pendingProps),Js(e,t,i,o=so(i.type,o),r,n);case 15:return Gs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:so(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ai(r)?(e=!0,Ti(t)):e=!1,mo(t,n),Lo(t,r,i),Ro(t,r,i,n),ta(null,t,r,!0,e,n);case 19:return da(e,t,n);case 23:case 24:return Ys(e,t,n)}throw Error(y(156,t.tag))},dc.prototype.render=function(e){cc(e,this._internalRoot,null,null)},dc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;cc(null,e,null,(function(){t[ci]=null}))},dt=function(e){13===e.tag&&(Sl(e,4,kl()),fc(e,4))},pt=function(e){13===e.tag&&(Sl(e,67108864,kl()),fc(e,67108864))},mt=function(e){if(13===e.tag){var t=kl(),n=xl(e);Sl(e,n,t),fc(e,n)}},gt=function(e,t){return t()},Fe=function(e,t,n){switch(t){case"input":if(pe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=pi(r);if(!i)throw Error(y(90));ce(r),pe(r,i)}}}break;case"textarea":ke(e,n);break;case"select":null!=(t=n.value)&&ye(e,!!n.multiple,t,!1)}},Ke=Ll,qe=function(e,t,n,r,i){var o=Ha;Ha|=4;try{return to(98,e.bind(null,t,n,r,i))}finally{0===(Ha=o)&&(nl(),ro())}},$e=function(){0==(49&Ha)&&(function(){if(null!==dl){var e=dl;dl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Ml(e,Xi())}))}ro()}(),Ul())},Qe=function(e,t){var n=Ha;Ha|=2;try{return e(t)}finally{0===(Ha=n)&&(nl(),ro())}};var vc={Events:[fi,di,pi,je,Ue,Ul,{current:!1}]},yc={findFiberByHostInstance:hi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},wc={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ht(e))?null:e.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{Di=bc.inject(wc),Pi=bc}catch(Oe){}}r=vc,o=gc,s=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(y(188));throw Error(y(268,Object.keys(e)))}return e=null===(e=ht(t))?null:e.stateNode},a=function(e,t){var n=Ha;if(0!=(48&n))return e(t);Ha|=1;try{if(e)return to(99,e.bind(null,t))}finally{Ha=n,ro()}},l=function(e,t,n){if(!pc(t))throw Error(y(200));return mc(null,e,t,!0,n)},c=function(e,t,n){if(!pc(t))throw Error(y(200));return mc(null,e,t,!1,n)},u=function(e){if(!pc(e))throw Error(y(40));return!!e._reactRootContainer&&(Tl((function(){mc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ci]=null}))})),!0)},h=Ll,f=function(e,t){return gc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},d=function(e,t,n,r){if(!pc(n))throw Error(y(200));if(null==e||void 0===e._reactInternals)throw Error(y(38));return mc(e,t,n,!1,r)},p="17.0.2"})),i.register("cvIIE",(function(e,t){e.exports=i("6L4WS")})),i.register("6L4WS",(function(t,n){var r,i,o,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,k,x,S,C,M;if(e(t.exports,"unstable_now",(()=>r),(e=>r=e)),e(t.exports,"unstable_shouldYield",(()=>i),(e=>i=e)),e(t.exports,"unstable_forceFrameRate",(()=>o),(e=>o=e)),e(t.exports,"unstable_IdlePriority",(()=>s),(e=>s=e)),e(t.exports,"unstable_ImmediatePriority",(()=>a),(e=>a=e)),e(t.exports,"unstable_LowPriority",(()=>l),(e=>l=e)),e(t.exports,"unstable_NormalPriority",(()=>c),(e=>c=e)),e(t.exports,"unstable_Profiling",(()=>u),(e=>u=e)),e(t.exports,"unstable_UserBlockingPriority",(()=>h),(e=>h=e)),e(t.exports,"unstable_cancelCallback",(()=>f),(e=>f=e)),e(t.exports,"unstable_continueExecution",(()=>d),(e=>d=e)),e(t.exports,"unstable_getCurrentPriorityLevel",(()=>p),(e=>p=e)),e(t.exports,"unstable_getFirstCallbackNode",(()=>m),(e=>m=e)),e(t.exports,"unstable_next",(()=>g),(e=>g=e)),e(t.exports,"unstable_pauseExecution",(()=>v),(e=>v=e)),e(t.exports,"unstable_requestPaint",(()=>y),(e=>y=e)),e(t.exports,"unstable_runWithPriority",(()=>w),(e=>w=e)),e(t.exports,"unstable_scheduleCallback",(()=>b),(e=>b=e)),e(t.exports,"unstable_wrapCallback",(()=>k),(e=>k=e)),"object"==typeof performance&&"function"==typeof performance.now){var A=performance;r=function(){return A.now()}}else{var E=Date,O=E.now();r=function(){return E.now()-O}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var L=null,T=null,R=function(){if(null!==L)try{var e=r();L(!0,e),L=null}catch(e){throw setTimeout(R,0),e}};x=function(e){null!==L?setTimeout(x,0,e):(L=e,setTimeout(R,0))},S=function(e,t){T=setTimeout(e,t)},C=function(){clearTimeout(T)},i=function(){return!1},M=o=function(){}}else{var D=window.setTimeout,P=window.clearTimeout;if("undefined"!=typeof console){var N=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof N&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var B=!1,I=null,_=-1,z=5,F=0;i=function(){return r()>=F},M=function(){},o=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<e?Math.floor(1e3/e):5};var V=new MessageChannel,H=V.port2;V.port1.onmessage=function(){if(null!==I){var e=r();F=e+z;try{I(!0,e)?H.postMessage(null):(B=!1,I=null)}catch(e){throw H.postMessage(null),e}}else B=!1},x=function(e){I=e,B||(B=!0,H.postMessage(null))},S=function(e,t){_=D((function(){e(r())}),t)},C=function(){P(_),_=-1}}function W(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<K(i,t)))break e;e[r]=t,e[n]=i,n=r}}function j(e){return void 0===(e=e[0])?null:e}function U(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,l=e[a];if(void 0!==s&&0>K(s,n))void 0!==l&&0>K(l,s)?(e[r]=l,e[a]=n,r=a):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==l&&0>K(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function K(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var q=[],$=[],Q=1,J=null,G=3,Y=!1,X=!1,Z=!1;function ee(e){for(var t=j($);null!==t;){if(null===t.callback)U($);else{if(!(t.startTime<=e))break;U($),t.sortIndex=t.expirationTime,W(q,t)}t=j($)}}function te(e){if(Z=!1,ee(e),!X)if(null!==j(q))X=!0,x(ne);else{var t=j($);null!==t&&S(te,t.startTime-e)}}function ne(e,t){X=!1,Z&&(Z=!1,C()),Y=!0;var n=G;try{for(ee(t),J=j(q);null!==J&&(!(J.expirationTime>t)||e&&!i());){var o=J.callback;if("function"==typeof o){J.callback=null,G=J.priorityLevel;var s=o(J.expirationTime<=t);t=r(),"function"==typeof s?J.callback=s:J===j(q)&&U(q),ee(t)}else U(q);J=j(q)}if(null!==J)var a=!0;else{var l=j($);null!==l&&S(te,l.startTime-t),a=!1}return a}finally{J=null,G=n,Y=!1}}s=5,a=1,l=4,c=3,u=null,h=2,f=function(e){e.callback=null},d=function(){X||Y||(X=!0,x(ne))},p=function(){return G},m=function(){return j(q)},g=function(e){switch(G){case 1:case 2:case 3:var t=3;break;default:t=G}var n=G;G=t;try{return e()}finally{G=n}},v=function(){},y=M,w=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=G;G=e;try{return t()}finally{G=n}},b=function(e,t,n){var i=r();switch("object"==typeof n&&null!==n?n="number"==typeof(n=n.delay)&&0<n?i+n:i:n=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:Q++,callback:t,priorityLevel:e,startTime:n,expirationTime:o=n+o,sortIndex:-1},n>i?(e.sortIndex=n,W($,e),null===j(q)&&e===j($)&&(Z?C():Z=!0,S(te,n-i))):(e.sortIndex=o,W(q,e),X||Y||(X=!0,x(ne))),e},k=function(e){var t=G;return function(){var n=G;G=t;try{return e.apply(this,arguments)}finally{G=n}}}}));var o;o=i("9nuB3"),i("lydNP");var s={};!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),s=i("afazG");var a,l=i("lydNP");function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));function u(e){e.preventDefault(),e.returnValue=""}function h(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function f(){return Math.random().toString(36).substr(2,8)}function d(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,s=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),s&&"#"!==s&&(n+="#"===s.charAt(0)?s:"#"+s),n}function p(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}l=i("lydNP");function m(e,t){if(!e)throw new Error(t)}const g=l.createContext(null),v=l.createContext(null),y=l.createContext({outlet:null,matches:[]});function w(e){m(!1)}function b(e){let{basename:t="/",children:n=null,location:r,navigationType:i=a.Pop,navigator:o,static:s=!1}=e;x()&&m(!1);let c=I(t),u=l.useMemo((()=>({basename:c,navigator:o,static:s})),[c,o,s]);"string"==typeof r&&(r=p(r));let{pathname:h="/",search:f="",hash:d="",state:y=null,key:w="default"}=r,b=l.useMemo((()=>{let e=N(h,c);return null==e?null:{pathname:e,search:f,hash:d,state:y,key:w}}),[c,h,f,d,y,w]);return null==b?null:l.createElement(g.Provider,{value:u},l.createElement(v.Provider,{children:n,value:{location:b,navigationType:i}}))}function k(e){let{children:t,location:n}=e;return function(e,t){!x()&&m(!1);let n,{matches:r}=l.useContext(y),i=r[r.length-1],o=i?i.params:{},s=(i&&i.pathname,i?i.pathnameBase:"/"),a=(i&&i.route,S());if(t){var c;let e="string"==typeof t?p(t):t;"/"!==s&&!(null==(c=e.pathname)?void 0:c.startsWith(s))&&m(!1),n=e}else n=a;let u=n.pathname||"/",h="/"===s?u:u.slice(s.length)||"/",f=function(e,t,n){void 0===n&&(n="/");let r=N(("string"==typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let i=A(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let e=0;null==o&&e<i.length;++e)o=T(i[e],r);return o}(e,{pathname:h});return R(f&&f.map((e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:B([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:B([s,e.pathnameBase])}))),r)}(M(t),n)}function x(){return null!=l.useContext(v)}function S(){return!x()&&m(!1),l.useContext(v).location}function C(){!x()&&m(!1);let{basename:e,navigator:t}=l.useContext(g),{matches:n}=l.useContext(y),{pathname:r}=S(),i=JSON.stringify(n.map((e=>e.pathnameBase))),o=l.useRef(!1);return l.useEffect((()=>{o.current=!0})),l.useCallback((function(n,s){if(void 0===s&&(s={}),!o.current)return;if("number"==typeof n)return void t.go(n);let a=P(n,JSON.parse(i),r);"/"!==e&&(a.pathname=B([e,a.pathname])),(s.replace?t.replace:t.push)(a,s.state)}),[e,t,i,r])}function M(e){let t=[];return l.Children.forEach(e,(e=>{if(!l.isValidElement(e))return;if(e.type===l.Fragment)return void t.push.apply(t,M(e.props.children));e.type!==w&&m(!1);let n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=M(e.props.children)),t.push(n)})),t}function A(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach(((e,i)=>{let o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(!o.relativePath.startsWith(r)&&m(!1),o.relativePath=o.relativePath.slice(r.length));let s=B([r,o.relativePath]),a=n.concat(o);e.children&&e.children.length>0&&(!0===e.index&&m(!1),A(e.children,t,a,s)),(null!=e.path||e.index)&&t.push({path:s,score:L(s,e.index),routesMeta:a})})),t}const E=/^:\w+$/,O=e=>"*"===e;function L(e,t){let n=e.split("/"),r=n.length;return n.some(O)&&(r+=-2),t&&(r+=2),n.filter((e=>!O(e))).reduce(((e,t)=>e+(E.test(t)?3:""===t?1:10)),r)}function T(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let e=0;e<n.length;++e){let s=n[e],a=e===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=D({path:s.relativePath,caseSensitive:s.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=s.route;o.push({params:r,pathname:B([i,c.pathname]),pathnameBase:I(B([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=B([i,c.pathnameBase]))}return o}function R(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight(((n,r,i)=>l.createElement(y.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,i+1))}})),null)}function D(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((e,t)=>(r.push(t),"([^\\/]+)")));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{if("*"===t){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(t){return e}}(a[n]||""),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function P(e,t,n){let r,i="string"==typeof e?p(e):e,o=""===e||""===i.pathname?"/":i.pathname;if(null==o)r=n;else{let e=t.length-1;if(o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}r=e>=0?t[e]:"/"}let s=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?p(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:_(r),hash:z(i)}}(i,r);return o&&"/"!==o&&o.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}const B=e=>e.join("/").replace(/\/\/+/g,"/"),I=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function F(e){let{basename:t,children:n,window:r}=e,i=l.useRef();null==i.current&&(i.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,o=e.hash,s=r.state||{};return[s.idx,{pathname:t,search:i,hash:o,state:s.usr||null,key:s.key||"default"}]}var o=null;n.addEventListener("popstate",(function(){if(o)y.call(o),o=null;else{var e=a.Pop,t=i(),n=t[0],r=t[1];if(y.length){if(null!=n){var s=m-n;s&&(o={action:e,location:r,retry:function(){C(-1*s)}},C(s))}}else S(e)}}));var s=a.Pop,l=i(),m=l[0],g=l[1],v=h(),y=h();function w(e){return"string"==typeof e?e:d(e)}function b(e,t){return void 0===t&&(t=null),c({pathname:g.pathname,hash:"",search:""},"string"==typeof e?p(e):e,{state:t,key:f()})}function k(e,t){return[{usr:e.state,key:e.key,idx:t},w(e)]}function x(e,t,n){return!y.length||(y.call({action:e,location:t,retry:n}),!1)}function S(e){s=e;var t=i();m=t[0],g=t[1],v.call({action:s,location:g})}function C(e){r.go(e)}null==m&&(m=0,r.replaceState(c({},r.state,{idx:m}),""));var M={get action(){return s},get location(){return g},createHref:w,push:function e(t,i){var o=a.Push,s=b(t,i);if(x(o,s,(function(){e(t,i)}))){var l=k(s,m+1),c=l[0],u=l[1];try{r.pushState(c,"",u)}catch(e){n.location.assign(u)}S(o)}},replace:function e(t,n){var i=a.Replace,o=b(t,n);if(x(i,o,(function(){e(t,n)}))){var s=k(o,m),l=s[0],c=s[1];r.replaceState(l,"",c),S(i)}},go:C,back:function(){C(-1)},forward:function(){C(1)},listen:function(e){return v.push(e)},block:function(e){var t=y.push(e);return 1===y.length&&n.addEventListener("beforeunload",u),function(){t(),y.length||n.removeEventListener("beforeunload",u)}}};return M}({window:r}));let o=i.current,[s,m]=l.useState({action:o.action,location:o.location});return l.useLayoutEffect((()=>o.listen(m)),[o]),l.createElement(b,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:o})}l=i("lydNP");function V(){return o.jsx(o.Fragment,{children:o.jsx("h2",{children:"Navbar"})})}l=i("lydNP");let H="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<H.length;e++)H[e]+=H[e-1];function W(e){for(let t=1;t<H.length;t+=2)if(H[t]>e)return H[t-1]<=e;return!1}function j(e){return e>=127462&&e<=127487}function U(e,t,n=!0,r=!0){return(n?K:q)(e,t,r)}function K(e,t,n){if(t==e.length)return t;t&&$(e.charCodeAt(t))&&Q(e.charCodeAt(t-1))&&t--;let r=J(e,t);for(t+=Y(r);t<e.length;){let i=J(e,t);if(8205==r||8205==i||n&&W(i))t+=Y(i),r=i;else{if(!j(i))break;{let n=0,r=t-2;for(;r>=0&&j(J(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function q(e,t,n){for(;t>0;){let r=K(e,t-2,n);if(r<t)return r;t--}return 0}function $(e){return e>=56320&&e<57344}function Q(e){return e>=55296&&e<56320}function J(e,t){let n=e.charCodeAt(t);if(!Q(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return $(r)?r-56320+(n-55296<<10)+65536:n}function G(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Y(e){return e<65536?1:2}function X(e,t,n=e.length){let r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=U(e,i));return r}class Z{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),te.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),te.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new ie(this),i=new ie(e);for(let e=t,o=t;;){if(r.next(e),i.next(e),e=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(e=1){return new ie(this,e)}iterRange(e,t=this.length){return new oe(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new se(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new ee(e):te.from(ee.split(e,[])):Z.empty}}class ee extends Z{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new ae(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new ee(re(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=ne(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new ee(t,e.length+i.length));else{let e=t.length>>1;n.push(new ee(t.slice(0,e)),new ee(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof ee))return super.replace(e,t,n);let r=ne(this.text,ne(n.text,re(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new ee(r,i):te.from(ee.split(r,[]),i)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new ee(n,r)),n=[],r=-1);return r>-1&&t.push(new ee(n,r)),t}}class te extends Z{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new te(i,this.length-(t-e)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof te))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new ee(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof te)for(let t of e.children)u(t);else e.lines>o&&(a>o||!a)?(h(),s.push(e)):e instanceof ee&&a&&(t=c[c.length-1])instanceof ee&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new ee(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(s.push(1==c.length?c[0]:te.from(c,l)),l=-1,a=c.length=0)}for(let t of e)u(t);return h(),1==s.length?s[0]:new te(s,t)}}function ne(e,t,n=0,r=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function re(e,t,n){return ne(e,[""],t,n)}Z.empty=new ee([""],0);class ie{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ee?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof ee?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof ee){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof ee?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class oe{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new ie(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class se{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Z.prototype[Symbol.iterator]=function(){return this.iter()},ie.prototype[Symbol.iterator]=oe.prototype[Symbol.iterator]=se.prototype[Symbol.iterator]=function(){return this});class ae{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}const le=/\r\n?|\n/;var ce=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(ce||(ce={}));class ue{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){pe(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new ue(e)}composeDesc(e){return this.empty?e:e.empty?this:ge(this,e)}mapDesc(e,t=!1){return e.empty?this:me(this,e,t)}mapPos(e,t=-1,n=ce.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=ce.Simple&&l>=e&&(n==ce.TrackDel&&r<e&&l>e||n==ce.TrackBefore&&r<e||n==ce.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ue(e)}}class he extends ue{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return pe(this,((t,n,r,i,o)=>e=e.replace(r,r+(n-t),o)),!1),e}mapDesc(e,t=!1){return me(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(Z.empty);n.push(o?e.slice(i,i+o):Z.empty)}i+=o}return new he(t,n)}compose(e){return this.empty?e:e.empty?this:ge(this,e,!0)}map(e,t=!1){return e.empty?this:me(this,e,t,!0)}iterChanges(e,t=!1){pe(this,e,t)}get desc(){return new ue(this.sections)}filter(e){let t=[],n=[],r=[],i=new ve(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);fe(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;fe(t,e,o),o>0&&de(n,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);fe(t,e,-1),fe(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new he(t,n),filtered:new ue(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function a(e=!1){if(!e&&!r.length)return;o<t&&fe(r,t-o,-1);let n=new he(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof he){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let u=c?"string"==typeof c?Z.of(c.split(n||le)):c:Z.empty,h=u.length;if(e==s&&0==h)return;e<o&&a(),e>o&&fe(r,e-o,-1),fe(r,s-e,h),de(i,r,u),o=s}}(e),a(!s),s}static empty(e){return new he(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(Z.empty);n[r]=Z.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new he(t,n)}}function fe(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function de(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(Z.empty);e.push(n)}}function pe(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=Z.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(i,c,o,u,h),i=c,o=u}}}function me(e,t,n,r=!1){let i=[],o=r?[]:null,s=new ve(e),a=new ve(t);for(let e=0,t=0;;)if(-1==s.ins)e+=s.len,s.next();else if(-1==a.ins&&t<e){let n=Math.min(a.len,e-t);a.forward(n),fe(i,n,-1),t+=n}else if(a.ins>=0&&(s.done||t<e||t==e&&(a.len<s.len||a.len==s.len&&!n))){for(fe(i,a.ins,-1);e>t&&!s.done&&e+s.len<t+a.len;)e+=s.len,s.next();t+=a.len,a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?new he(i,o):new ue(i);throw new Error("Mismatched change set lengths")}{let n=0,r=e+s.len;for(;;)if(a.ins>=0&&t>e&&t+a.len<r)n+=a.ins,t+=a.len,a.next();else{if(!(-1==a.ins&&t<r))break;{let e=Math.min(a.len,r-t);n+=e,a.forward(e),t+=e}}fe(i,n,s.ins),o&&de(o,i,s.text),e=r,s.next()}}}function ge(e,t,n=!1){let r=[],i=n?[]:null,o=new ve(e),s=new ve(t);for(let e=!1;;){if(o.done&&s.done)return i?new he(r,i):new ue(r);if(0==o.ins)fe(r,o.len,0,e),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(o.len2,s.len),n=r.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;fe(r,t,n,e),i&&n&&de(i,r,s.text)}else-1==s.ins?(fe(r,o.off?0:o.len,t,e),i&&de(i,r,o.textBit(t))):(fe(r,o.off?0:o.len,s.off?0:s.ins,e),i&&!s.off&&de(i,r,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>n),o.forward2(t),s.forward(t)}}else fe(r,0,s.ins,e),i&&de(i,r,s.text),s.next()}}class ve{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Z.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Z.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ye{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new ye(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return we.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return we.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return we.range(e.anchor,e.head)}}class we{constructor(e,t=0){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:we.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new we([this.main])}addRange(e,t=!0){return we.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,we.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new we(e.ranges.map((e=>ye.fromJSON(e))),e.main)}static single(e,t=e){return new we([we.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return be(e.slice(),t);n=i.to}return new we(e,t)}static cursor(e,t=0,n,r){return new ye(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(e,t,n){let r=(null!=n?n:33554431)<<5;return t<e?new ye(t,e,24|r):new ye(e,t,r|(t>e?4:0))}}function be(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?we.range(s,o):we.range(o,s))}}return new we(e,t)}function ke(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let xe=0;class Se{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.extensions=i,this.id=xe++,this.default=e([])}static define(e={}){return new Se(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:Ce),!!e.static,e.enables)}of(e){return new Me([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Me(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Me(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function Ce(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class Me{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=xe++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(t=e[n.id])&&void 0!==t?t:1))&&c.push(e[n.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||c.some((t=>(1&He(e,t))>0))){let t=n(e);if(s?!Ae(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure(e,t){let a=n(e),l=t.config.address[i];if(null!=l){let n=We(t,l);if(s?Ae(a,n,r):r(a,n))return e.values[o]=n,0}return e.values[o]=a,1}}}}function Ae(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Ee(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),o=r.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=We(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)He(e,t);return e.values[s]=a(e),1},update(e,n){if(!o.some((t=>1&He(e,t))))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=r.some((t=>1&He(e,t))),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&Ce(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const Oe=Se.define({static:!0});class Le{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new Le(xe++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Oe).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,Oe.of({field:this,create:e})]}get extension(){return this}}const Te=4,Re=3,De=2,Pe=1,Ne=0;function Be(e){return t=>new _e(t,e)}const Ie={lowest:Be(Te),low:Be(Re),default:Be(De),high:Be(Pe),highest:Be(Ne),fallback:Be(Te),extend:Be(Pe),override:Be(Ne)};class _e{constructor(e,t){this.inner=e,this.prec=t}}class ze{of(e){return new Fe(this,e)}reconfigure(e){return ze.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Fe{constructor(e,t){this.compartment=e,this.inner=t}}class Ve{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],i=new Map;function o(e,s){let a=i.get(e);if(null!=a){if(a>=s)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof Fe&&n.delete(e.compartment)}if(i.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof Fe){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),o(r,s)}else if(e instanceof _e)o(e.inner,e.prec);else if(e instanceof Le)r[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof Me)r[s].push(e),e.facet.extensions&&o(e.facet.extensions,s);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,s)}}return o(e,De),r.reduce(((e,t)=>e.concat(t)))}(e,t,o))n instanceof Le?r.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let e of r)s[e.id]=l.length<<1,l.push((t=>e.slot(t)));let c=null==n?void 0:n.config.facets;for(let e in i){let t=i[e],r=t[0].facet,o=c&&c[e]||[];if(t.every((e=>0==e.type)))if(s[r.id]=a.length<<1|1,Ce(o,t))a.push(n.facet(r));else{let e=r.combine(t.map((e=>e.value)));a.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(s[e.id]=a.length<<1|1,a.push(e.value)):(s[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));s[r.id]=l.length<<1,l.push((e=>Ee(e,r,t)))}}let u=l.map((e=>e(s)));return new Ve(e,o,u,s,a,i)}}function He(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function We(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const je=Se.define(),Ue=Se.define({combine:e=>e.some((e=>e)),static:!0}),Ke=Se.define({combine:e=>e.length?e[0]:void 0,static:!0}),qe=Se.define(),$e=Se.define(),Qe=Se.define(),Je=Se.define({combine:e=>!!e.length&&e[0]});class Ge{constructor(e,t){this.type=e,this.value=t}static define(){return new Ye}}class Ye{of(e){return new Ge(this,e)}}class Xe{constructor(e){this.map=e}of(e){return new Ze(this,e)}}class Ze{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Ze(this.type,t)}is(e){return this.type==e}static define(e={}){return new Xe(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}Ze.reconfigure=Ze.define(),Ze.appendConfig=Ze.define();class et{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&ke(n,t.newLength),i.some((e=>e.type==et.time))||(this.annotations=i.concat(et.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(et.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function tt(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function nt(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=he.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:Ze.mapEffects(e.effects,i).concat(Ze.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function rt(e,t,n){let r=t.selection,i=st(t.annotations);return t.userEvent&&(i=i.concat(et.userEvent.of(t.userEvent))),{changes:t.changes instanceof he?t.changes:he.of(t.changes||[],n,e.facet(Ke)),selection:r&&(r instanceof we?r:we.single(r.anchor,r.head)),effects:st(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function it(e,t,n){let r=rt(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let i=1;i<t.length;i++){!1===t[i].filter&&(n=!1);let o=!!t[i].sequential;r=nt(r,rt(e,t[i],o?r.changes.newLength:e.doc.length),o)}let i=new et(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(Qe),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=nt(e,rt(t,o,e.changes.newLength),!0))}return r==e?e:new et(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(qe)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:tt(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=he.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.invertedDesc}e=new et(t,r,e.selection&&e.selection.map(i),Ze.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet($e);for(let n=r.length-1;n>=0;n--){let i=r[n](e);e=i instanceof et?i:Array.isArray(i)&&1==i.length&&i[0]instanceof et?i[0]:it(t,st(i),!1)}return e}(i):i)}et.time=Ge.define(),et.userEvent=Ge.define(),et.addToHistory=Ge.define(),et.remote=Ge.define();const ot=[];function st(e){return null==e?ot:Array.isArray(e)?e:[e]}var at=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(at||(at={}));const lt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ct;try{ct=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function ut(e){return t=>{if(!/\S/.test(t))return at.Space;if(function(e){if(ct)return ct.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||lt.test(n)))return!0}return!1}(t))return at.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return at.Word;return at.Other}}class ht{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)He(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return He(this,n),We(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return it(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let t of e.effects)t.is(ze.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(t.value.compartment,t.value.extension)):t.is(Ze.reconfigure)?(n=null,r=t.value):t.is(Ze.appendConfig)&&(n=null,r=st(r).concat(t.value));if(n)t=e.startState.values.slice();else{n=Ve.resolve(r,i,this),t=new ht(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}new ht(n,e.newDoc,e.newSelection,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:we.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=st(n.effects);for(let n=1;n<t.ranges.length;n++){let s=e(t.ranges[n]),a=this.changes(s.changes),l=a.map(r);for(let e=0;e<n;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(s.range.map(c)),r=r.compose(l),o=Ze.mapEffects(o,l).concat(Ze.mapEffects(st(s.effects),c))}return{changes:r,selection:we.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof he?e:he.of(e,this.doc.length,this.facet(ht.lineSeparator))}toText(e){return Z.of(e.split(this.facet(ht.lineSeparator)||le))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(He(this,t),We(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof Le&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n){let i=n[t],o=e[t];r.push(i.init((e=>i.spec.fromJSON(o,e))))}return ht.create({doc:e.doc,selection:we.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Ve.resolve(e.extensions||[],new Map),n=e.doc instanceof Z?e.doc:Z.of((e.doc||"").split(t.staticFacet(ht.lineSeparator)||le)),r=e.selection?e.selection instanceof we?e.selection:we.single(e.selection.anchor,e.selection.head):we.single(0);return ke(r,n.length),t.staticFacet(Ue)||(r=r.asSingle()),new ht(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(ht.tabSize)}get lineBreak(){return this.facet(ht.lineSeparator)||"\n"}get readOnly(){return this.facet(Je)}phrase(e){for(let t of this.facet(ht.phrases))if(Object.prototype.hasOwnProperty.call(t,e))return t[e];return e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(je))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return ut(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=U(t,o,!1);if(i(t.slice(e,o))!=at.Word)break;o=e}for(;s<r;){let e=U(t,s);if(i(t.slice(s,e))!=at.Word)break;s=e}return o==s?null:we.range(o+n,s+n)}}function ft(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],o=r[e];if(void 0===o)r[e]=i;else if(o===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,i)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}ht.allowMultipleSelections=Ue,ht.tabSize=Se.define({combine:e=>e.length?e[0]:4}),ht.lineSeparator=Ke,ht.readOnly=Je,ht.phrases=Se.define(),ht.languageData=je,ht.changeFilter=qe,ht.transactionFilter=$e,ht.transactionExtender=Qe,ze.reconfigure=Ze.define();const dt="undefined"==typeof Symbol?"__":Symbol.for(""),pt="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class gt{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)i(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=mt[dt]||1;return mt[dt]=e+1,""+e.toString(36)}static mount(e,t){(e[pt]||new yt(e)).mount(Array.isArray(t)?t:[t])}}let vt=null;class yt{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(vt)return e.adoptedStyleSheets=[vt.sheet].concat(e.adoptedStyleSheets),e[pt]=vt;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),vt=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[pt]=this}mount(e){let t=this.sheet,n=0,r=0;for(let i=0;i<e.length;i++){let o=e[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}class wt{eq(e){return this==e}range(e,t=e){return new bt(e,t,this)}}wt.prototype.startSide=wt.prototype.endSide=0,wt.prototype.point=!1,wt.prototype.mapMode=ce.TrackDel;class bt{constructor(e,t,n){this.from=e,this.to=t,this.value=n}}function kt(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class xt{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+e,f=this.to[a]+e;if(h==f){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<l))continue}else if(l=t.mapPos(h,u.startSide),c=t.mapPos(f,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-o),i.push(c-o))}return{mapped:n.length?new xt(r,i,n,s):null,pos:o}}}class St{constructor(e,t,n=St.empty,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(kt)),this.isEmpty)return t.length?St.of(t):this;let s=new At(this,null,-1).goto(0),a=0,l=[],c=new Ct;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(new bt(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?St.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i],a=e.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(o));else if(!0===a){let{mapped:i,pos:a}=s.map(o,e);i&&(r=Math.max(r,i.maxPoint),t.push(i),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new St(n,t,i,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return Et.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Et.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=Mt(o,s,n),l=new Lt(o,a,i),c=new Lt(s,a,i);n.iterGaps(((e,t,n)=>Tt(l,e,c,t,n,r))),n.empty&&0==n.length&&Tt(l,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=1e9);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=Mt(i,o),a=new Lt(i,s,0).goto(n),l=new Lt(o,s,0).goto(n);for(;;){if(a.to!=l.to||!Rt(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,i=-1){var o;let s=new Lt(e,null,i,null===(o=r.filterPoint)||void 0===o?void 0:o.bind(r)).goto(t),a=t,l=s.openStart;for(;;){let e=Math.min(s.to,n);if(s.point?(r.point(a,e,s.point,s.activeForPoint(s.to),l),l=s.openEnd(e)+(s.to>e?1:0)):e>a&&(r.span(a,e,s.active,l),l=s.openEnd(e)),s.to>n)break;a=s.to,s.next()}return l}static of(e,t=!1){let n=new Ct;for(let r of e instanceof bt?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(kt(t,r)>0)return e.slice().sort(kt);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}}St.empty=new St([],[],null,-1),St.empty.nextLayer=St.empty;class Ct{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new xt(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Ct)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(St.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=new St(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Mt(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null==o||(n?n.mapPos(o):o)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(o,o+e.chunk[t].length))||i.add(e.chunk[t])}return i}class At{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Et{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new At(o,t,n,i));return 1==r.length?r[0]:new Et(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Ot(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Ot(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ot(this.heap,0)}}}function Ot(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class Lt{constructor(e,t,n,r=(()=>!0)){this.minPoint=n,this.filterPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Et.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Dt(this.active,e),Dt(this.activeTo,e),Dt(this.activeRank,e),this.minActive=Nt(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=i;)t++;Pt(this.active,t,n),Pt(this.activeTo,t,r),Pt(this.activeRank,t,i),e&&Pt(e,t,this.cursor.from),this.minActive=Nt(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&Dt(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let i=this.cursor.value;if(i.point)if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{if(this.filterPoint(this.cursor.from,this.cursor.to,this.cursor.value,this.cursor.rank)){this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){let t=0;for(;t<n.length&&n[t]<e;)t++;this.openStart=t+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Tt(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&Rt(e.activeForPoint(e.to+l),n.activeForPoint(n.to))||o.comparePoint(a,i,e.point,n.point):i>a&&!Rt(e.active,n.active)&&o.compareRange(a,i,e.active,n.active),r>s)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function Rt(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function Dt(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function Pt(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function Nt(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}for(var Bt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},It={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},_t="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),zt="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),Ft="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Vt="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Ht="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Wt=_t&&(Vt||+_t[1]<57)||Ft&&Vt,jt=0;jt<10;jt++)Bt[48+jt]=Bt[96+jt]=String(jt);for(jt=1;jt<=24;jt++)Bt[jt+111]="F"+jt;for(jt=65;jt<=90;jt++)Bt[jt]=String.fromCharCode(jt+32),It[jt]=String.fromCharCode(jt);for(var Ut in Bt)It.hasOwnProperty(Ut)||(It[Ut]=Bt[Ut]);function Kt(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function qt(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function $t(e,t){if(!t.anchorNode)return!1;try{return qt(e,t.anchorNode)}catch(e){return!1}}function Qt(e){return 3==e.nodeType?an(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Jt(e,t,n,r){return!!n&&(Yt(e,t,n,r,-1)||Yt(e,t,n,r,1))}function Gt(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function Yt(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Xt(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=Gt(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?Xt(e):0}}}function Xt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}const Zt={left:0,right:0,top:0,bottom:0};function en(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function tn(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class nn{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let rn,on=null;function sn(e){if(e.setActive)return e.setActive();if(on)return e.focus(on);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==on?{get preventScroll(){return on={preventScroll:!0},!0}}:void 0),!on){on=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function an(e,t,n=t){let r=rn||(rn=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function ln(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function cn(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class un{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new un(e.parentNode,Gt(e),t)}static after(e,t){return new un(e.parentNode,Gt(e)+1,t)}}const hn=[];class fn{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t=this.dom,n=t.firstChild;for(let r of this.children){if(r.dirty){if(!r.dom&&n){let e=fn.get(n);e&&(e.parent||e.constructor!=r.constructor)||r.reuseDOM(n)}r.sync(e),r.dirty=0}if(e&&!e.written&&e.node==t&&n!=r.dom&&(e.written=!0),r.dom.parentNode==t){for(;n&&n!=r.dom;)n=dn(n);n=r.dom.nextSibling}else t.insertBefore(r.dom,n)}for(n&&e&&e.node==t&&(e.written=!0);n;)n=dn(n)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==Xt(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!fn.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=hn){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new pn(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,n,r,i,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}function dn(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}fn.prototype.breakAfter=0;class pn{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function mn(e,t,n,r,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,f=h?h.breakAfter:s;if(!(t==r&&u&&!s&&!f&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&i<e.length?(t==r&&(e=e.split(i),i=0),!f&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:(i&&e.merge(0,i,null,!1,0,l),o.push(e))):(null==e?void 0:e.breakAfter)&&(h?h.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function gn(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(t,-1),h=t-n;for(let e of r)h+=e.length;e.length+=h,mn(e,c,u,a,l,r,0,i,o)}let vn="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},yn="undefined"!=typeof document?document:{documentElement:{style:{}}};const wn=/Edge\/(\d+)/.exec(vn.userAgent),bn=/MSIE \d/.test(vn.userAgent),kn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(vn.userAgent),xn=!!(bn||kn||wn),Sn=!xn&&/gecko\/(\d+)/i.test(vn.userAgent),Cn=!xn&&/Chrome\/(\d+)/.exec(vn.userAgent),Mn="webkitFontSmoothing"in yn.documentElement.style,An=!xn&&/Apple Computer/.test(vn.vendor),En=An&&(/Mobile\/\w+/.test(vn.userAgent)||vn.maxTouchPoints>2);var On={mac:En||/Mac/.test(vn.platform),windows:/Win/.test(vn.platform),linux:/Linux|X11/.test(vn.platform),ie:xn,ie_version:bn?yn.documentMode||6:kn?+kn[1]:wn?+wn[1]:0,gecko:Sn,gecko_version:Sn?+(/Firefox\/(\d+)/.exec(vn.userAgent)||[0,0])[1]:0,chrome:!!Cn,chrome_version:Cn?+Cn[1]:0,ios:En,android:/Android\b/.test(vn.userAgent),webkit:Mn,safari:An,webkit_version:Mn?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=yn.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Ln extends fn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return(!n||n instanceof Ln&&!(this.length-(t-e)+n.length>256))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ln(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new un(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Rn(this.dom,e,t)}}class Tn extends fn{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(cn(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof Tn&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(gn(this,e,t,n?n.children:[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let o of this.children){let s=n+o.length;s>e&&t.push(n<e?o.split(e-n):o),r<0&&n>=e&&(r=i),n=s,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Tn(this.mark,t,o)}domAtPos(e){return _n(this.dom,this.children,e)}coordsAt(e,t){return Fn(this,e,t)}}function Rn(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?On.chrome||On.gecko||(t?(i--,s=1):(o++,s=-1)):n<0?i--:o++;let a=an(e,i,o).getClientRects();if(!a.length)return Zt;let l=a[(s?s<0:n>=0)?0:a.length-1];return On.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),s?en(l,s<0):l||null}class Dn extends fn{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||Dn)(e,t,n)}split(e){let t=Dn.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof Dn&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Dn&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Z.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Z.empty}domAtPos(e){return 0==e?un.before(this.dom):un.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.dom.getClientRects(),r=null;if(!n.length)return Zt;for(let t=e>0?n.length-1:0;r=n[t],!(e>0?0==t:t==n.length-1||r.top<r.bottom);t+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?r:en(r,0==e)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Pn extends Dn{domAtPos(e){let{topView:t,text:n}=this.widget;return t?Nn(e,0,t,n,((e,t)=>e.domAtPos(t)),(e=>new un(n,Math.min(e,n.nodeValue.length)))):new un(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?Bn(e,t,n,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?Nn(e,t,n,r,((e,t,n)=>e.coordsAt(t,n)),((e,t)=>Rn(r,e,t))):Rn(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}}function Nn(e,t,n,r,i,o){if(n instanceof Tn){for(let s of n.children){let n=qt(s.dom,r),a=n?r.nodeValue.length:s.length;if(e<a||e==a&&s.getSide()<=0)return n?Nn(e,t,s,r,i,o):i(s,e,t);e-=a}return i(n,n.length,-1)}return n.dom==r?o(e,t):i(n,e,t)}function Bn(e,t,n,r){if(n instanceof Tn)for(let i of n.children){let n=0,o=qt(i.dom,r);if(qt(i.dom,e))return n+(o?Bn(e,t,i,r):i.localPosFromDOM(e,t));n+=o?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}class In extends fn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof In&&e.side==this.side}split(){return new In(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return un.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),n=function(e,t){let n=e.parent,r=n?n.children.indexOf(e):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){let e=n.children[r+t];if(e instanceof Ln){let n=e.coordsAt(t<0?e.length:0,t);if(n)return n}r+=t}else{if(!(n instanceof Tn&&n.parent)){let e=n.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent}return}(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}get overrideDOMText(){return Z.empty}}function _n(e,t,n){let r=0;for(let i=0;r<t.length;r++){let o=t[r],s=i+o.length;if(!(s==i&&o.getSide()<=0)){if(n>i&&n<s&&o.dom.parentNode==e)return o.domAtPos(n-i);if(n<=i)break;i=s}}for(;r>0;r--){let n=t[r-1].dom;if(n.parentNode==e)return un.after(n)}return new un(e,0)}function zn(e,t,n){let r,{children:i}=e;n>0&&t instanceof Tn&&i.length&&(r=i[i.length-1])instanceof Tn&&r.mark.eq(t.mark)?zn(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function Fn(e,t,n){for(let r=0,i=0;i<e.children.length;i++){let o,s=e.children[i],a=r+s.length;if((n<=0||a==e.length||s.getSide()>0?a>=t:a>t)&&(t<a||i+1==e.children.length||(o=e.children[i+1]).length||o.getSide()>0)){let e=0;if(a==r){if(s.getSide()<=0)continue;e=n=-s.getSide()}let i=s.coordsAt(Math.max(0,t-r),n);return e&&i?en(i,n<0):i}r=a}let r=e.dom.lastChild;if(!r)return e.dom.getBoundingClientRect();let i=Qt(r);return i[i.length-1]||null}function Vn(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function Hn(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||e[i]!==t[i])return!1;return!0}function Wn(e,t,n){if(t)for(let r in t)n&&r in n||e.removeAttribute(r);if(n)for(let r in n)t&&t[r]==n[r]||e.setAttribute(r,n[r])}Ln.prototype.children=Dn.prototype.children=In.prototype.children=hn;class jn{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Un=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Un||(Un={}));class Kn extends wt{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new qn(e)}static widget(e){let t=e.side||0,n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new Qn(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:o}=Jn(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new Qn(e,t,n,r,e.widget||null,!0)}static line(e){return new $n(e)}static set(e,t=!1){return St.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Kn.none=St.empty;class qn extends Kn{constructor(e){let{start:t,end:n}=Jn(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof qn&&this.tagName==e.tagName&&this.class==e.class&&Hn(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}qn.prototype.point=!1;class $n extends Kn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof $n&&Hn(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}$n.prototype.mapMode=ce.TrackBefore,$n.prototype.point=!0;class Qn extends Kn{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?ce.TrackBefore:ce.TrackAfter:ce.TrackDel}get type(){return this.startSide<this.endSide?Un.WidgetRange:this.startSide<=0?Un.WidgetBefore:Un.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Qn&&(t=this.widget,n=e.widget,t==n||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function Jn(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function Gn(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}Qn.prototype.point=!0;class Yn extends fn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof Yn))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),gn(this,e,t,n?n.children:[],i,o),!0}split(e){let t=new Yn;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Hn(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){zn(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Vn(t,this.attrs||{})),n&&(this.attrs=Vn({class:n},this.attrs||{}))}domAtPos(e){return _n(this.dom,this.children,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(cn(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Wn(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let n=this.dom.lastChild;for(;n&&fn.get(n)instanceof Tn;)n=n.lastChild;if(!(n&&this.length&&("BR"==n.nodeName||0!=(null===(t=fn.get(n))||void 0===t?void 0:t.isEditable)||On.ios&&this.children.some((e=>e instanceof Ln))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Ln))return null;let n=Qt(t.dom);if(1!=n.length)return null;e+=n[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return Fn(this,e,t)}become(e){return!1}get type(){return Un.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof Yn)return i;if(o>t)break}r=o+i.breakAfter}return null}}class Xn extends fn{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof Xn&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?un.before(this.dom):un.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Xn(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return hn}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Z.empty}domBoundsAround(){return null}become(e){return e instanceof Xn&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Zn{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsBelow=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Xn&&e.type==Un.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Yn),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(er(new In(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,n)),this.getLine().append(er(new Ln(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i){let o=t-e;if(n instanceof Qn)if(n.block){let{type:e}=n;e!=Un.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Xn(n.widget||new tr("div"),o,e))}else{let s=Dn.create(n.widget||new tr("span"),o,n.startSide),a=this.atCursorPos&&!s.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!s.isEditable&&(e<t||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(er(new In(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(er(s,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}filterPoint(e,t,n,r){if(r<this.disallowBlockEffectsBelow&&n instanceof Qn){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}return!0}static build(e,t,n,r,i){let o=new Zn(e,t,n,i);return o.openEnd=St.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function er(e,t){for(let n of t)e=new Tn(n,[e],e.length);return e}class tr extends jn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const nr=[],rr=Se.define(),ir=Se.define(),or=Se.define(),sr=Se.define(),ar=Se.define(),lr=Se.define(),cr=Ze.define({map:(e,t)=>e.map(t)}),ur=Ze.define({map:(e,t)=>e.map(t)});class hr{constructor(e,t="nearest",n="nearest",r=5,i=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i}map(e){return e.empty?this:new hr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const fr=Ze.define({map:(e,t)=>e.map(t)});function dr(e,t,n){let r=e.facet(sr);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const pr=Se.define({combine:e=>!e.length||e[0]});class mr{constructor(e,t){this.field=e,this.get=t}}class gr{from(e){return new mr(this,e)}static define(){return new gr}}gr.decorations=gr.define(),gr.atomicRanges=gr.define(),gr.scrollMargins=gr.define();let vr=0;const yr=Se.define();class wr{constructor(e,t,n){this.id=e,this.create=t,this.fields=n,this.extension=yr.of(this)}static define(e,t){let{eventHandlers:n,provide:r,decorations:i}=t||{},o=[];if(r)for(let e of Array.isArray(r)?r:[r])o.push(e);return n&&o.push(br.from((e=>({plugin:e,handlers:n})))),i&&o.push(gr.decorations.from(i)),new wr(vr++,e,o)}static fromClass(e,t){return wr.define((t=>new e(t)),t)}}const br=gr.define();class kr{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}takeField(e,t){if(this.spec)for(let{field:n,get:r}of this.spec.fields)n==e&&t.push(r(this.value))}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(dr(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){dr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){dr(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const xr=Se.define(),Sr=Se.define(),Cr=Se.define(),Mr=Se.define();class Ar{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new Ar(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new Ar(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new Ar(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class Er{constructor(e,t,n=nr){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=he.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new Ar(e,t,n,i)))),this.changedRanges=r;let i=e.hasFocus;i!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=i,this.flags|=1)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Or=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Or||(Or={}));const Lr=Or.LTR,Tr=Or.RTL;function Rr(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const Dr=Rr("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Pr=Rr("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Nr=Object.create(null),Br=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);Nr[t]=n,Nr[n]=-t}const Ir=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class _r{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?Tr:Lr}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}const zr=[];function Fr(e,t){let n=e.length,r=t==Lr?1:2,i=t==Lr?2:1;if(!e||1==r&&!Ir.test(e))return Vr(n);for(let t=0,i=r,s=r;t<n;t++){let n=(o=e.charCodeAt(t))<=247?Dr[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?Pr[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8203||8204==o?256:1;512==n?n=i:8==n&&4==s&&(n=16),zr[t]=4==n?2:n,7&n&&(s=n),i=n}var o;for(let e=0,t=r,i=r;e<n;e++){let r=zr[e];if(128==r)e<n-1&&t==zr[e+1]&&24&t?r=zr[e]=t:zr[e]=256;else if(64==r){let r=e+1;for(;r<n&&64==zr[r];)r++;let o=e&&8==t||r<n&&8==zr[r]?1==i?1:8:256;for(let t=e;t<r;t++)zr[t]=o;e=r-1}else 8==r&&1==i&&(zr[e]=1);t=r,7&r&&(i=r)}for(let t,o,s,a=0,l=0,c=0;a<n;a++)if(o=Nr[t=e.charCodeAt(a)])if(o<0){for(let e=l-3;e>=0;e-=3)if(Br[e+1]==-o){let t=Br[e+2],n=2&t?r:4&t?1&t?i:r:0;n&&(zr[a]=zr[Br[e]]=n),l=e;break}}else{if(189==Br.length)break;Br[l++]=a,Br[l++]=t,Br[l++]=c}else if(2==(s=zr[a])||1==s){let e=s==r;c=e?0:1;for(let t=l-3;t>=0;t-=3){let n=Br[t+2];if(2&n)break;if(e)Br[t+2]|=2;else{if(4&n)break;Br[t+2]|=4}}}for(let e=0;e<n;e++)if(256==zr[e]){let t=e+1;for(;t<n&&256==zr[t];)t++;let i=1==(e?zr[e-1]:r),o=i==(1==(t<n?zr[t]:r))?i?1:2:r;for(let n=e;n<t;n++)zr[n]=o;e=t-1}let s=[];if(1==r)for(let e=0;e<n;){let t=e,r=1!=zr[e++];for(;e<n&&r==(1!=zr[e]);)e++;if(r)for(let n=e;n>t;){let e=n,r=2!=zr[--n];for(;n>t&&r==(2!=zr[n-1]);)n--;s.push(new _r(n,e,r?2:1))}else s.push(new _r(t,e,0))}else for(let e=0;e<n;){let t=e,r=2==zr[e++];for(;e<n&&r==(2==zr[e]);)e++;s.push(new _r(t,e,r?1:2))}return s}function Vr(e){return[new _r(0,e,0)]}let Hr="";function Wr(e,t,n,r,i){var o;let s=r.head-e.from,a=-1;if(0==s){if(!i||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),a=0)}else if(s==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(s=e.side(!0,n),a=t.length-1)}a<0&&(a=_r.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=t[a];s==l.side(i,n)&&(l=t[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),u=U(e.text,s,c);if(Hr=e.text.slice(Math.min(s,u),Math.max(s,u)),u!=l.side(i,n))return we.cursor(u+e.from,c?-1:1,l.level);let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?we.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):we.cursor(u+e.from,i?-1:1,l.level):we.cursor(i?e.to:e.from,i?-1:1,n)}class jr{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ht.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=""}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r),this.readNode(r);let e=r.nextSibling;if(e==t)break;let i=fn.get(r),o=fn.get(e);(i&&o?i.breakAfter:(i?i.breakAfter:Ur(r))||Ur(e)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=e}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=fn.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function Ur(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class Kr{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class qr extends fn{constructor(e){super(),this.view=e,this.compositionDeco=Kn.none,this.decorations=[],this.pluginDecorationLength=0,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Yn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ar(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Kn.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let n=Qr(e);if(!n)return Kn.none;let{from:r,to:i,node:o,text:s}=n,a=t.mapPos(r,1),l=Math.max(a,t.mapPos(i,-1)),{state:c}=e,u=3==o.nodeType?o.nodeValue:new jr([],c).readRange(o.firstChild,null).text;if(l-a<u.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+u.length),"")==u)l=a+u.length;else{if(c.doc.sliceString(Math.max(0,l-u.length),l,"")!=u)return Kn.none;a=l-u.length}else if(c.doc.sliceString(a,l,"")!=u)return Kn.none;let h=fn.get(o);h instanceof Pn?h=h.widget.topView:h&&(h.parent=null);return Kn.set(Kn.replace({widget:new Jr(o,s,h)}).range(a,l))}(this.view,e.changes)),(On.ie||On.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=function(e,t,n){let r=new Yr;return St.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=Ar.extendWithRanges(t,n),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let e=On.chrome||On.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof Xn&&e.widget instanceof $r&&r.push(e.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let t=e.length-1;;t--){let r=t>=0?e[t]:null;if(!r)break;let{fromA:i,toA:o,fromB:s,toB:a}=r,{content:l,breakAtStart:c,openStart:u,openEnd:h}=Zn.build(this.view.state.doc,s,a,this.decorations,this.pluginDecorationLength),{i:f,off:d}=n.findPos(o,1),{i:p,off:m}=n.findPos(i,-1);mn(this,p,m,f,d,l,c,u,h)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection()||On.ios&&this.view.inputState.rapidCompositionStart)return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,i=this.domAtPos(r.anchor),o=r.empty?i:this.domAtPos(r.head);if(On.gecko&&r.empty&&(1==(s=i).node.nodeType&&s.node.firstChild&&(0==s.offset||"false"==s.node.childNodes[s.offset-1].contentEditable)&&(s.offset==s.node.childNodes.length||"false"==s.node.childNodes[s.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>i.node.insertBefore(e,i.node.childNodes[i.offset]||null))),i=o=new un(e,0),n=!0}var s;let a=this.view.observer.selectionRange;!n&&a.focusNode&&Jt(i.node,i.offset,a.anchorNode,a.anchorOffset)&&Jt(o.node,o.offset,a.focusNode,a.focusOffset)||(this.view.observer.ignore((()=>{On.android&&On.chrome&&this.dom.contains(a.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=Kt(this.root);if(r.empty){if(On.gecko){let e=(t=i.node,n=i.offset,1!=t.nodeType?0:(n&&"false"==t.childNodes[n-1].contentEditable?1:0)|(n<t.childNodes.length&&"false"==t.childNodes[n].contentEditable?2:0));if(e&&3!=e){let t=Gr(i.node,i.offset,1==e?1:-1);t&&(i=new un(t,1==e?0:t.nodeValue.length))}}e.collapse(i.node,i.offset),null!=r.bidiLevel&&null!=a.cursorBidiLevel&&(a.cursorBidiLevel=r.bidiLevel)}else if(e.extend)e.collapse(i.node,i.offset),e.extend(o.node,o.offset);else{let t=document.createRange();r.anchor>r.head&&([i,o]=[o,i]),t.setEnd(o.node,o.offset),t.setStart(i.node,i.offset),e.removeAllRanges(),e.addRange(t)}var t,n})),this.view.observer.setSelectionRange(i,o)),this.impreciseAnchor=i.precise?null:new un(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new un(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=Kt(this.root);if(!e.empty||!e.assoc||!t.modify)return;let n=Yn.find(this,e.head);if(!n)return;let r=n.posAtStart;if(e.head==r||e.head==r+n.length)return;let i=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!i||!o||i.bottom>o.top)return;let s=this.domAtPos(e.head+e.assoc);t.collapse(s.node,s.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(pr)?this.root.activeElement==this.dom:$t(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let e=fn.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof Yn)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],o=n-i.breakAfter-i.length;if(e>o||e==o&&i.type!=Un.WidgetBefore&&i.type!=Un.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==Un.WidgetBefore&&t>-2))return i.coordsAt(e-o,t);n=o}}measureVisibleLineHeights(){let e=[],{from:t,to:n}=this.view.viewState.viewport,r=this.view.contentDOM.clientWidth,i=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1;for(let s=0,a=0;a<this.children.length;a++){let l=this.children[a],c=s+l.length;if(c>n)break;if(s>=t){let t=l.dom.getBoundingClientRect();if(e.push(t.height),i){let e=l.dom.lastChild,n=e?Qt(e):[];if(n.length){let e=n[n.length-1],i=this.view.textDirection==Or.LTR?e.right-t.left:t.right-e.left;i>o&&(o=i,this.minWidth=r,this.minWidthFrom=s,this.minWidthTo=c)}}}s=c+l.breakAfter}return e}measureTextSize(){for(let e of this.children)if(e instanceof Yn){let t=e.measureTextSize();if(t)return t}let e,t,n=document.createElement("div");return n.className="cm-line",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=Qt(n.firstChild)[0];e=n.getBoundingClientRect().height,t=r?r.width/27:7,n.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new pn(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(Kn.replace({widget:new $r(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return Kn.set(e)}updateDeco(){let e=this.view.pluginField(gr.decorations);return this.pluginDecorationLength=e.length,this.decorations=[...e,...this.view.state.facet(Cr),this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=0,o=0,s=0,a=0;for(let e of this.view.pluginField(gr.scrollMargins))if(e){let{left:t,right:n,top:r,bottom:l}=e;null!=t&&(i=Math.max(i,t)),null!=n&&(o=Math.max(o,n)),null!=r&&(s=Math.max(s,r)),null!=l&&(a=Math.max(a,l))}let l={left:r.left-i,top:r.top-s,right:r.right+o,bottom:r.bottom+a};!function(e,t,n,r,i,o,s,a){let l=e.ownerDocument,c=l.defaultView;for(let u=e;u;)if(1==u.nodeType){let e,h=u==l.body;if(h)e=tn(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let t=u.getBoundingClientRect();e={left:t.left,right:t.left+u.clientWidth,top:t.top,bottom:t.top+u.clientHeight}}let f=0,d=0;if("nearest"==i)t.top<e.top?(d=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+d&&(d=t.bottom-e.bottom+d+s)):t.bottom>e.bottom&&(d=t.bottom-e.bottom+s,n<0&&t.top-d<e.top&&(d=-(e.top+d-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;d=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(f=-(e.left-t.left+o),n>0&&t.right>e.right+f&&(f=t.right-e.right+f+o)):t.right>e.right&&(f=t.right-e.right+o,n<0&&t.left<e.left+f&&(f=-(e.left+f-t.left+o))):f=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,f||d)if(h)c.scrollBy(f,d);else{if(d){let e=u.scrollTop;u.scrollTop+=d,d=u.scrollTop-e}if(f){let e=u.scrollLeft;u.scrollLeft+=f,f=u.scrollLeft-e}t={left:t.left-f,top:t.top-d,right:t.right-f,bottom:t.bottom-d}}if(h)break;u=u.assignedSlot||u.parentNode,r=i="nearest"}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Or.LTR)}}class $r extends jn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Qr(e){let t=e.observer.selectionRange,n=t.focusNode&&Gr(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e.docView.nearest(n);if(!r)return null;if(r instanceof Yn){let e=n;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!fn.get(t);)t=t.previousSibling;let i=t?fn.get(t).posAtEnd:r.posAtStart;return{from:i,to:i,node:e,text:n}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof Yn)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:n}}}class Jr extends jn{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Pn}}function Gr(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=Xt(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}class Yr{constructor(){this.changes=[]}compareRange(e,t){Gn(e,t,this.changes)}comparePoint(e,t){Gn(e,t,this.changes)}}function Xr(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Zr(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function ei(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function ti(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function ni(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function ri(e,t,n){let r,i,o,s,a,l,c,u;for(let h=e.firstChild;h;h=h.nextSibling){let e=Qt(h);for(let f=0;f<e.length;f++){let d=e[f];i&&ei(i,d)&&(d=ti(ni(d,i.bottom),i.top));let p=Xr(t,d),m=Zr(n,d);if(0==p&&0==m)return 3==h.nodeType?ii(h,t,n):ri(h,t,n);(!r||s>m||s==m&&o>p)&&(r=h,i=d,o=p,s=m),0==p?n>d.bottom&&(!c||c.bottom<d.bottom)?(a=h,c=d):n<d.top&&(!u||u.top>d.top)&&(l=h,u=d):c&&ei(c,d)?c=ni(c,d.bottom):u&&ei(u,d)&&(u=ti(u,d.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:e,offset:0};let h=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?ii(r,h,n):o||"true"!=r.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}:ri(r,h,n)}function ii(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=an(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let n=t>=(c.left+c.right)/2,r=n;if(On.chrome||On.gecko){an(e,a).getBoundingClientRect().left==c.right&&(r=!n)}if(u<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function oi(e,{x:t,y:n},r,i=-1){var o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,u=n-l;if(u<0)return 0;if(u>c)return e.state.doc.length;for(let t=e.defaultLineHeight/2,n=!1;s=e.elementAtHeight(u),s.type!=Un.Text;)for(;u=i>0?s.bottom+t:s.top-t,!(u>=0&&u<=c);){if(n)return r?null:0;n=!0,i=-i}n=l+u;let h=s.from;if(h<e.viewport.from)return 0==e.viewport.from?0:r?null:si(e,a,s,t,n);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:si(e,a,s,t,n);let f=e.dom.ownerDocument,d=e.root.elementFromPoint?e.root:f,p=d.elementFromPoint(t,n);p&&!e.contentDOM.contains(p)&&(p=null),p||(t=Math.max(a.left+1,Math.min(a.right-1,t)),p=d.elementFromPoint(t,n),p&&!e.contentDOM.contains(p)&&(p=null));let m,g=-1;if(p&&0!=(null===(o=e.docView.nearest(p))||void 0===o?void 0:o.isEditable))if(f.caretPositionFromPoint){let e=f.caretPositionFromPoint(t,n);e&&({offsetNode:m,offset:g}=e)}else if(f.caretRangeFromPoint){let e=f.caretRangeFromPoint(t,n);e&&(({startContainer:m,startOffset:g}=e),On.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return an(e,r-1,r).getBoundingClientRect().left>n}(m,g,t)&&(m=void 0))}if(!m||!e.docView.dom.contains(m)){let r=Yn.find(e.docView,h);if(!r)return u>s.top+s.height/2?s.to:s.from;({node:m,offset:g}=ri(r.dom,t,n))}return e.docView.posFromDOM(m,g)}function si(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){o+=Math.floor((i-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+function(e,t,n,r){for(let r=0,i=0;;){if(i>=t)return r;if(r==e.length)break;i+=9==e.charCodeAt(r)?n-i%n:1,r=U(e,r)}return!0===r?-1:e.length}(s,o,e.state.tabSize)}function ai(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i);for(let s=t,a=null;;){let t=Wr(i,o,e.textDirection,s,n),l=Hr;if(!t){if(i.number==(n?e.state.doc.lines:1))return s;l="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=we.cursor(n?i.from:i.to)}if(a){if(!a(l))return s}else{if(!r)return t;a=r(l)}s=t}}function li(e,t,n){let r=e.pluginField(gr.atomicRanges);for(;;){let e=!1;for(let i of r)i.between(n.from-1,n.from+1,((r,i,o)=>{n.from>r&&n.from<i&&(n=t.from>n.from?we.cursor(r,1):we.cursor(i,-1),e=!0)}));if(!e)return n}}class ci{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in pi){let n=pi[t];e.contentDOM.addEventListener(t,(r=>{"keydown"==t&&this.keydown(e,r)||di(e,r)&&!this.ignoreDuringComposition(r)&&(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():n(e,r))})),this.registeredEvents.push(t)}this.notifiedFocused=e.hasFocus,this.ensureHandlers(e),On.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e){let t=this.customHandlers=e.pluginField(br);for(let n of t)for(let t in n.handlers)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(n=>{di(e,n)&&this.runCustomHandlers(t,e,n)&&n.preventDefault()})))}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let i=r.handlers[e];if(i)try{if(i.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(e){dr(t.state,e)}}return!1}runScrollHandlers(e,t){for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(t){dr(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),this.screenKeyEvent(e,t))return!0;if(On.android&&On.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!On.ios||!(n=ui.find((e=>e.keyCode==t.keyCode)))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic)&&(this.pendingIOSKey=n,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,ln(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(On.safari&&Date.now()-this.compositionEndedAt<500)&&(this.compositionEndedAt=0,!0))}screenKeyEvent(e,t){let n=9==t.keyCode&&Date.now()<this.lastEscPress+2e3;return 27==t.keyCode?this.lastEscPress=Date.now():hi.indexOf(t.keyCode)<0&&(this.lastEscPress=0),n}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!On.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const ui=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],hi=[16,17,18,20,91,92,224,225];class fi{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.lastEvent=t;let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ht.allowMultipleSelections)&&function(e,t){let n=e.state.facet(rr);return n.length?n[0](t):On.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let n=e.state.facet(ir);return n.length?n[0](t):On.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=Kt(e.root);if(0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let e=0;e<i.length;e++){let n=i[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Ei(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function di(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=fn.get(r))&&n.ignoreEvent(t))return!1;return!0}const pi=Object.create(null),mi=On.ie&&On.ie_version<15||On.ios&&On.webkit_version<604;function gi(e,t){let n,{state:r}=e,i=1,o=r.toText(t),s=o.lines==r.selection.ranges.length;if(null!=Li&&r.selection.ranges.every((e=>e.empty))&&Li==o.toString()){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?o.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:we.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:we.cursor(e.from+t.length)}})):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}pi.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select")};let vi=0;function yi(e,t,n,r){if(1==r)return we.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return we.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=U(i.text,o,!1):a=U(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let e=U(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=U(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return we.range(s+i.from,a+i.from)}(e.state,t,n);{let n=Yn.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,we.range(i,o)}}pi.touchstart=(e,t)=>{vi=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},pi.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},pi.mousedown=(e,t)=>{if(e.observer.flush(),vi>Date.now()-2e3&&1==Ei(t))return;let n=null;for(let r of e.state.facet(or))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=xi(e,t),r=Ei(t),i=e.state.selection,o=n,s=t;return{update(e){e.docChanged&&(n&&(n.pos=e.changes.mapPos(n.pos)),i=i.map(e.changes),s=null)},get(t,a,l){let c;if(s&&t.clientX==s.clientX&&t.clientY==s.clientY?c=o:(c=o=xi(e,t),s=t),!c||!n)return i;let u=yi(e,c.pos,c.bias,r);if(n.pos!=c.pos&&!a){let t=yi(e,n.pos,n.bias,r),i=Math.min(t.from,u.from),o=Math.max(t.to,u.to);u=i<u.from?we.range(i,o):we.range(o,i)}return a?i.replaceRange(i.main.extend(u.from,u.to)):l?i.addRange(u):we.create([u])}}}(e,t)),n){let r=e.root.activeElement!=e.contentDOM;r&&e.observer.ignore((()=>sn(e.contentDOM))),e.inputState.startMouseSelection(new fi(e,t,n,r))}};let wi=(e,t)=>e>=t.top&&e<=t.bottom,bi=(e,t,n)=>wi(t,n)&&e>=n.left&&e<=n.right;function ki(e,t,n,r){let i=Yn.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&bi(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&bi(n,r,a)?1:s&&wi(r,s)?-1:1}function xi(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:ki(e,n,t.clientX,t.clientY)}}const Si=On.ie&&On.ie_version<=11;let Ci=null,Mi=0,Ai=0;function Ei(e){if(!Si)return e.detail;let t=Ci,n=Ai;return Ci=e,Ai=Date.now(),Mi=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Mi+1)%3:1}function Oi(e,t,n,r){if(!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}pi.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},pi.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&Oi(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}}else Oi(e,t,t.dataTransfer.getData("Text"),!0)},pi.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=mi?null:t.clipboardData;n?(gi(e,n.getData("text/plain")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),gi(e,n.value)}),50)}(e)};let Li=null;function Ti(e,t){if(e.docView.compositionDeco.size){e.inputState.rapidCompositionStart=t;try{e.update([])}finally{e.inputState.rapidCompositionStart=!1}}}pi.copy=pi.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!i)return;Li=i?n:null;let o=mi?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",n)):function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,n),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})},pi.focus=pi.blur=e=>{setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)},pi.beforeprint=e=>{e.viewState.printing=!0,e.requestMeasure(),setTimeout((()=>{e.viewState.printing=!1,e.requestMeasure()}),2e3)},pi.compositionstart=pi.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0,e.docView.compositionDeco.size&&(e.observer.flush(),Ti(e,!0)))},pi.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,setTimeout((()=>{e.inputState.composing<0&&Ti(e,!1)}),50)},pi.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},pi.beforeinput=(e,t)=>{var n;let r;if(On.chrome&&On.android&&(r=ui.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const Ri=["pre-wrap","normal","pre-line","break-spaces"];class Di{constructor(){this.doc=Z.empty,this.lineWrapping=!1,this.direction=Or.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForStyle(e,t){return Ri.indexOf(e)>-1!=this.lineWrapping||this.direction!=t}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i,o){let s=Ri.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=s||this.direction!=t;if(this.lineWrapping=s,this.direction=t,this.lineHeight=n,this.charWidth=r,this.lineLength=i,a){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class Pi{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ni{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Ni(this.from,this.length+e.length,this.top,this.height+e.height,t)}moveY(e){return e?new Ni(this.from,this.length,this.top+e,this.height,Array.isArray(this.type)?this.type.map((t=>t.moveY(e))):this.type):this}}var Bi=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Bi||(Bi={}));class Ii{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>.001&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Ii.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this;for(let o=r.length-1;o>=0;o--){let{fromA:s,toA:a,fromB:l,toB:c}=r[o],u=i.lineAt(s,Bi.ByPosNoHeight,t,0,0),h=u.to>=a?u:i.lineAt(a,Bi.ByPosNoHeight,t,0,0);for(c+=h.to-a,a=h.to;o>0&&u.from<=r[o-1].toA;)s=r[o-1].fromA,l=r[o-1].fromB,o--,s<u.from&&(u=i.lineAt(s,Bi.ByPosNoHeight,t,0,0));l+=u.from-s,s=u.from;let f=Wi.build(n,e,l,c);i=i.replace(s,a,f)}return i.updateHeight(n,0)}static empty(){return new zi(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new Vi(Ii.of(e.slice(0,t)),o,Ii.of(e.slice(n)))}}Ii.prototype.size=1;class _i extends Ii{constructor(e,t,n){super(e,t),this.type=n}blockAt(e,t,n,r){return new Ni(r,this.length,n,this.height,this.type)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){o(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class zi extends _i{constructor(e,t){super(e,t,Un.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof zi||r instanceof Fi&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof Fi?r=new zi(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ii.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Fi extends Ii{constructor(e){super(e,0)}lines(e,t){let n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,lineHeight:s}=this.lines(t,r),a=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:l,length:c}=t.line(i+a);return new Ni(l,c,n+s*a,s,Un.Text)}lineAt(e,t,n,r,i){if(t==Bi.ByHeight)return this.blockAt(e,n,r,i);if(t==Bi.ByPosNoHeight){let{from:t,to:r}=n.lineAt(e);return new Ni(t,r-t,0,0,Un.Text)}let{firstLine:o,lineHeight:s}=this.lines(n,i),{from:a,length:l,number:c}=n.lineAt(e);return new Ni(a,l,r+s*(c-o),s,Un.Text)}forEachLine(e,t,n,r,i,o){let{firstLine:s,lineHeight:a}=this.lines(n,i);for(let l=Math.max(e,i),c=Math.min(i+this.length,t);l<=c;){let t=n.lineAt(l);l==e&&(r+=a*(t.number-s)),o(new Ni(t.from,t.length,r,a,Un.Text)),r+=a,l=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof Fi?n[n.length-1]=new Fi(e.length+r):n.push(null,new Fi(r-1))}if(e>0){let t=n[0];t instanceof Fi?n[0]=new Fi(e+t.length):n.unshift(new Fi(e-1),null)}return Ii.of(n)}decomposeLeft(e,t){t.push(new Fi(e-1),null)}decomposeRight(e,t){t.push(null,new Fi(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1,a=e.heightChanged;for(r.from>t&&n.push(new Fi(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=.001&&(s=-2);let a=new zi(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new Fi(i-o).updateHeight(e,o));let l=Ii.of(n);return e.heightChanged=a||s<0||Math.abs(l.height-this.height)>=.001||Math.abs(s-this.lines(e.doc,t).lineHeight)>=.001,l}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Vi extends Ii{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==Bi.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==Bi.ByPosNoHeight?Bi.ByPosNoHeight:Bi.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,Bi.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let e of n)i.push(e);if(e>0&&Hi(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),Hi(i,e)}return Ii.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ii.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Hi(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof Fi&&(r=e[t+1])instanceof Fi&&e.splice(t-1,3,new Fi(n.length+1+r.length))}class Wi{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof zi?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new zi(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new _i(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new zi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Fi(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof zi)return e;let t=new zi(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=Un.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Un.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof zi||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new zi(0,-1));let n=e;for(let e of this.nodes)e instanceof zi&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let i=new Wi(n,e);return St.spans(t,n,r,i,0),i.finish(n)}}class ji{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Gn(e,t,this.changes,5)}}class Ui{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e){return Kn.replace({widget:new Ki(this.size,e)}).range(this.from,this.to)}}class Ki extends jn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class qi{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new Di,this.scaler=Zi,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=Ii.empty().applyChanges(e.facet(Cr),Z.empty,this.heightOracle.setDoc(e.doc),[new Ar(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Kn.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new $i(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?Zi:new eo(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:to(e,this.scaler))}))}update(e,t=null){let n=this.state;this.state=e.state;let r=this.state.facet(Cr),i=e.changedRanges,o=Ar.extendWithRanges(i,function(e,t,n){let r=new ji;return St.compare(e,t,n,r,0),r.changes}(e.startState.facet(Cr),r,e?e.changes:he.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(r,n.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(e.flags|=2);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||2&e.flags||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace,o="rtl"==n.direction?Or.RTL:Or.LTR,s=this.heightOracle.mustRefreshForStyle(i,o),a=s||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight,l=0,c=0;if(this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8),a){this.mustMeasureContent=!1,this.contentDOMHeight=t.clientHeight;let e=parseInt(n.paddingTop)||0,r=parseInt(n.paddingBottom)||0;this.paddingTop==e&&this.paddingBottom==r||(l|=8,this.paddingTop=e,this.paddingBottom=r)}let u=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:function(e,t){let n=e.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),o=Math.max(0,n.top),s=Math.min(innerHeight,n.bottom),a=e.ownerDocument.body;for(let t=e.parentNode;t&&t!=a;)if(1==t.nodeType){let e=t,n=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=n.overflow){let t=e.getBoundingClientRect();r=Math.max(r,t.left),i=Math.min(i,t.right),o=Math.max(o,t.top),s=Math.min(s,t.bottom)}t="absolute"==n.position||"fixed"==n.position?e.offsetParent:e.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:r-n.left,right:Math.max(r,i)-n.left,top:o-(n.top+t),bottom:Math.max(o,s)-(n.top+t)}}(t,this.paddingTop),h=u.top-this.pixelViewport.top,f=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let d=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(d!=this.inView&&(this.inView=d,d&&(a=!0)),!this.inView)return 0;let p=t.clientWidth;if(this.contentDOMWidth==p&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=p,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let t=e.docView.measureVisibleLineHeights();if(r.mustRefreshForHeights(t)&&(s=!0),s||r.lineWrapping&&Math.abs(p-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:a}=e.docView.measureTextSize();s=r.refresh(i,o,n,a,p/a,t),s&&(e.docView.minWidth=0,l|=8)}h>0&&f>0?c=Math.max(h,f):h<0&&f<0&&(c=Math.min(h,f)),r.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(r,0,s,new Pi(this.viewport.from,t)),r.heightChanged&&(l|=2)}let m=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return m&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||m)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.state.doc,{visibleTop:o,visibleBottom:s}=this,a=new $i(r.lineAt(o-1e3*n,Bi.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),Bi.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,Bi.ByPos,i,0,0);n="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new $i(r.lineAt(n-500,Bi.ByHeight,i,0,0).from,r.lineAt(n+o+500,Bi.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new $i(this.heightMap.lineAt(n,Bi.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Bi.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Bi.ByPos,this.state.doc,0,0),{bottom:i}=this.heightMap.lineAt(t,Bi.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new Ui(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e){let t=[];if(this.heightOracle.direction!=Or.LTR)return t;for(let n of this.viewportLines){if(n.length<4e3)continue;let r,i,o=Qi(n.from,n.to,this.state);if(o.total<4e3)continue;if(this.heightOracle.lineWrapping){let e=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;r=Ji(o,(this.visibleTop-n.top-e)/n.height),i=Ji(o,(this.visibleBottom-n.top+e)/n.height)}else{let e=o.total*this.heightOracle.charWidth,t=2e3*this.heightOracle.charWidth;r=Ji(o,(this.pixelViewport.left-t)/e),i=Ji(o,(this.pixelViewport.right+t)/e)}let s=[];r>n.from&&s.push({from:n.from,to:r}),i<n.to&&s.push({from:i,to:n.to});let a=this.state.selection.main;a.from>=n.from&&a.from<=n.to&&Yi(s,a.from-10,a.from+10),!a.empty&&a.to>=n.from&&a.to<=n.to&&Yi(s,a.to-10,a.to+10);for(let{from:r,to:i}of s)i-r>1e3&&t.push(Xi(e,(e=>e.from>=n.from&&e.to<=n.to&&Math.abs(e.from-r)<1e3&&Math.abs(e.to-i)<1e3))||new Ui(r,i,this.gapSize(n,r,i,o)))}return t}gapSize(e,t,n,r){let i=Gi(r,n)-Gi(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){Ui.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Kn.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.state.facet(Cr);this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];St.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||to(this.heightMap.lineAt(e,Bi.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return to(this.heightMap.lineAt(this.scaler.fromDOM(e),Bi.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return to(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class $i{constructor(e,t){this.from=e,this.to=t}}function Qi(e,t,n){let r=[],i=e,o=0;return St.spans(n.facet(Cr),e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i),{total:o,ranges:r}}function Ji({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:i}=t[e],o=i-n;if(r<=o)return n+r;r-=o}}function Gi(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}function Yi(e,t,n){for(let r=0;r<e.length;r++){let i=e[r];if(i.from<n&&i.to>t){let o=[];i.from<t&&o.push({from:i.from,to:t}),i.to>n&&o.push({from:n,to:i.to}),e.splice(r,1,...o),r+=o.length-1}}}function Xi(e,t){for(let n of e)if(t(n))return n}const Zi={toDOM:e=>e,fromDOM:e=>e,scale:1};class eo{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map((({from:n,to:i})=>{let o=t.lineAt(n,Bi.ByPos,e,0,0).top,s=t.lineAt(i,Bi.ByPos,e,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=o+(e.top-i)*this.scale,o=e.domBottom=e.domTop+(e.bottom-e.top),i=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}}function to(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new Ni(e.from,e.length,n,r-n,Array.isArray(e.type)?e.type.map((e=>to(e,t))):e.type)}const no=Se.define({combine:e=>e.join(" ")}),ro=Se.define({combine:e=>e.indexOf(!0)>-1}),io=gt.newName(),oo=gt.newName(),so=gt.newName(),ao={"&light":"."+oo,"&dark":"."+so};function lo(e,t,n){return new gt(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t})}const co=lo("."+io,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ao),uo={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ho=On.ie&&On.ie_version<=11;class fo{constructor(e,t,n){this.view=e,this.onChange=t,this.onScrollChanged=n,this.active=!1,this.selectionRange=new nn,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(On.ie&&On.ie_version<=11||On.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),ho&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()})),this.resize.observe(e.scrollDOM)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,n=this.selectionRange;if(t.state.facet(pr)?t.root.activeElement!=this.dom:!$t(t.dom,n))return;let r=n.anchorNode&&t.docView.nearest(n.anchorNode);r&&r.ignoreEvent(e)||((On.ie&&On.ie_version<=11||On.android&&On.chrome)&&!t.state.selection.main.empty&&n.focusNode&&Jt(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=Kt(e),n=On.safari&&11==e.nodeType&&function(){let e=document.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}()==this.view.contentDOM&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);Jt(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]);return{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this.view)||t;return!this.selectionRange.eq(n)&&(this.selectionRange.setRange(n),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,uo),ho&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ho&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame((()=>{let e=this.delayedAndroidKey;this.delayedAndroidKey=null;let t=this.view.state;ln(this.view.contentDOM,e.key,e.keyCode)?this.processRecords():this.flush(),this.view.state==t&&this.view.update([])})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let t of this.observer.takeRecords())e.push(t);e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&$t(this.dom,this.selectionRange);if(t<0&&!i)return;this.selectionChanged=!1;let o=this.view.state;this.onChange(t,n,r),this.view.state==o&&this.view.update([])}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let n=po(t,e.previousSibling||e.target.previousSibling,-1),r=po(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function po(e,t,n){for(;t;){let r=fn.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function mo(e,t,n,r){let i,o,s=e.state.selection.main;if(t>-1){let r=e.docView.domBoundsAround(t,n,0);if(!r||e.state.readOnly)return;let{from:a,to:l}=r,c=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;n&&(t.push(new Kr(n,r)),i==n&&o==r||t.push(new Kr(i,o)));return t}(e),u=new jr(c,e.state);u.readRange(r.startDOM,r.endDOM);let h=s.from,f=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||On.android&&u.text.length<l-a)&&(h=s.to,f="end");let d=function(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){n-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.length<t.length){o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o}else if(a<o){o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}(e.state.doc.sliceString(a,l,""),u.text,h-a,f);d&&(On.chrome&&13==e.inputState.lastKeyCode&&d.toB==d.from+2&&""==u.text.slice(d.from,d.toB)&&d.toB--,i={from:a+d.from,to:a+d.toA,insert:Z.of(u.text.slice(d.from,d.toB).split(""))}),o=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?we.single(n+t,r+t):null}(c,a)}else if(e.hasFocus||!e.state.facet(pr)){let t=e.observer.selectionRange,{impreciseHead:n,impreciseAnchor:r}=e.docView,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!qt(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),a=r&&r.node==t.anchorNode&&r.offset==t.anchorOffset||!qt(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);i==s.head&&a==s.anchor||(o=we.single(a,i))}if(i||o)if(!i&&r&&!s.empty&&o&&o.main.empty?i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4&&(i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,s.to))}),i){let t=e.state;if(On.ios&&e.inputState.flushIOSKey(e))return;if(On.android&&(i.from==s.from&&i.to==s.to&&1==i.insert.length&&2==i.insert.lines&&ln(e.contentDOM,"Enter",13)||i.from==s.from-1&&i.to==s.to&&0==i.insert.length&&ln(e.contentDOM,"Backspace",8)||i.from==s.from&&i.to==s.to+1&&0==i.insert.length&&ln(e.contentDOM,"Delete",46)))return;let n,r=i.insert.toString();if(e.state.facet(lr).some((t=>t(e,i.from,i.to,r))))return;if(e.inputState.composing>=0&&e.inputState.composing++,i.from>=s.from&&i.to<=s.to&&i.to-i.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&e.inputState.composing<0){let r=s.from<i.from?t.sliceDoc(s.from,i.from):"",o=s.to>i.to?t.sliceDoc(i.to,s.to):"";n=t.replaceSelection(e.state.toText(r+i.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let r=t.changes(i),a=o&&!t.selection.main.eq(o.main)&&o.main.to<=r.newLength?o.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&i.to<=s.to&&i.to>=s.to-10){let o=e.state.sliceDoc(i.from,i.to),l=Qr(e)||e.state.doc.lineAt(s.head),c=s.to-i.to,u=s.to-s.from;n=t.changeByRange((n=>{if(n.from==s.from&&n.to==s.to)return{changes:r,range:a||n.map(r)};let h=n.to-c,f=h-o.length;if(n.to-n.from!=u||e.state.sliceDoc(f,h)!=o||l&&n.to>=l.from&&n.from<=l.to)return{range:n};let d=t.changes({from:f,to:h,insert:i.insert}),p=n.to-s.to;return{changes:d,range:a?we.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(d)}}))}else n={changes:r,selection:a&&t.selection.replaceRange(a)}}let a="input.type";e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(n,{scrollIntoView:!0,userEvent:a})}else if(o&&!o.main.eq(s)){let t=!1,n="select";e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:t,userEvent:n})}}class go{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this.root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new qi(e.state||ht.create()),this.plugins=this.state.facet(yr).map((e=>new kr(e)));for(let e of this.plugins)e.update(this);this.observer=new fo(this,((e,t,n)=>{mo(this,e,t,n)}),(e=>{this.inputState.runScrollHandlers(this,e),this.observer.intersecting&&this.measure()})),this.inputState=new ci(this),this.docView=new qr(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof et?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=this.state;for(let t of e){if(t.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=t.state}if(this.destroyed)return void(this.viewState.state=r);if(r.facet(ht.phrases)!=this.state.facet(ht.phrases))return this.setState(r);t=new Er(this,r,e);let i=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(i&&(i=i.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;i=new hr(e.empty?e:we.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(cr)?i=new hr(e.value):e.is(ur)?i=new hr(e.value,"center"):e.is(fr)&&(i=e.value)}this.viewState.update(t,i),this.bidiCache=bo.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(Mr)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(no)!=t.state.facet(no)&&(this.viewState.mustMeasureContent=!0),(n||i||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(ar))e(t)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new qi(e),this.plugins=e.facet(yr).map((e=>new kr(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new qr(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(yr),n=e.state.facet(yr);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new kr(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let e=0;;e++){this.updateState=1;let n=this.viewport,r=this.viewState.measure(this);if(!r&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let i=[];4&r||([this.measureRequests,i]=[i,this.measureRequests]);let o=i.map((e=>{try{return e.read(this)}catch(e){return dr(this.state,e),wo}})),s=new Er(this,this.state),a=!1,l=!1;s.flags|=r,t?t.flags|=r:t=s,this.updateState=2,s.empty||(this.updatePlugins(s),this.inputState.update(s),this.updateAttrs(),a=this.docView.update(s));for(let e=0;e<i.length;e++)if(o[e]!=wo)try{let t=i[e];t.write&&t.write(o[e],this)}catch(e){dr(this.state,e)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=!0),a&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!l&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(ar))e(t)}get themeClasses(){return io+" "+(this.state.facet(ro)?so:oo)+" "+this.state.facet(no)}updateAttrs(){let e=ko(this,xr,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(pr)?"true":"false",class:"cm-content",style:`${On.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),ko(this,Sr,t),this.observer.ignore((()=>{Wn(this.contentDOM,this.contentAttrs,t),Wn(this.dom,this.editorAttrs,e)})),this.editorAttrs=e,this.contentAttrs=t}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(go.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(Mr),gt.mount(this.root,this.styleModules.concat(co).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}pluginField(e){let t=[];for(let n of this.plugins)n.update(this).takeField(e,t);return t}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}blockAtHeight(e,t){let n=yo(t,this);return this.elementAtHeight(e-n).moveY(n)}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}visualLineAtHeight(e,t){let n=yo(t,this);return this.lineBlockAtHeight(e-n).moveY(n)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}viewportLines(e,t){let n=yo(t,this);for(let t of this.viewportLineBlocks)e(t.moveY(n))}get viewportLineBlocks(){return this.viewState.viewportLines}visualLineAt(e,t=0){return this.lineBlockAt(e).moveY(t+this.viewState.paddingTop)}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return li(this,e,ai(this,e,t,n))}moveByGroup(e,t){return li(this,e,ai(this,e,t,(t=>function(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==at.Space&&(i=t),i==t}}(this,e.head,t))))}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.posAtCoords({x:n==(e.textDirection==Or.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=r)return we.cursor(r,n?-1:1)}let s=Yn.find(e.docView,t.head),a=s?n?s.posAtEnd:s.posAtStart:n?i.to:i.from;return we.cursor(a,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return li(this,e,function(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return we.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i-u);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+u}let h=l.left+a,f=null!=r?r:e.defaultLineHeight>>1;for(let n=0;;n+=10){let r=s+(f+n)*o,c=oi(e,{x:h,y:r},!1,o);if(r<l.top||r>l.bottom||(o<0?c<i:c>i))return we.cursor(c,t.assoc,void 0,a)}}(this,e,t,n))}scrollPosIntoView(e){this.dispatch({effects:cr.of(we.cursor(e))})}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),oi(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return en(n,i[_r.find(i,e-r.from,-1,t)].dir==Or.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>vo)return Vr(e.length);let t=this.textDirection;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let n=Fr(e.text,this.textDirection);return this.bidiCache.push(new bo(e.from,e.to,t,n)),n}get hasFocus(){var e;return(document.hasFocus()||On.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{sn(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return fr.of(new hr("number"==typeof e?we.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return wr.define((()=>({})),{eventHandlers:e})}static theme(e,t){let n=gt.newName(),r=[no.of(n),Mr.of(lo(`.${n}`,e))];return t&&t.dark&&r.push(ro.of(!0)),r}static baseTheme(e){return Ie.lowest(Mr.of(lo("."+io,e,ao)))}}go.scrollTo=cr,go.centerOn=ur,go.styleModule=Mr,go.inputHandler=lr,go.exceptionSink=sr,go.updateListener=ar,go.editable=pr,go.mouseSelectionStyle=or,go.dragMovesSelection=ir,go.clickAddsSelectionRange=rr,go.decorations=Cr,go.darkTheme=ro,go.contentAttributes=Sr,go.editorAttributes=xr,go.lineWrapping=go.contentAttributes.of({class:"cm-lineWrapping"}),go.announce=Ze.define();const vo=4096;function yo(e,t){return(null==e?t.contentDOM.getBoundingClientRect().top:e)+t.viewState.paddingTop}const wo={};class bo{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:Or.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new bo(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return n}}function ko(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&Vn(o,n)}return n}const xo=On.mac?"mac":On.windows?"win":On.linux?"linux":"key";function So(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const Co=go.domEventHandlers({keydown:(e,t)=>Lo(Eo(t.state),e,t,"editor")}),Mo=Se.define({enables:Co}),Ao=new WeakMap;function Eo(e){let t=e.facet(Mo),n=Ao.get(t);return n||Ao.set(t,n=function(e,t=xo){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s)=>{let a=n[e]||(n[e]=Object.create(null)),l=r.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let e=0;e<n.length-1;++e){const a=n[e];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<l.length;t++){let n=l.slice(0,t).join(" ");i(n,!0),a[n]||(a[n]={preventDefault:!0,commands:[t=>{let r=Oo={view:t,prefix:n,scope:e};return setTimeout((()=>{Oo==r&&(Oo=null)}),4e3),!0}]})}let c=l.join(" ");i(c,!1);let u=a[c]||(a[c]={preventDefault:!1,commands:[]});u.commands.push(o),s&&(u.preventDefault=!0)};for(let n of e){let e=n[t]||n.key;if(e)for(let t of n.scope?n.scope.split(" "):["editor"])o(t,e,n.run,n.preventDefault),n.shift&&o(t,"Shift-"+e,n.shift,n.preventDefault)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}let Oo=null;function Lo(e,t,n,r){let i=function(e){var t=!(Wt&&(e.ctrlKey||e.altKey||e.metaKey)||(zt||Ht)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?It:Bt)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=1==i.length&&" "!=i,s="",a=!1;Oo&&Oo.view==n&&Oo.scope==r&&(s=Oo.prefix+" ",(a=hi.indexOf(t.keyCode)<0)&&(Oo=null));let l,c=e=>{if(e){for(let t of e.commands)if(t(n))return!0;e.preventDefault&&(a=!0)}return!1},u=e[r];if(u){if(c(u[s+So(i,t,!o)]))return!0;if(o&&(t.shiftKey||t.altKey||t.metaKey)&&(l=Bt[t.keyCode])&&l!=i){if(c(u[s+So(l,t,!0)]))return!0}else if(o&&t.shiftKey&&c(u[s+So(i,t,!0)]))return!0}return a}const To=!On.ios,Ro=Se.define({combine:e=>ft(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function Do(e={}){return[Ro.of(e),No,Io]}class Po{constructor(e,t,n,r,i){this.left=e,this.top=t,this.width=n,this.height=r,this.className=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const No=wr.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Ro).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(Ro)!=e.state.facet(Ro);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some((e=>e.scrollIntoView))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(Ro),n=e.selection.ranges.map((e=>e.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let n=Math.max(t.from,e.viewport.from),r=Math.min(t.to,e.viewport.to),i=e.textDirection==Or.LTR,o=e.contentDOM,s=o.getBoundingClientRect(),a=_o(e),l=window.getComputedStyle(o.firstChild),c=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),u=s.right-parseInt(l.paddingRight),h=Fo(e,n),f=Fo(e,r),d=h.type==Un.Text?h:null,p=f.type==Un.Text?f:null;e.lineWrapping&&(d&&(d=zo(e,n,d)),p&&(p=zo(e,r,p)));if(d&&p&&d.from==p.from)return g(v(t.from,t.to,d));{let n=d?v(t.from,null,d):y(h,!1),r=p?v(null,t.to,p):y(f,!0),i=[];return(d||h).to<(p||f).from-1?i.push(m(c,n.bottom,u,r.top)):n.bottom<r.top&&e.elementAtHeight((n.bottom+r.top)/2).type==Un.Text&&(n.bottom=r.top=(n.bottom+r.top)/2),g(n).concat(i).concat(g(r))}function m(e,t,n,r){return new Po(e-a.left,t-a.top-.01,n-e,r-t+.01,"cm-selectionBackground")}function g({top:e,bottom:t,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(m(n[i],e,n[i+1],t));return r}function v(t,n,r){let o=1e9,s=-1e9,a=[];function l(t,n,l,h,f){let d=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(l,l==r.from?2:-2);o=Math.min(d.top,p.top,o),s=Math.max(d.bottom,p.bottom,s),f==Or.LTR?a.push(i&&n?c:d.left,i&&h?u:p.right):a.push(!i&&h?c:p.left,!i&&n?u:d.right)}let h=null!=t?t:r.from,f=null!=n?n:r.to;for(let r of e.visibleRanges)if(r.to>h&&r.from<f)for(let i=Math.max(r.from,h),o=Math.min(r.to,f);;){let r=e.state.doc.lineAt(i);for(let s of e.bidiSpans(r)){let e=s.from+r.from,a=s.to+r.from;if(e>=o)break;a>i&&l(Math.max(e,i),null==t&&e<=h,Math.min(a,o),null==n&&a>=f,s.dir)}if(i=r.to+1,i>=o)break}return 0==a.length&&l(h,null==t,f,null==n,e.textDirection),{top:o,bottom:s,horizontal:a}}function y(e,t){let n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(this.view,e))).reduce(((e,t)=>e.concat(t))),r=[];for(let n of e.selection.ranges){let i=n==e.selection.main;if(n.empty?!i||To:t.drawRangeCursor){let e=Vo(this.view,n,i);e&&r.push(e)}}return{rangePieces:n,cursors:r}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some(((e,t)=>!e.eq(this.rangePieces[t])))){this.selectionLayer.textContent="";for(let t of e)this.selectionLayer.appendChild(t.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some(((e,t)=>!e.eq(this.cursors[t])))){let e=this.cursorLayer.children;if(e.length!==t.length){this.cursorLayer.textContent="";for(const e of t)this.cursorLayer.appendChild(e.draw())}else t.forEach(((t,n)=>t.adjust(e[n])));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Bo={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};To&&(Bo[".cm-line"].caretColor="transparent !important");const Io=Ie.highest(go.theme(Bo));function _o(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Or.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function zo(e,t,n){let r=we.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:Un.Text}}function Fo(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==Un.Text))return e;return n}function Vo(e,t,n){let r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return null;let i=_o(e);return new Po(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const Ho=Ze.define({map:(e,t)=>null==e?null:t.mapPos(e)}),Wo=Le.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(Ho)?t.value:e),e))}),jo=wr.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(Wo);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Wo)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(Wo),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(Wo)!=e&&this.view.dispatch({effects:Ho.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Uo(e,t,n,r,i){t.lastIndex=0;for(let o,s=e.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)i(a+o.index,a+o.index+o[0].length,o)}class Ko{constructor(e){let{regexp:t,decoration:n,boundary:r,maxLength:i=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco="function"==typeof n?n:()=>n,this.boundary=r,this.maxLength=i}createDeco(e){let t=new Ct;for(let{from:n,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))Uo(e.state.doc,this.regexp,n,r,((n,r,i)=>t.add(n,r,this.getDeco(i,e,n))));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,i,o,s)=>{s>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=e.state.doc.lineAt(o),r=n.to<s?e.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,u=[];if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;){let t=c.index+n.from;u.push(this.getDeco(c,e,t).range(t,t+c[0].length))}else Uo(e.state.doc,this.regexp,a,l,((t,n,r)=>u.push(this.getDeco(r,e,t).range(t,n))));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:u})}}return t}}const qo=null!=/x/.unicode?"gu":"g",$o=new RegExp("[\0-\b\n--\u2028\u2029\ufeff-]",qo),Qo={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Jo=null;const Go=Se.define({combine(e){let t=ft(e,{render:null,specialChars:$o,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Jo&&"undefined"!=typeof document&&document.body){let t=document.body.style;Jo=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Jo||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,qo)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,qo)),t}});function Yo(e={}){return[Go.of(e),Xo||(Xo=wr.fromClass(class{constructor(e){this.view=e,this.decorations=Kn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(Go)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Ko({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=J(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=X(e.text,t,r-e.from);return Kn.replace({widget:new es((t-o%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=Kn.replace({widget:new Zo(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(Go);e.startState.facet(Go)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let Xo=null;class Zo extends jn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=(n=this.code)>=32?"":10==n?"":String.fromCharCode(9216+n);var n;let r=e.state.phrase("Control character")+" "+(Qo[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let o=document.createElement("span");return o.textContent=t,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class es extends jn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const ts=Kn.line({class:"cm-activeLine"}),ns=wr.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){if(!r.empty)return Kn.none;let i=e.lineBlockAt(r.head);i.from>t&&(n.push(ts.range(i.from)),t=i.from)}return Kn.set(n)}},{decorations:e=>e.decorations});const rs=Ge.define(),is=Ge.define(),os=Se.define(),ss=Se.define({combine:e=>ft(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})});const as=Le.define({create:()=>Ss.empty,update(e,t){let n=t.state.facet(ss),r=t.annotation(rs);if(r){let i=t.docChanged?we.single(function(e){let t=0;return e.iterChangedRanges(((e,n)=>t=n)),t}(t.changes)):void 0,o=ps.fromTransaction(t,i),s=r.side,a=0==s?e.undone:e.done;return a=o?ms(a,a.length,n.minDepth,o):ys(a,t.startState.selection),new Ss(0==s?r.rest:a,0==s?a:r.rest)}let i=t.annotation(is);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(et.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=ps.fromTransaction(t),s=t.annotation(et.time),a=t.annotation(et.userEvent);return o?e=e.addChanges(o,s,a,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new Ss(e.done.map(ps.fromJSON),e.undone.map(ps.fromJSON))});function ls(e={}){return[as,ss.of(e),go.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?us:"historyRedo"==e.inputType?hs:null;return!!n&&(e.preventDefault(),n(t))}})]}function cs(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(as,!1);if(!i)return!1;let o=i.pop(e,n,t);return!!o&&(r(o),!0)}}const us=cs(0,!1),hs=cs(1,!1),fs=cs(0,!0),ds=cs(1,!0);class ps{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new ps(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new ps(e.changes&&he.fromJSON(e.changes),[],e.mapped&&ue.fromJSON(e.mapped),e.startSelection&&we.fromJSON(e.startSelection),e.selectionsAfter.map(we.fromJSON))}static fromTransaction(e,t){let n=vs;for(let t of e.startState.facet(os)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new ps(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,vs)}static selection(e){return new ps(void 0,vs,void 0,void 0,e)}}function ms(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function gs(e,t){return e.length?t.length?e.concat(t):e:t}const vs=[];function ys(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),ms(e,e.length-1,1e9,n.setSelAfter(r)))}return[ps.selection([t])]}function ws(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function bs(e,t){if(!e.length)return e;let n=e.length,r=vs;for(;n;){let i=ks(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[ps.selection(r)]:vs}function ks(e,t,n){let r=gs(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):vs,n);if(!e.changes)return ps.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new ps(i,Ze.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const xs=/^(input\.type|delete)($|\.)/;class Ss{constructor(e,t,n=0,r){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new Ss(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||xs.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r&&function(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,o)=>{for(let e=0;e<n.length;){let t=n[e++],s=n[e++];o>=t&&i<=s&&(r=!0)}})),r}(s.changes,e.changes)||"input.type.compose"==n)?ms(o,o.length-1,i,new ps(e.changes.compose(s.changes),gs(e.effects,s.effects),s.mapped,s.startSelection,vs)):ms(o,o.length,i,e),new Ss(o,vs,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:vs;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(o=i[i.length-1],s=e,o.ranges.length==s.ranges.length&&0===o.ranges.filter(((e,t)=>e.empty!=s.ranges[t].empty)).length)?this:new Ss(ys(this.done,e),this.undone,t,n);var o,s}addMapping(e){return new Ss(bs(this.done,e),bs(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:rs.of({side:e,rest:ws(r)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?vs:r.slice(0,r.length-1);return i.mapped&&(n=bs(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:rs.of({side:e,rest:n}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}Ss.empty=new Ss(vs,vs);const Cs=[{key:"Mod-z",run:us,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:hs,preventDefault:!0},{key:"Mod-u",run:fs,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:ds,preventDefault:!0}],Ms=1024;let As=0;class Es{constructor(e,t){this.from=e,this.to=t}}class Os{constructor(e={}){this.id=As++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Ts.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}Os.closedBy=new Os({deserialize:e=>e.split(" ")}),Os.openedBy=new Os({deserialize:e=>e.split(" ")}),Os.group=new Os({deserialize:e=>e.split(" ")}),Os.contextHash=new Os({perNode:!0}),Os.lookAhead=new Os({perNode:!0}),Os.mounted=new Os({perNode:!0});const Ls=Object.create(null);class Ts{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Ls,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new Ts(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Os.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(Os.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}Ts.none=new Ts("",Object.create(null),0,8);const Rs=new WeakMap,Ds=new WeakMap;class Ps{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(Os.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e,t=0){let n=null!=e&&Rs.get(this)||this.topNode,r=new js(n);return null!=e&&(r.moveTo(e,t),Rs.set(this,r._tree)),r}fullCursor(){return new js(this.topNode,1)}get topNode(){return new Fs(this,0,0,null)}resolve(e,t=0){let n=zs(Rs.get(this)||this.topNode,e,t,!1);return Rs.set(this,n),n}resolveInner(e,t=0){let n=zs(Ds.get(this)||this.topNode,e,t,!0);return Ds.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e;for(let e=this.cursor(),o=()=>e.node;;){let s=!1;if(e.from<=i&&e.to>=r&&(e.type.isAnonymous||!1!==t(e.type,e.from,e.to,o))){if(e.firstChild())continue;e.type.isAnonymous||(s=!0)}for(;s&&n&&n(e.type,e.from,e.to,o),s=e.type.isAnonymous,!e.nextSibling();){if(!e.parent())return;s=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:$s(Ts.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new Ps(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new Ps(Ts.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=Ms,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new Ns(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,v,y){let{id:w,start:b,end:k,size:x}=a,S=u;for(;x<0;){if(a.next(),-1==x){let t=o[w];return n.push(t),void v.push(b-e)}if(-3==x)return void(c=w);if(-4==x)return void(u=w);throw new RangeError(`Unrecognized record size: ${x}`)}let C,M,A=l[w],E=b-e;if(k-b<=i&&(M=m(a.pos-t,y))){let t=new Uint16Array(M.size-M.skip),n=a.pos-M.size,i=t.length;for(;a.pos>n;)i=g(M.start,t,i);C=new Bs(t,k-M.start,r),E=M.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],r=w>=s?w:-1,o=0,l=k;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(d(t,n,b,o,a.end,l,r,S),o=t.length,l=a.end),a.next()):h(b,e,t,n,r);if(r>=0&&o>0&&o<t.length&&d(t,n,b,o,b,l,r,S),t.reverse(),n.reverse(),r>-1&&o>0){let e=f(A);C=$s(A,t,n,0,t.length,0,k-b,e,e)}else C=p(A,t,n,k-b,S-k)}n.push(C),v.push(E)}function f(e){return(t,n,r)=>{let i,o,s=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof Ps){if(!a&&i.type==e&&i.length==r)return i;(o=i.prop(Os.lookAhead))&&(s=n[a]+i.length+o)}return p(e,t,n,r,s)}}function d(e,t,n,i,o,s,a,l){let c=[],u=[];for(;e.length>i;)c.push(e.pop()),u.push(t.pop()+n-o);e.push(p(r.types[a],c,u,s-o,l-s)),t.push(o-n)}function p(e,t,n,r,i=0,o){if(c){let e=[Os.contextHash,c];o=o?[e].concat(o):[e]}if(i>25){let e=[Os.lookAhead,i];o=o?[e].concat(o):[e]}return new Ps(e,t,n,r,o)}function m(e,t){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=n.id>=s?4:0,f=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=s&&(h+=4);n.next()}o=f,r+=e,l+=h}return(t<0||r==e)&&(u.size=r,u.start=o,u.skip=l),u.size>4?u:void 0}function g(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=g(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let v=[],y=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,v,y,-1);let w=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new Ps(l[e.topID],v.reverse(),y.reverse(),w)}(e)}}Ps.empty=new Ps(Ts.none,[],[],0);class Ns{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ns(this.buffer,this.index)}}class Bs{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Ts.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(Is(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n,r){let i=this.buffer,o=new Uint16Array(t-e);for(let r=e,s=0;r<t;)o[s++]=i[r++],o[s++]=i[r++]-n,o[s++]=i[r++]-n,o[s++]=i[r++]-e;return new Bs(o,r-n,this.set)}}function Is(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function _s(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function zs(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof Fs&&e.index<0?null:e.parent;if(!t)return e;e=t}if(r)for(let r=e,o=r.parent;o;r=o,o=r.parent)r instanceof Fs&&r.index<0&&(null===(i=o.enter(t,n,!0))||void 0===i?void 0:i.from)!=r.from&&(e=o);for(;;){let i=e.enter(t,n,r);if(!i)return e;e=i}}class Fs{constructor(e,t,n,r){this.node=e,this._from=t,this.index=n,this._parent=r}get type(){return this.node.type}get name(){return this.node.type.name}get from(){return this._from}get to(){return this._from+this.node.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o.node,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o._from;if(Is(r,n,c,c+l.length))if(l instanceof Bs){if(2&i)continue;let s=l.findChild(0,l.buffer.length,t,n-c,r);if(s>-1)return new Ws(new Hs(o,l,e,c),null,s)}else if(1&i||!l.type.isAnonymous||Us(l)){let s;if(!(1&i)&&l.props&&(s=l.prop(Os.mounted))&&!s.overlay)return new Fs(s.tree,c,e,o);let a=new Fs(l,c,e,o);return 1&i||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(1&i||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent.node.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this.node.children.length-1,-1,e,-2)}enter(e,t,n=!0,r=!0){let i;if(n&&(i=this.node.prop(Os.mounted))&&i.overlay){let n=e-this.from;for(let{from:e,to:r}of i.overlay)if((t>0?e<=n:e<n)&&(t<0?r>=n:r>n))return new Fs(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r?0:2)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get cursor(){return new js(this)}get tree(){return this.node}toTree(){return this.node}resolve(e,t=0){return zs(this,e,t,!1)}resolveInner(e,t=0){return zs(this,e,t,!0)}enterUnfinishedNodesBefore(e){return _s(this,e)}getChild(e,t=null,n=null){let r=Vs(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Vs(this,e,t,n)}toString(){return this.node.toString()}}function Vs(e,t,n,r){let i=e.cursor,o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}class Hs{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Ws{constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new Ws(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n,r=!0){if(!r)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Ws(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ws(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ws(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get cursor(){return new js(this)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1],s=n.buffer[this.index+2];e.push(n.slice(r,i,o,s)),t.push(0)}return new Ps(this.type,e,t,this.to-this.from)}resolve(e,t=0){return zs(this,e,t,!1)}resolveInner(e,t=0){return zs(this,e,t,!0)}enterUnfinishedNodesBefore(e){return _s(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=Vs(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Vs(this,e,t,n)}}class js{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Fs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof Fs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree.node.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=!0,r=!0){return this.buffer?!!r&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n&&!(1&this.mode),r))}parent(){if(!this.buffer)return this.yieldNode(1&this.mode?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=1&this.mode?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n.node.children.length;r!=i;r+=e){let e=n.node.children[r];if(1&this.mode||e instanceof Bs||!e.type.isAnonymous||Us(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new Ws(this.buffer,t,this.stack[e]);return this.bufferNode=new Ws(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree.node}}function Us(e){return e.children.some((e=>e instanceof Bs||!e.type.isAnonymous||Us(e)))}const Ks=new WeakMap;function qs(e,t){if(!e.isAnonymous||t instanceof Bs||t.type!=e)return 1;let n=Ks.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof Ps)){n=1;break}n+=qs(e,r)}Ks.set(t,n)}return n}function $s(e,t,n,r,i,o,s,a,l){let c=0;for(let n=r;n<i;n++)c+=qs(e,t[n]);let u=Math.ceil(1.5*c/8),h=[],f=[];return function t(n,r,i,s,a){for(let c=i;c<s;){let i=c,d=r[c],p=qs(e,n[c]);for(c++;c<s;c++){let t=qs(e,n[c]);if(p+t>=u)break;p+=t}if(c==i+1){if(p>u){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[c-1]+n[c-1].length-d;h.push($s(e,n,r,i,c,d,t,null,l))}f.push(d+a-o)}}(t,n,r,i,0),(a||l)(h,f,s)}class Qs{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new Qs(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new Qs(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class Js{startParse(e,t,n){return"string"==typeof e&&(e=new Gs(e)),n=n?n.length?n.map((e=>new Es(e.from,e.to))):[new Es(0,0)]:[new Es(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class Gs{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Os({perNode:!0});const Ys=new Os;class Xs{constructor(e,t,n,r=[]){this.data=e,this.topNode=n,ht.prototype.hasOwnProperty("tree")||Object.defineProperty(ht.prototype,"tree",{get(){return ea(this)}}),this.parser=t,this.extension=[la.of(this),ht.languageData.of(((e,t,n)=>e.facet(Zs(e,t,n))))].concat(r)}isActiveAt(e,t,n=-1){return Zs(e,t,n)==this.data}findRegions(e){let t=e.facet(la);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(Ys)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(Os.mounted);if(i){if(i.tree.prop(Ys)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof Ps&&r(i,e.positions[n]+t)}};return r(ea(e),0),n}get allowsNesting(){return!0}}function Zs(e,t,n){let r=e.facet(la);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let r=ea(e).topNode;r;r=r.enter(t,n,!0,!1))i=r.type.prop(Ys)||i;return i}Xs.setState=Ze.define();function ea(e){let t=e.field(Xs.state,!1);return t?t.tree:Ps.empty}class ta{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let na=null;class ra{constructor(e,t,n=[],r,i,o,s,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}startParse(){return this.parser.startParse(new ta(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ps.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;let r=Date.now()+e;for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let e=this.parse.advance();if(e){if(this.fragments=this.withoutTempSkipped(Qs.addTree(e,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=e,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(Date.now()>r)return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Qs.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=na;na=this;try{return e()}finally{na=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=ia(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=Qs.applyChanges(n,t),r=Ps.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new ra(this.parser,t,n,r,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=ia(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Js{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let t=na;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new Ps(Ts.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return na}}function ia(e,t,n){return Qs.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class oa{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new oa(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=new ra(e.facet(la).parser,e,[],Ps.empty,0,{from:0,to:t},[],null);return n.work(20,t)||n.takeTree(),new oa(n)}}Xs.state=Le.define({create:oa.init,update(e,t){for(let e of t.effects)if(e.is(Xs.setState))return e.value;return t.startState.facet(la)!=t.state.facet(la)?oa.init(t.state):e.apply(t)}});let sa=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(sa=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const aa=wr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Xs.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Xs.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=sa(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(Xs.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Math.min(this.chunkBudget,100,e?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work(o,r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Xs.setState.of(new oa(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>dr(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return this.working||this.workScheduled>0}},{eventHandlers:{focus(){this.scheduleWork()}}}),la=Se.define({combine:e=>e.length?e[0]:null,enables:[Xs.state,aa]});const ca=Se.define(),ua=Se.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function ha(e){let t=e.facet(ua);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function fa(e,t){let n="",r=e.tabSize;if(9==e.facet(ua).charCodeAt(0))for(;t>=r;)n+="\t",t-=r;for(let e=0;e<t;e++)n+=" ";return n}function da(e,t){e instanceof ht&&(e=new pa(e));for(let n of e.state.facet(ca)){let r=n(e,t);if(null!=r)return r}let n=ea(e.state);return n?function(e,t,n){return va(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,n,t):null}class pa{constructor(e,t={}){this.state=e,this.options=t,this.unit=ha(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return X(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const ma=new Os;function ga(e){let t=e.type.prop(ma);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(Os.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>ka(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?ya:null}function va(e,t,n){for(;e;e=e.parent){let r=ga(e);if(r)return r(new wa(n,t,e))}return null}function ya(){return 0}class wa extends pa{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(ba(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?va(e,this.pos,this.base):0}}function ba(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function ka(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let e=n.to;;){let i=t.childAfter(e);if(!i||i==r)return null;if(!i.type.isSkipped)return i.from<s?n:null;e=i.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const xa=Se.define(),Sa=new Os;function Ca(e,t,n){for(let r of e.facet(xa)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=ea(e);if(0==r.length)return null;let i=null;for(let o=r.resolveInner(n);o;o=o.parent){if(o.to<=n||o.from>n)continue;if(i&&o.from<t)break;let r=o.type.prop(Sa);if(r){let s=r(o,e);s&&s.from<=n&&s.from>=t&&s.to>n&&(i=s)}}return i}(e,t,n)}class Ma extends wt{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ma.prototype.elementClass="",Ma.prototype.toDOM=void 0,Ma.prototype.mapMode=ce.TrackBefore,Ma.prototype.startSide=Ma.prototype.endSide=-1,Ma.prototype.point=!0;const Aa=Se.define();const Ea=new class extends Ma{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Oa=Aa.compute(["selection"],(e=>{let t=[],n=-1;for(let r of e.selection.ranges)if(r.empty){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push(Ea.range(i)))}return St.of(t)}));function La(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const Ta=Ze.define({map:La}),Ra=Ze.define({map:La});function Da(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const Pa=Le.define({create:()=>Kn.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(Ta)&&!Ba(e,n.value.from,n.value.to)?e=e.update({add:[ja.range(n.value.from,n.value.to)]}):n.is(Ra)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>go.decorations.from(e)});function Na(e,t,n){var r;let i=null;return null===(r=e.field(Pa,!1))||void 0===r||r.between(t,n,((e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})})),i}function Ba(e,t,n){let r=!1;return e.between(t,t,((e,i)=>{e==t&&i==n&&(r=!0)})),r}function Ia(e,t){return e.field(Pa,!1)?t:t.concat(Ze.appendConfig.of(Wa()))}const _a=e=>{for(let t of Da(e)){let n=Ca(e.state,t.from,t.to);if(n)return e.dispatch({effects:Ia(e.state,[Ta.of(n),za(e,n)])}),!0}return!1};function za(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return go.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}const Fa=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:_a},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(Pa,!1))return!1;let t=[];for(let n of Da(e)){let r=Na(e.state,n.from,n.to);r&&t.push(Ra.of(r),za(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=Ca(t,i.from,i.to);o&&n.push(Ta.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:Ia(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(Pa,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(Ra.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],Va={placeholderDOM:null,placeholderText:""},Ha=Se.define({combine:e=>ft(e,Va)});function Wa(e){let t=[Pa,Ua];return e&&t.push(Ha.of(e)),t}const ja=Kn.replace({widget:new class extends jn{toDOM(e){let{state:t}=e,n=t.facet(Ha),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=Na(e.state,n.from,n.to);r&&e.dispatch({effects:Ra.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",t.phrase("folded code")),i.title=t.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}});const Ua=go.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),Ka=go.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),qa=Se.define({combine:e=>ft(e,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4})}),$a=Kn.mark({class:"cm-matchingBracket"}),Qa=Kn.mark({class:"cm-nonmatchingBracket"}),Ja=[Le.define({create:()=>Kn.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(qa);for(let e of t.state.selection.ranges){if(!e.empty)continue;let i=Xa(t.state,e.head,-1,r)||e.head>0&&Xa(t.state,e.head-1,1,r)||r.afterCursor&&(Xa(t.state,e.head,1,r)||e.head<t.state.doc.length&&Xa(t.state,e.head+1,-1,r));if(!i)continue;let o=i.matched?$a:Qa;n.push(o.range(i.start.from,i.start.to)),i.end&&n.push(o.range(i.end.from,i.end.to))}return Kn.set(n,!0)},provide:e=>go.decorations.from(e)}),Ka];function Ga(e={}){return[qa.of(e),Ja]}function Ya(e,t,n){let r=e.prop(t<0?Os.openedBy:Os.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function Xa(e,t,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||"()[]{}",s=ea(e),a=s.resolveInner(t,n);for(let r=a;r;r=r.parent){let i=Ya(r.type,n,o);if(i&&r.from<r.to)return Za(e,t,n,r,i,o)}return function(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let e=0;!u.next().done&&e<=o;){let o=u.value;n<0&&(e+=o.length);let a=t+e*n;for(let e=n>0?0:o.length-1,t=n>0?o.length:-1;e!=t;e+=n){let t=s.indexOf(o[e]);if(!(t<0||r.resolve(a+e,1).type!=i))if(t%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};h--}}n>0&&(e+=o.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,s,a.type,i,o)}function Za(e,t,n,r,i,o){let s=r.parent,a={from:r.from,to:r.to},l=0,c=null==s?void 0:s.cursor;if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==l&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(Ya(c.type,n,o))l++;else if(Ya(c.type,-n,o)&&(l--,0==l))return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1}}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function el(e,t){return we.create(e.ranges.map(t),e.mainIndex)}function tl(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function nl({state:e,dispatch:t},n){let r=el(e.selection,n);return!r.eq(e.selection)&&(t(tl(e,r)),!0)}function rl(e,t){return we.cursor(t?e.to:e.from)}function il(e,t){return nl(e,(n=>n.empty?e.moveByChar(n,t):rl(n,t)))}const ol=e=>il(e,e.textDirection!=Or.LTR),sl=e=>il(e,e.textDirection==Or.LTR);function al(e,t){return nl(e,(n=>n.empty?e.moveByGroup(n,t):rl(n,t)))}function ll(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function cl(e,t,n){let r,i,o=ea(e).resolveInner(t.head),s=n?Os.closedBy:Os.openedBy;for(let r=t.head;;){let t=n?o.childAfter(r):o.childBefore(r);if(!t)break;ll(e,t,s)?o=t:r=n?t.to:t.from}return i=o.type.prop(s)&&(r=n?Xa(e,o.from,1):Xa(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,we.cursor(i,n?-1:1)}function ul(e,t){return nl(e,(n=>{if(!n.empty)return rl(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const hl=e=>ul(e,!1),fl=e=>ul(e,!0);function dl(e,t){let{state:n}=e,r=el(n.selection,(n=>n.empty?e.moveVertically(n,t,e.dom.clientHeight):rl(n,t)));if(r.eq(n.selection))return!1;let i=e.coordsAtPos(n.selection.main.head),o=e.scrollDOM.getBoundingClientRect();return e.dispatch(tl(n,r),{effects:i&&i.top>o.top&&i.bottom<o.bottom?go.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-o.top}):void 0}),!0}const pl=e=>dl(e,!1),ml=e=>dl(e,!0);function gl(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=we.cursor(r.from+n))}return i}const vl=e=>nl(e,(t=>gl(e,t,!0))),yl=e=>nl(e,(t=>gl(e,t,!1)));function wl(e,t,n){let r=!1,i=el(e.selection,(t=>{let i=Xa(e,t.head,-1)||Xa(e,t.head,1)||t.head>0&&Xa(e,t.head-1,1)||t.head<e.doc.length&&Xa(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?we.range(t.anchor,o):we.cursor(o)}));return!!r&&(t(tl(e,i)),!0)}function bl(e,t){let n=el(e.state.selection,(e=>{let n=t(e);return we.range(e.anchor,n.head,n.goalColumn)}));return!n.eq(e.state.selection)&&(e.dispatch(tl(e.state,n)),!0)}function kl(e,t){return bl(e,(n=>e.moveByChar(n,t)))}const xl=e=>kl(e,e.textDirection!=Or.LTR),Sl=e=>kl(e,e.textDirection==Or.LTR);function Cl(e,t){return bl(e,(n=>e.moveByGroup(n,t)))}function Ml(e,t){return bl(e,(n=>e.moveVertically(n,t)))}const Al=e=>Ml(e,!1),El=e=>Ml(e,!0);function Ol(e,t){return bl(e,(n=>e.moveVertically(n,t,e.dom.clientHeight)))}const Ll=e=>Ol(e,!1),Tl=e=>Ol(e,!0),Rl=e=>bl(e,(t=>gl(e,t,!0))),Dl=e=>bl(e,(t=>gl(e,t,!1))),Pl=({state:e,dispatch:t})=>(t(tl(e,{anchor:0})),!0),Nl=({state:e,dispatch:t})=>(t(tl(e,{anchor:e.doc.length})),!0),Bl=({state:e,dispatch:t})=>(t(tl(e,{anchor:e.selection.main.anchor,head:0})),!0),Il=({state:e,dispatch:t})=>(t(tl(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function _l({state:e,dispatch:t},n){if(e.readOnly)return!1;let r="delete.selection",i=e.changeByRange((e=>{let{from:t,to:i}=e;if(t==i){let e=n(t);e<t?r="delete.backward":e>t&&(r="delete.forward"),t=Math.min(t,e),i=Math.max(i,e)}return t==i?{range:e}:{changes:{from:t,to:i},range:we.cursor(t)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:r})),!0)}function zl(e,t,n){if(e instanceof go)for(let r of e.pluginField(gr.atomicRanges))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const Fl=(e,t)=>_l(e,(n=>{let r,i,{state:o}=e,s=o.doc.lineAt(n);if(!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let e=X(r,o.tabSize)%ha(o)||ha(o);for(let t=0;t<e&&" "==r[r.length-1-t];t++)n--;i=n}else i=U(s.text,n-s.from,t,t)+s.from,i==n&&s.number!=(t?o.doc.lines:1)&&(i+=t?1:-1);return zl(e,i,t)})),Vl=e=>Fl(e,!1),Hl=e=>Fl(e,!0),Wl=(e,t)=>_l(e,(n=>{let r=n,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=U(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==n||(e=c),r=a}return zl(e,r,t)})),jl=e=>Wl(e,!1),Ul=e=>_l(e,(t=>{let n=e.lineBlockAt(t).to;return zl(e,t<n?n:Math.min(e.state.doc.length,t+1),!0)}));function Kl(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function ql(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let t of Kl(e)){if(n?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(n?t.to+1:t.from-1),s=o.length+1;if(n){r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak});for(let n of t.ranges)i.push(we.range(Math.min(e.doc.length,n.anchor+s),Math.min(e.doc.length,n.head+s)))}else{r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text});for(let e of t.ranges)i.push(we.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:we.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function $l(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of Kl(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Ql=Jl(!1);function Jl(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange((n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=ea(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(Os.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let a=new pa(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=da(a,r);for(null==l&&(l=/^\s*/.exec(t.doc.lineAt(r).text)[0].length);i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",fa(t,l)];return s&&c.push(fa(t,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:Z.of(c)},range:we.cursor(r+1+c[1].length)}}));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Gl(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let o=r.from;o<=r.to;){let s=e.doc.lineAt(o);s.number>n&&(r.empty||r.to>s.from)&&(t(s,i,r),n=s.number),o=s.to+1}let o=e.changes(i);return{changes:i,range:we.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const Yl=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new pa(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=Gl(e,((t,i,o)=>{let s=da(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=fa(e,s);(a!=l||o.from<t.from+a.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))}));return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0},Xl=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Gl(e,((t,n)=>{n.push({from:t.from,insert:e.facet(ua)})})),{userEvent:"input.indent"})),!0),Zl=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Gl(e,((t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=X(r,e.tabSize),o=0,s=fa(e,Math.max(0,i-ha(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0),ec=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>nl(e,(t=>cl(e.state,t,e.textDirection!=Or.LTR))),shift:e=>bl(e,(t=>cl(e.state,t,e.textDirection!=Or.LTR)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>nl(e,(t=>cl(e.state,t,e.textDirection==Or.LTR))),shift:e=>bl(e,(t=>cl(e.state,t,e.textDirection==Or.LTR)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>ql(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>$l(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>ql(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>$l(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=we.create([n.main]):n.main.empty||(r=we.create([we.cursor(n.main.head)])),!!r&&(t(tl(e,r)),!0)}},{key:"Mod-Enter",run:Jl(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=Kl(e).map((({from:t,to:n})=>we.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:we.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=el(e.selection,(t=>{var n;let r=ea(e).resolveInner(t.head,1);for(;!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return we.range(r.to,r.from)}));return t(tl(e,n)),!0},preventDefault:!0},{key:"Mod-[",run:Zl},{key:"Mod-]",run:Xl},{key:"Mod-Alt-\\",run:Yl},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(Kl(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),r=el(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>wl(e,t,!1)}].concat([{key:"ArrowLeft",run:ol,shift:xl,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>al(e,e.textDirection!=Or.LTR),shift:e=>Cl(e,e.textDirection!=Or.LTR)},{mac:"Cmd-ArrowLeft",run:yl,shift:Dl},{key:"ArrowRight",run:sl,shift:Sl,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>al(e,e.textDirection==Or.LTR),shift:e=>Cl(e,e.textDirection==Or.LTR)},{mac:"Cmd-ArrowRight",run:vl,shift:Rl},{key:"ArrowUp",run:hl,shift:Al,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Pl,shift:Bl},{mac:"Ctrl-ArrowUp",run:pl,shift:Ll},{key:"ArrowDown",run:fl,shift:El,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Nl,shift:Il},{mac:"Ctrl-ArrowDown",run:ml,shift:Tl},{key:"PageUp",run:pl,shift:Ll},{key:"PageDown",run:ml,shift:Tl},{key:"Home",run:yl,shift:Dl},{key:"Mod-Home",run:Pl,shift:Bl},{key:"End",run:vl,shift:Rl},{key:"Mod-End",run:Nl,shift:Il},{key:"Enter",run:Ql},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Vl,shift:Vl},{key:"Delete",run:Hl},{key:"Mod-Backspace",mac:"Alt-Backspace",run:jl},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Wl(e,!0)},{mac:"Mod-Backspace",run:e=>_l(e,(t=>{let n=e.lineBlockAt(t).from;return zl(e,t>n?n:Math.max(0,t-1),!1)}))},{mac:"Mod-Delete",run:Ul}].concat([{key:"Ctrl-b",run:ol,shift:xl,preventDefault:!0},{key:"Ctrl-f",run:sl,shift:Sl},{key:"Ctrl-p",run:hl,shift:Al},{key:"Ctrl-n",run:fl,shift:El},{key:"Ctrl-a",run:e=>nl(e,(t=>we.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>bl(e,(t=>we.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>nl(e,(t=>we.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>bl(e,(t=>we.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:Hl},{key:"Ctrl-h",run:Vl},{key:"Ctrl-k",run:Ul},{key:"Ctrl-Alt-h",run:jl},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:Z.of(["",""])},range:we.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:U(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:U(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:we.cursor(o)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:ml}].map((e=>({mac:e.key,run:e.run,shift:e.shift}))))),tc=Se.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function nc(e,t){let n=e.plugin(rc),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const rc=wr.fromClass(class{constructor(e){this.input=e.state.facet(ac),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(tc);this.top=new ic(e,!0,t.topContainer),this.bottom=new ic(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(tc);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new ic(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new ic(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(ac);if(n!=this.input){let t=n.filter((e=>e)),r=[],i=[],o=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:gr.scrollMargins.from((e=>({top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()})))});class ic{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=oc(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=oc(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function oc(e){let t=e.nextSibling;return e.remove(),t}const sc=go.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),ac=Se.define({enables:[rc,sc]});function lc(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)cc(e,arguments[t]);return e}function cc(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)cc(e,t[n])}}const uc="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class hc{constructor(e,t,n=0,r=e.length,i){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(uc(e)):uc,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return J(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=G(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Y(e);let r=this.normalize(t);for(let e=0,i=n;;e++){let o=r.charCodeAt(e),s=this.match(o,i);if(s)return this.value=s,this;if(e==r.length-1)break;i==n&&e<t.length&&t.charCodeAt(e)==o&&i++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n}}"undefined"!=typeof Symbol&&(hc.prototype[Symbol.iterator]=function(){return this});const fc={from:-1,to:-1,match:/.*/.exec("")},dc="gm"+(null==/x/.unicode?"":"u");class pc{constructor(e,t,n,r=0,i=e.length){if(this.to=i,this.curLine="",this.done=!1,this.value=fc,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new vc(e,t,n,r,i);this.re=new RegExp(t,dc+((null==n?void 0:n.ignoreCase)?"i":"")),this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=r,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=r+(n==r?1:0),n==this.curLine.length&&this.nextLine(),n<r||n>this.value.to)return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const mc=new WeakMap;class gc{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=mc.get(e);if(!r||r.from>=n||r.to<=t){let r=new gc(t,e.sliceString(t,n));return mc.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),mc.set(e,new gc(o,i)),new gc(t,i.slice(t-o,n-o))}}class vc{constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=fc,this.matchPos=r,this.re=new RegExp(t,dc+((null==n?void 0:n.ignoreCase)?"i":"")),this.flat=gc.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let e=this.flat.from+t.index,n=e+t[0].length;return this.value={from:e,to:n,match:t},this.matchPos=n+(e==n?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=gc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function yc(e){let t=lc("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),u=Math.round(r.doc.lines*e)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,u)));e.dispatch({effects:wc.of(!1),selection:we.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),e.focus()}return{dom:lc("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:wc.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},lc("label",e.state.phrase("Go to line"),": ",t)," ",lc("button",{class:"cm-button",type:"submit"},e.state.phrase("go"))),pos:-10}}"undefined"!=typeof Symbol&&(pc.prototype[Symbol.iterator]=vc.prototype[Symbol.iterator]=function(){return this});const wc=Ze.define(),bc=Le.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(wc)&&(e=n.value);return e},provide:e=>ac.from(e,(e=>e?yc:null))}),kc=go.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),xc={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!0},Sc=Se.define({combine:e=>ft(e,xc,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function Cc(e){let t=[Lc,Oc];return e&&t.push(Sc.of(e)),t}const Mc=Kn.mark({class:"cm-selectionMatch"}),Ac=Kn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Ec(e,t,n,r){return!(0!=n&&e(t.sliceDoc(n-1,n))==at.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==at.Word)}const Oc=wr.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(Sc),{state:n}=e,r=n.selection;if(r.ranges.length>1)return Kn.none;let i,o=r.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return Kn.none;let e=n.wordAt(o.head);if(!e)return Kn.none;s=n.charCategorizer(o.head),i=n.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return Kn.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!Ec(s,n,o.from,o.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==at.Word&&e(t.sliceDoc(r-1,r))==at.Word}(s,n,o.from,o.to))return Kn.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return Kn.none}let a=[];for(let r of e.visibleRanges){let e=new hc(n.doc,i,r.from,r.to);for(;!e.next().done;){let{from:r,to:i}=e.value;if((!s||Ec(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(Ac.range(r,i)):(r>=o.to||i<=o.from)&&a.push(Mc.range(r,i)),a.length>t.maxMatches))return Kn.none}}return Kn.set(a)}},{decorations:e=>e.decorations}),Lc=go.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const Tc=Se.define({combine(e){var t;return{top:e.reduce(((e,t)=>null!=e?e:t.top),void 0)||!1,caseSensitive:e.reduce(((e,t)=>null!=e?e:t.caseSensitive||t.matchCase),void 0)||!1,createPanel:(null===(t=e.find((e=>e.createPanel)))||void 0===t?void 0:t.createPanel)||(e=>new tu(e))}}});class Rc{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,dc),!0}catch(e){return!1}}(this.search)),this.unquoted=this.search.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new Ic(this):new Nc(this)}getCursor(e,t=0,n=e.length){return this.regexp?Bc(this,e,t,n):Pc(this,e,t,n)}}class Dc{constructor(e){this.spec=e}}function Pc(e,t,n,r){return new hc(t,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase())}class Nc extends Dc{constructor(e){super(e)}nextMatch(e,t,n){let r=Pc(this.spec,e,n,e.length).nextOverlapping();return r.done&&(r=Pc(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=Pc(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let n=Pc(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=Pc(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function Bc(e,t,n,r){return new pc(t,e.search,e.caseSensitive?void 0:{ignoreCase:!0},n,r)}class Ic extends Dc{nextMatch(e,t,n){let r=Bc(this.spec,e,n,e.length).next();return r.done&&(r=Bc(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=Bc(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=Bc(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=Bc(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const _c=Ze.define(),zc=Ze.define(),Fc=Le.define({create:e=>new Vc(Yc(e).create(),null),update(e,t){for(let n of t.effects)n.is(_c)?e=new Vc(n.value.create(),e.panel):n.is(zc)&&(e=new Vc(e.query,n.value?Gc:null));return e},provide:e=>ac.from(e,(e=>e.panel))});class Vc{constructor(e,t){this.query=e,this.panel=t}}const Hc=Kn.mark({class:"cm-searchMatch"}),Wc=Kn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),jc=wr.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(Fc))}update(e){let t=e.state.field(Fc);(t!=e.startState.field(Fc)||e.docChanged||e.selectionSet)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return Kn.none;let{view:n}=this,r=new Ct;for(let t=0,i=n.visibleRanges,o=i.length;t<o;t++){let{from:s,to:a}=i[t];for(;t<o-1&&a>i[t+1].from-500;)a=i[++t].to;e.highlight(n.state.doc,s,a,((e,t)=>{let i=n.state.selection.ranges.some((n=>n.from==e&&n.to==t));r.add(e,t,i?Wc:Hc)}))}return r.finish()}},{decorations:e=>e.decorations});function Uc(e){return t=>{let n=t.state.field(Fc,!1);return n&&n.query.spec.valid?e(t,n):Xc(t)}}const Kc=Uc(((e,{query:t})=>{let{from:n,to:r}=e.state.selection.main,i=t.nextMatch(e.state.doc,n,r);return!(!i||i.from==n&&i.to==r)&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:iu(e,i),userEvent:"select.search"}),!0)})),qc=Uc(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main,o=t.prevMatch(n.doc,r,i);return!!o&&(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:iu(e,o),userEvent:"select.search"}),!0)})),$c=Uc(((e,{query:t})=>{let n=t.matchAll(e.state.doc,1e3);return!(!n||!n.length)&&(e.dispatch({selection:we.create(n.map((e=>we.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),Qc=Uc(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n.doc,r,r);if(!o)return!1;let s,a,l=[];if(o.from==r&&o.to==i&&(a=n.toText(t.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=t.nextMatch(n.doc,o.from,o.to)),o){let e=0==l.length||l[0].from>=o.to?0:o.to-o.from-a.length;s={anchor:o.from-e,head:o.to-e}}return e.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:o?iu(e,o):void 0,userEvent:"input.replace"}),!0})),Jc=Uc(((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state.doc,1e9).map((e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}}));return!!n.length&&(e.dispatch({changes:n,userEvent:"input.replace.all"}),!0)}));function Gc(e){return e.state.facet(Tc).createPanel(e)}function Yc(e,t){var n;let r=e.selection.main,i=r.empty||r.to>r.from+100?"":e.sliceDoc(r.from,r.to),o=null!==(n=null==t?void 0:t.caseSensitive)&&void 0!==n?n:e.facet(Tc).caseSensitive;return t&&!i?t:new Rc({search:i.replace(/\n/g,"\\n"),caseSensitive:o})}const Xc=e=>{let t=e.state.field(Fc,!1);if(t&&t.panel){let n=nc(e,Gc);if(!n)return!1;let r=n.dom.querySelector("[name=search]");if(r!=e.root.activeElement){let n=Yc(e.state,t.query.spec);n.valid&&e.dispatch({effects:_c.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[zc.of(!0),t?_c.of(Yc(e.state,t.query.spec)):Ze.appendConfig.of(su)]});return!0},Zc=e=>{let t=e.state.field(Fc,!1);if(!t||!t.panel)return!1;let n=nc(e,Gc);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:zc.of(!1)}),!0},eu=[{key:"Mod-f",run:Xc,scope:"editor search-panel"},{key:"F3",run:Kc,shift:qc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Kc,shift:qc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Zc,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let t=new hc(e.doc,e.sliceDoc(r,i));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(s=o.length),o.push(we.range(t.value.from,t.value.to))}return t(e.update({selection:we.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:e=>{let t=nc(e,yc);if(!t){let n=[wc.of(!0)];null==e.state.field(bc,!1)&&n.push(Ze.appendConfig.of([bc,kc])),e.dispatch({effects:n}),t=nc(e,yc)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some((e=>e.from===e.to)))return(({state:e,dispatch:t})=>{let{selection:n}=e,r=we.create(n.ranges.map((t=>e.wordAt(t.head)||we.cursor(t.head))),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=r)))return!1;let i=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new hc(e.doc,t,r[r.length-1].to);;){if(i.next(),!i.done){if(n&&r.some((e=>e.from==i.value.from)))continue;if(o){let t=e.wordAt(i.value.from);if(!t||t.from!=i.value.from||t.to!=i.value.to)continue}return i.value}if(n)return null;i=new hc(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(e,r);return!!i&&(t(e.update({selection:e.selection.addRange(we.range(i.from,i.to),!1),effects:go.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class tu{constructor(e){this.view=e;let t=this.query=e.state.field(Fc).query.spec;function n(e,t,n){return lc("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=lc("input",{value:t.search,placeholder:nu(e,"Find"),"aria-label":nu(e,"Find"),class:"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit}),this.replaceField=lc("input",{value:t.replace,placeholder:nu(e,"Replace"),"aria-label":nu(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=lc("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=lc("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit}),this.dom=lc("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>Kc(e)),[nu(e,"next")]),n("prev",(()=>qc(e)),[nu(e,"previous")]),n("select",(()=>$c(e)),[nu(e,"all")]),lc("label",null,[this.caseField,nu(e,"match case")]),lc("label",null,[this.reField,nu(e,"regexp")]),...e.state.readOnly?[]:[lc("br"),this.replaceField,n("replace",(()=>Qc(e)),[nu(e,"replace")]),n("replaceAll",(()=>Jc(e)),[nu(e,"replace all")]),lc("button",{name:"close",onclick:()=>Zc(e),"aria-label":nu(e,"close"),type:"button"},[""])]])}commit(){let e=new Rc({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:_c.of(e)}))}keydown(e){var t,n,r;t=this.view,n=e,r="search-panel",Lo(Eo(t.state),n,t,r)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?qc:Kc)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),Qc(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(_c)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Tc).top}}function nu(e,t){return e.state.phrase(t)}const ru=/[\s\.,:;?!]/;function iu(e,{from:t,to:n}){let r=e.state.doc.lineAt(t).from,i=e.state.doc.lineAt(n).to,o=Math.max(r,t-30),s=Math.min(i,n+30),a=e.state.sliceDoc(o,s);if(o!=r)for(let e=0;e<30;e++)if(!ru.test(a[e+1])&&ru.test(a[e])){a=a.slice(e);break}if(s!=i)for(let e=a.length-1;e>a.length-30;e--)if(!ru.test(a[e-1])&&ru.test(a[e])){a=a.slice(0,e);break}return go.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${e.state.doc.lineAt(t).number}`)}const ou=go.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),su=[Fc,Ie.lowest(jc),ou];let au=0;class lu{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=au++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new lu([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new uu;return t=>t.modified.indexOf(e)>-1?t:uu.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let cu=0;class uu{constructor(){this.instances=[],this.id=cu++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>{return n.base==e&&(r=t,i=n.modified,r.length==i.length&&r.every(((e,t)=>e==i[t])));var r,i}));if(n)return n;let r=[],i=new lu(r,e,t);for(let e of t)e.instances.push(i);let o=hu(t);for(let t of e.set)for(let e of o)r.push(uu.get(t,e));return i}}function hu(e){let t=[e];for(let n=0;n<e.length;n++)for(let r of hu(e.slice(0,n).concat(e.slice(n+1))))t.push(r);return t}function fu(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?null:'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new vu(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return du.add(t)}const du=new Os,pu=Se.define({combine:e=>e.length?yu.combinedMatch(e):null}),mu=Se.define({combine:e=>e.length?e[0].match:null});function gu(e){return e.facet(pu)||e.facet(mu)}class vu{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}class yu{constructor(e,t){let n;function r(e){let t=gt.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.map=Object.create(null),this.all="string"==typeof t.all?t.all:t.all?r(t.all):null;for(let t of e){let e=(t.class||r(Object.assign({},t,{tag:null})))+(this.all?" "+this.all:""),n=t.tag;if(Array.isArray(n))for(let t of n)this.map[t.id]=e;else this.map[n.id]=e}this.module=n?new gt(n):null,this.scope=t.scope||null,this.match=this.match.bind(this);let i=[bu];this.module&&i.push(go.styleModule.of(this.module)),this.extension=i.concat(pu.of(this)),this.fallback=i.concat(mu.of(this))}match(e,t){if(this.scope&&t!=this.scope)return null;for(let t of e.set){let n=this.map[t.id];if(void 0!==n)return t!=e&&(this.map[e.id]=n),n}return this.map[e.id]=this.all}static combinedMatch(e){if(1==e.length)return e[0].match;let t=e.some((e=>e.scope))?void 0:Object.create(null);return(n,r)=>{let i=t&&t[n.id];if(void 0!==i)return i;let o=null;for(let t of e){let e=t.match(n,r);e&&(o=o?o+" "+e:e)}return t&&(t[n.id]=o),o}}static define(e,t){return new yu(e,t||{})}static get(e,t,n){let r=gu(e);return r&&r(t,n||Ts.none)}}class wu{constructor(e){this.markCache=Object.create(null),this.tree=ea(e.state),this.decorations=this.buildDeco(e,gu(e.state))}update(e){let t=ea(e.state),n=gu(e.state),r=n!=e.startState.facet(pu);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return Kn.none;let n=new Ct;for(let{from:r,to:i}of e.visibleRanges)Su(this.tree,r,i,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=Kn.mark({class:r})))}));return n.finish()}}const bu=Ie.high(wr.fromClass(wu,{decorations:e=>e.decorations})),ku=[""];class xu{constructor(e,t,n){this.at=e,this.style=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i,o){let{type:s,from:a,to:l}=e;if(a>=n||l<=t)return;ku[i]=s.name,s.isTop&&(o=s);let c=r,u=s.prop(du),h=!1;for(;u;){if(!u.context||Cu(u.context,ku,i)){for(let e of u.tags){let t=this.style(e,o);t&&(c&&(c+=" "),c+=t,1==u.mode?r+=(r?" ":"")+t:0==u.mode&&(h=!0))}break}u=u.next}if(this.startSpan(e.from,c),h)return;let f=e.tree&&e.tree.prop(Os.mounted);if(f&&f.overlay){let s=e.node.enter(f.overlay[0].from+a,1),u=e.firstChild();for(let h=0,d=a;;h++){let p=h<f.overlay.length?f.overlay[h]:null,m=p?p.from+a:l,g=Math.max(t,d),v=Math.min(n,m);if(g<v&&u)for(;e.from<v&&(this.highlightRange(e,g,v,r,i+1,o),this.startSpan(Math.min(n,e.to),c),!(e.to>=m)&&e.nextSibling()););if(!p||m>n)break;d=p.to+a,d>t&&(this.highlightRange(s.cursor,Math.max(t,p.from+a),Math.min(n,d),r,i,f.tree.type),this.startSpan(d,c))}u&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i+1,o),this.startSpan(Math.min(n,e.to),c)}}while(e.nextSibling());e.parent()}}}function Su(e,t,n,r,i){let o=new xu(t,r,i);o.highlightRange(e.cursor(),t,n,"",0,e.type),o.flush(n)}function Cu(e,t,n){if(e.length>n-1)return!1;for(let r=n-1,i=e.length-1;i>=0;i--,r--){let n=e[i];if(n&&n!=t[r])return!1}return!0}const Mu=lu.define,Au=Mu(),Eu=Mu(),Ou=Mu(Eu),Lu=Mu(Eu),Tu=Mu(),Ru=Mu(Tu),Du=Mu(Tu),Pu=Mu(),Nu=Mu(Pu),Bu=Mu(),Iu=Mu(),_u=Mu(),zu=Mu(_u),Fu=Mu(),Vu={comment:Au,lineComment:Mu(Au),blockComment:Mu(Au),docComment:Mu(Au),name:Eu,variableName:Mu(Eu),typeName:Ou,tagName:Mu(Ou),propertyName:Lu,attributeName:Mu(Lu),className:Mu(Eu),labelName:Mu(Eu),namespace:Mu(Eu),macroName:Mu(Eu),literal:Tu,string:Ru,docString:Mu(Ru),character:Mu(Ru),attributeValue:Mu(Ru),number:Du,integer:Mu(Du),float:Mu(Du),bool:Mu(Tu),regexp:Mu(Tu),escape:Mu(Tu),color:Mu(Tu),url:Mu(Tu),keyword:Bu,self:Mu(Bu),null:Mu(Bu),atom:Mu(Bu),unit:Mu(Bu),modifier:Mu(Bu),operatorKeyword:Mu(Bu),controlKeyword:Mu(Bu),definitionKeyword:Mu(Bu),moduleKeyword:Mu(Bu),operator:Iu,derefOperator:Mu(Iu),arithmeticOperator:Mu(Iu),logicOperator:Mu(Iu),bitwiseOperator:Mu(Iu),compareOperator:Mu(Iu),updateOperator:Mu(Iu),definitionOperator:Mu(Iu),typeOperator:Mu(Iu),controlOperator:Mu(Iu),punctuation:_u,separator:Mu(_u),bracket:zu,angleBracket:Mu(zu),squareBracket:Mu(zu),paren:Mu(zu),brace:Mu(zu),content:Pu,heading:Nu,heading1:Mu(Nu),heading2:Mu(Nu),heading3:Mu(Nu),heading4:Mu(Nu),heading5:Mu(Nu),heading6:Mu(Nu),contentSeparator:Mu(Pu),list:Mu(Pu),quote:Mu(Pu),emphasis:Mu(Pu),strong:Mu(Pu),link:Mu(Pu),monospace:Mu(Pu),strikethrough:Mu(Pu),inserted:Mu(),deleted:Mu(),changed:Mu(),invalid:Mu(),meta:Fu,documentMeta:Mu(Fu),annotation:Mu(Fu),processingInstruction:Mu(Fu),definition:lu.defineModifier(),constant:lu.defineModifier(),function:lu.defineModifier(),standard:lu.defineModifier(),local:lu.defineModifier(),special:lu.defineModifier()},Hu=yu.define([{tag:Vu.link,textDecoration:"underline"},{tag:Vu.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Vu.emphasis,fontStyle:"italic"},{tag:Vu.strong,fontWeight:"bold"},{tag:Vu.strikethrough,textDecoration:"line-through"},{tag:Vu.keyword,color:"#708"},{tag:[Vu.atom,Vu.bool,Vu.url,Vu.contentSeparator,Vu.labelName],color:"#219"},{tag:[Vu.literal,Vu.inserted],color:"#164"},{tag:[Vu.string,Vu.deleted],color:"#a11"},{tag:[Vu.regexp,Vu.escape,Vu.special(Vu.string)],color:"#e40"},{tag:Vu.definition(Vu.variableName),color:"#00f"},{tag:Vu.local(Vu.variableName),color:"#30a"},{tag:[Vu.typeName,Vu.namespace],color:"#085"},{tag:Vu.className,color:"#167"},{tag:[Vu.special(Vu.variableName),Vu.macroName],color:"#256"},{tag:Vu.definition(Vu.propertyName),color:"#00c"},{tag:Vu.comment,color:"#940"},{tag:Vu.meta,color:"#7a757a"},{tag:Vu.invalid,color:"#f00"}]),Wu={brackets:["(","[","{","'",'"'],before:")]}'\":;>"},ju=Ze.define({map(e,t){let n=t.mapPos(e,-1,ce.TrackAfter);return null==n?void 0:n}}),Uu=Ze.define({map:(e,t)=>t.mapPos(e)}),Ku=new class extends wt{};Ku.startSide=1,Ku.endSide=-1;const qu=Le.define({create:()=>St.empty,update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(e=St.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(ju)?e=e.update({add:[Ku.range(n.value,n.value+1)]}):n.is(Uu)&&(e=e.update({filter:e=>e!=n.value}));return e}});function $u(e){for(let t=0;t<"()[]{}<>".length;t+=2)if("()[]{}<>".charCodeAt(t)==e)return"()[]{}<>".charAt(t+1);return G(e<128?e:e+1)}function Qu(e,t){return e.languageDataAt("closeBrackets",t)[0]||Wu}const Ju="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Gu=go.inputHandler.of(((e,t,n,r)=>{if((Ju?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==Y(J(r,0))||t!=i.from||n!=i.to)return!1;let o=function(e,t){let n=Qu(e,e.selection.main.head),r=n.brackets||Wu.brackets;for(let i of r){let o=$u(J(i,0));if(t==i)return o==i?nh(e,i,r.indexOf(i+i+i)>-1):eh(e,i,o,n.before||Wu.before);if(t==o&&Xu(e,e.selection.main.from))return th(e,i,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)})),Yu=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Qu(e,e.selection.main.head).brackets||Wu.brackets,r=null,i=e.changeByRange((t=>{if(t.empty){let r=function(e,t){let n=e.sliceString(t-2,t);return Y(J(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let i of n)if(i==r&&Zu(e.doc,t.head)==$u(J(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:we.cursor(t.head-i.length),userEvent:"delete.backward"}}return{range:r=t}}));return r||t(e.update(i,{scrollIntoView:!0})),!r}}];function Xu(e,t){let n=!1;return e.field(qu).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function Zu(e,t){let n=e.sliceString(t,t+2);return n.slice(0,Y(J(n,0)))}function eh(e,t,n,r){let i=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:ju.of(o.to+t.length),range:we.range(o.anchor+t.length,o.head+t.length)};let s=Zu(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:ju.of(o.head+t.length),range:we.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function th(e,t,n){let r=null,i=e.selection.ranges.map((t=>t.empty&&Zu(e.doc,t.head)==n?we.cursor(t.head+n.length):r=t));return r?null:e.update({selection:we.create(i,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>Uu.of(e)))})}function nh(e,t,n){let r=null,i=e.changeByRange((i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:ju.of(i.to+t.length),range:we.range(i.anchor+t.length,i.head+t.length)};let o=i.head,s=Zu(e.doc,o);if(s==t){if(rh(e,o))return{changes:{insert:t+t,from:o},effects:ju.of(o+t.length),range:we.cursor(o+t.length)};if(Xu(e,o)){let r=n&&e.sliceDoc(o,o+3*t.length)==t+t+t;return{range:we.cursor(o+t.length*(r?3:1)),effects:Uu.of(o)}}}else{if(n&&e.sliceDoc(o-2*t.length,o)==t+t&&rh(e,o-2*t.length))return{changes:{insert:t+t+t+t,from:o},effects:ju.of(o+t.length),range:we.cursor(o+t.length)};if(e.charCategorizer(o)(s)!=at.Word){let n=e.sliceDoc(o-1,o);if(n!=t&&e.charCategorizer(o)(n)!=at.Word&&!function(e,t,n){let r=ea(e).resolveInner(t,-1);for(let i=0;i<5;i++){if(e.sliceDoc(r.from,r.from+n.length)==n)return!0;let i=r.to==t&&r.parent;if(!i)break;r=i}return!1}(e,o,t))return{changes:{insert:t+t,from:o},effects:ju.of(o+t.length),range:we.cursor(o+t.length)}}}return{range:r=i}}));return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function rh(e,t){let n=ea(e).resolveInner(t+1);return n.parent&&n.from==t}function ih(e,t,n,r=0,i=0){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);let o=i;for(let i=r;i<t;i++)9==e.charCodeAt(i)?o+=n-o%n:o++;return o}class oh{constructor(e,t,n){this.string=e,this.tabSize=t,this.indentUnit=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t,n=this.string.charAt(this.pos);if(t="string"==typeof e?n==e:n&&(e instanceof RegExp?e.test(n):e(n)),t)return++this.pos,n}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ih(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){return ih(this.string,null,this.tabSize)}match(e,t,n){if("string"==typeof e){let r=e=>n?e.toLowerCase():e;return r(this.string.substr(this.pos,e.length))==r(e)?(!1!==t&&(this.pos+=e.length),!0):null}{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}const sh=Object.create(null),ah=[Ts.none],lh=[],ch=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ch[e]=hh(sh,t);function uh(e,t){lh.indexOf(e)>-1||(lh.push(e),console.warn(t))}function hh(e,t){let n=null;for(let r of t.split(".")){let t=e[r]||Vu[r];t?"function"==typeof t?n?n=t(n):uh(r,`Modifier ${r} used at start of tag`):n?uh(r,`Tag ${r} used as modifier`):n=t:uh(r,`Unknown highlighting tag ${r}`)}if(!n)return 0;let r=t.replace(/ /g,"_"),i=Ts.define({id:ah.length,name:r,props:[fu({[r]:n})]});return ah.push(i),i.id}function fh(e){var t=e.Pos;function n(e,n){var r=e.state.vim;if(!r||r.insertMode)return n.head;var i=r.sel.head;return i?r.visualBlock&&n.head.line!=i.line?void 0:n.from()!=n.anchor||n.empty()||n.head.line!=i.line||n.head.ch==i.ch?n.head:new t(n.head.line,n.head.ch-1):n.head}var r=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],i=r.length,o=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}];function s(t){t.setOption("disableInput",!0),t.setOption("showCursorWhenSelecting",!1),e.signal(t,"vim-mode-change",{mode:"normal"}),t.on("cursorActivity",tt),z(t),e.on(t.getInputField(),"paste",f(t))}function a(t,n){this==e.keyMap.vim&&(t.options.$customCursor=null,e.rmClass(t.getWrapperElement(),"cm-fat-cursor")),n&&n.attach==l||function(t){t.setOption("disableInput",!1),t.off("cursorActivity",tt),e.off(t.getInputField(),"paste",f(t)),t.state.vim=null,Ve&&clearTimeout(Ve)}(t)}function l(t,r){this==e.keyMap.vim&&(t.curOp&&(t.curOp.selectionChanged=!0),t.options.$customCursor=n,e.addClass(t.getWrapperElement(),"cm-fat-cursor")),r&&r.attach==l||s(t)}function c(t,n){if(n){if(this[t])return this[t];var r=function(e){if("'"==e.charAt(0))return e.charAt(1);var t=e.split(/-(?!$)/),n=t[t.length-1];if(1==t.length&&1==t[0].length)return!1;if(2==t.length&&"Shift"==t[0]&&1==n.length)return!1;for(var r=!1,i=0;i<t.length;i++){var o=t[i];o in u?t[i]=u[o]:r=!0,o in h&&(t[i]=h[o])}if(!r)return!1;M(n)&&(t[t.length-1]=n.toLowerCase());return"<"+t.join("-")+">"}(t);if(!r)return!1;var i=V.findKey(n,r);return"function"==typeof i&&e.signal(n,"vim-keypress",r),i}}e.defineOption("vimMode",!1,(function(t,n,r){n&&"vim"!=t.getOption("keyMap")?t.setOption("keyMap","vim"):!n&&r!=e.Init&&/^vim/.test(t.getOption("keyMap"))&&t.setOption("keyMap","default")}));var u={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},h={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function f(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(Z(e.getCursor(),0,1)),G.enterInsertMode(e,{},t))}),t.onPasteFn}var d=/[\d]/,p=[e.isWordChar,function(t){return t&&!e.isWordChar(t)&&!/\s/.test(t)}],m=[function(e){return/\S/.test(e)}];function g(e,t){for(var n=[],r=e;r<e+t;r++)n.push(String.fromCharCode(r));return n}var v,y=g(65,26),w=g(97,26),b=g(48,10),k=[].concat(y,w,b,["<",">"]),x=[].concat(y,w,b,["-",'"',".",":","_","/"]);try{v=new RegExp("^[\\p{Lu}]$","u")}catch(e){v=/^[A-Z]$/}function S(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function C(e){return/^[a-z]$/.test(e)}function M(e){return v.test(e)}function A(e){return/^\s*$/.test(e)}function E(e){return-1!=".?!".indexOf(e)}function O(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}var L={};function T(e,t,n,r,i){if(void 0===t&&!i)throw Error("defaultValue is required unless callback is provided");if(n||(n="string"),L[e]={type:n,defaultValue:t,callback:i},r)for(var o=0;o<r.length;o++)L[r[o]]=L[e];t&&R(e,t)}function R(e,t,n,r){var i=L[e],o=(r=r||{}).scope;if(!i)return new Error("Unknown option: "+e);if("boolean"==i.type){if(t&&!0!==t)return new Error("Invalid argument: "+e+"="+t);!1!==t&&(t=!0)}i.callback?("local"!==o&&i.callback(t,void 0),"global"!==o&&n&&i.callback(t,n)):("local"!==o&&(i.value="boolean"==i.type?!!t:t),"global"!==o&&n&&(n.state.vim.options[e]={value:t}))}function D(e,t,n){var r=L[e],i=(n=n||{}).scope;if(!r)return new Error("Unknown option: "+e);if(r.callback){var o=t&&r.callback(void 0,t);return"global"!==i&&void 0!==o?o:"local"!==i?r.callback():void 0}return((o="global"!==i&&t&&t.state.vim.options[e])||"local"!==i&&r||{}).value}T("filetype",void 0,"string",["ft"],(function(e,t){if(void 0!==t){if(void 0===e)return"null"==(n=t.getOption("mode"))?"":n;var n=""==e?"null":e;t.setOption("mode",n)}}));var P,N,B=function(){var e=100,t=-1,n=0,r=0,i=new Array(e);function o(o,s){(t+=s)>n?t=n:t<r&&(t=r);var a=i[(e+t)%e];if(a&&!a.find()){var l,c=s>0?1:-1,u=o.getCursor();do{if((a=i[(e+(t+=c))%e])&&(l=a.find())&&!re(u,l))break}while(t<n&&t>r)}return a}return{cachedCursor:void 0,add:function(o,s,a){var l=i[t%e];function c(n){var r=++t%e,s=i[r];s&&s.clear(),i[r]=o.setBookmark(n)}if(l){var u=l.find();u&&!re(u,s)&&c(s)}else c(s);c(a),n=t,(r=t-e+1)<0&&(r=0)},find:function(e,n){var r=t,i=o(e,n);return t=r,i&&i.find()},move:o}},I=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function _(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=I()}function z(e){return e.state.vim||(e.state.vim={inputState:new H,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),e.state.vim}function F(){for(var e in P={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:B(),macroModeState:new _,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new U({}),searchHistoryController:new K,exCommandHistoryController:new K},L){var t=L[e];t.value=t.defaultValue}}_.prototype={exitMacroRecordMode:function(){var e=P.macroModeState;e.onRecordingDone&&e.onRecordingDone(),e.onRecordingDone=void 0,e.isRecording=!1},enterMacroRecordMode:function(e,t){var n=P.registerController.getRegister(t);if(n){if(n.clear(),this.latestRegister=t,e.openDialog){var r=Ie("span",{class:"cm-vim-message"},"recording @"+t);this.onRecordingDone=e.openDialog(r,null,{bottom:!0})}this.isRecording=!0}}};var V={enterVimMode:s,buildKeyMap:function(){},getRegisterController:function(){return P.registerController},resetVimGlobalState_:F,getVimGlobalState_:function(){return P},maybeInitVimState_:z,suppressErrorLogging:!1,InsertModeKey:rt,map:function(e,t,n){Ge.map(e,t,n)},unmap:function(e,t){return Ge.unmap(e,t)},noremap:function(e,t,n){function o(e){return e?[e]:["normal","insert","visual"]}for(var s=o(n),a=r.length,l=a-i;l<a&&s.length;l++){var c=r[l];if(!(c.keys!=t||n&&c.context&&c.context!==n||"ex"===c.type.substr(0,2)||"key"===c.type.substr(0,3))){var u={};for(var h in c)u[h]=c[h];u.keys=e,n&&!u.context&&(u.context=n),this._mapCommand(u);var f=o(c.context);s=s.filter((function(e){return-1===f.indexOf(e)}))}}},mapclear:function(e){var t=r.length,n=i,o=r.slice(0,t-n);if(r=r.slice(t-n),e)for(var s=o.length-1;s>=0;s--){var a=o[s];if(e!==a.context)if(a.context)this._mapCommand(a);else{var l=["normal","insert","visual"];for(var c in l)if(l[c]!==e){var u={};for(var h in a)u[h]=a[h];u.context=l[c],this._mapCommand(u)}}}},setOption:R,getOption:D,defineOption:T,defineEx:function(e,t,n){if(t){if(0!==e.indexOf(t))throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered')}else t=e;Je[e]=n,Ge.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(e,t,n){var r=this.findKey(e,t,n);if("function"==typeof r)return r()},multiSelectHandleKey:function(e,t,n){var r=!1,i=V.maybeInitVimState_(e),o=i.visualBlock||i.wasInVisualBlock,s=e.isInMultiSelectMode();i.wasInVisualBlock&&!s?i.wasInVisualBlock=!1:s&&i.visualBlock&&(i.wasInVisualBlock=!0);if("<Esc>"!=t||i.insertMode||i.visualMode||!s||"<Esc>"!=i.status)if(o||!s||e.inVirtualSelectionMode)r=V.handleKey(e,t,n);else{var a=at(i);e.operation((function(){e.curOp.isVimOp=!0,e.forEachSelection((function(){var i=e.getCursor("head"),o=e.getCursor("anchor"),s=ie(i,o)?0:-1,l=ie(i,o)?-1:0;i=Z(i,0,s),o=Z(o,0,l),e.state.vim.sel.head=i,e.state.vim.sel.anchor=o,r=V.handleKey(e,t,n),e.virtualSelection&&(e.state.vim=at(a))})),e.curOp.cursorActivity&&!r&&(e.curOp.cursorActivity=!1),e.state.vim=i}),!0)}else W(e);!r||i.visualMode||i.insert||i.visualMode==e.somethingSelected()||nt(e,i);return r},findKey:function(e,t,n){var i,o=z(e);function s(){var r=P.macroModeState;if(r.isRecording){if("q"==t)return r.exitMacroRecordMode(),W(e),!0;"mapping"!=n&&function(e,t){if(e.isPlaying)return;var n=e.latestRegister,r=P.registerController.getRegister(n);r&&r.pushText(t)}(r,t)}}function a(){if("<Esc>"==t)return W(e),o.visualMode?ge(e):o.insertMode&&Ye(e),!0}return!1===(i=o.insertMode?function(){if(a())return!0;for(var n=o.inputState.keyBuffer=o.inputState.keyBuffer+t,i=1==t.length,s=q.matchCommand(n,r,o.inputState,"insert");n.length>1&&"full"!=s.type;){n=o.inputState.keyBuffer=n.slice(1);var l=q.matchCommand(n,r,o.inputState,"insert");"none"!=l.type&&(s=l)}if("none"==s.type)return W(e),!1;if("partial"==s.type)return N&&window.clearTimeout(N),N=window.setTimeout((function(){o.insertMode&&o.inputState.keyBuffer&&W(e)}),D("insertModeEscKeysTimeout")),!i;if(N&&window.clearTimeout(N),i){for(var c=e.listSelections(),u=0;u<c.length;u++){var h=c[u].head;e.replaceRange("",Z(h,0,-(n.length-1)),h,"+input")}P.macroModeState.lastInsertModeChanges.changes.pop()}return W(e),s.command}():function(){if(s()||a())return!0;var n=o.inputState.keyBuffer=o.inputState.keyBuffer+t;if(/^[1-9]\d*$/.test(n))return!0;var i=/^(\d*)(.*)$/.exec(n);if(!i)return W(e),!1;var l=o.visualMode?"visual":"normal",c=i[2]||i[1];o.inputState.operatorShortcut&&o.inputState.operatorShortcut.slice(-1)==c&&(c=o.inputState.operatorShortcut);var u=q.matchCommand(c,r,o.inputState,l);return"none"==u.type?(W(e),!1):"partial"==u.type||("clear"==u.type?(W(e),!0):(o.inputState.keyBuffer="",(i=/^(\d*)(.*)$/.exec(n))[1]&&"0"!=i[1]&&o.inputState.pushRepeatDigit(i[1]),u.command))}())?o.insertMode||1!==t.length?void 0:function(){return!0}:!0===i?function(){return!0}:function(){return e.operation((function(){e.curOp.isVimOp=!0;try{"keyToKey"==i.type?function(n){for(var r;n;)r=/<\w+-.+?>|<\w+>|./.exec(n),t=r[0],n=n.substring(r.index+t.length),V.handleKey(e,t,"mapping")}(i.toKeys):q.processCommand(e,o,i)}catch(t){throw e.state.vim=void 0,z(e),V.suppressErrorLogging||console.log(t),t}return!0}))}},handleEx:function(e,t){Ge.processCommand(e,t)},defineMotion:function(e,t){$[e]=t},defineAction:function(e,t){G[e]=t},defineOperator:function(e,t){J[e]=t},mapCommand:function(e,t,n,r,i){var o={keys:e,type:t};for(var s in o[t]=n,o[t+"Args"]=r,i)o[s]=i[s];Xe(o)},_mapCommand:Xe,defineRegister:function(e,t){var n=P.registerController.registers;if(!e||1!=e.length)throw Error("Register name must be 1 character");if(n[e])throw Error("Register already defined "+e);n[e]=t,x.push(e)},exitVisualMode:ge,exitInsertMode:Ye};function H(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function W(t,n){t.state.vim.inputState=new H,e.signal(t,"vim-command-done",n)}function j(e,t,n){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!n}function U(e){this.registers=e,this.unnamedRegister=e['"']=new j,e["."]=new j,e[":"]=new j,e["/"]=new j}function K(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}H.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},H.prototype.getRepeat=function(){var e=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10))),e},j.prototype={setText:function(e,t,n){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!n},pushText:function(e,t){t&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(e)},pushInsertModeChanges:function(e){this.insertModeChanges.push(I(e))},pushSearchQuery:function(e){this.searchQueries.push(e)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},U.prototype={pushText:function(e,t,n,r,i){if("_"!==e){r&&"\n"!==n.charAt(n.length-1)&&(n+="\n");var o=this.isValidRegister(e)?this.getRegister(e):null;if(o){M(e)?o.pushText(n,r):o.setText(n,r,i),this.unnamedRegister.setText(o.toString(),r)}else{switch(t){case"yank":this.registers[0]=new j(n,r,i);break;case"delete":case"change":-1==n.indexOf("\n")?this.registers["-"]=new j(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new j(n,r))}this.unnamedRegister.setText(n,r,i)}}},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new j),this.registers[e]):this.unnamedRegister},isValidRegister:function(e){return e&&O(e,x)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}},K.prototype={nextMatch:function(e,t){var n=this.historyBuffer,r=t?-1:1;null===this.initialPrefix&&(this.initialPrefix=e);for(var i=this.iterator+r;t?i>=0:i<n.length;i+=r)for(var o=n[i],s=0;s<=o.length;s++)if(this.initialPrefix==o.substring(0,s))return this.iterator=i,o;return i>=n.length?(this.iterator=n.length,this.initialPrefix):i<0?e:void 0},pushInput:function(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var q={matchCommand:function(e,t,n,r){var i,o=function(e,t,n,r){for(var i,o=[],s=[],a=0;a<t.length;a++){var l=t[a];"insert"==n&&"insert"!=l.context||l.context&&l.context!=n||r.operator&&"action"==l.type||!(i=ee(e,l.keys))||("partial"==i&&o.push(l),"full"==i&&s.push(l))}return{partial:o.length&&o,full:s.length&&s}}(e,t,r,n);if(!o.full&&!o.partial)return{type:"none"};if(!o.full&&o.partial)return{type:"partial"};for(var s=0;s<o.full.length;s++){var a=o.full[s];i||(i=a)}if("<character>"==i.keys.slice(-11)){var l=function(e){var t=/^.*(<[^>]+>)$/.exec(e),n=t?t[1]:e.slice(-1);if(n.length>1)switch(n){case"<CR>":n="\n";break;case"<Space>":n=" ";break;default:n=""}return n}(e);if(!l||l.length>1)return{type:"clear"};n.selectedCharacter=l}return{type:"full",command:i}},processCommand:function(e,t,n){switch(t.inputState.repeatOverride=n.repeatOverride,n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n)}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=X(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator)return r.motion="expandToLine",r.motionArgs={linewise:!0},void this.evalInput(e,t);W(e)}r.operator=n.operator,r.operatorArgs=X(n.operatorArgs),n.keys.length>1&&(r.operatorShortcut=n.keys),n.exitVisualBlock&&(t.visualBlock=!1,pe(e)),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,i=X(n.operatorMotionArgs);i&&r&&i.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,i=r.getRepeat(),o=!!i,s=X(n.actionArgs)||{};r.selectedCharacter&&(s.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),s.repeat=i||1,s.repeatIsExplicit=o,s.registerName=r.registerName,W(e),t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,r,n),G[n.action](e,s,t)},processSearch:function(t,n,r){if(t.getSearchCursor){var i=r.searchArgs.forward,o=r.searchArgs.wholeWordOnly;Te(t).setReversed(!i);var s=i?"/":"?",a=Te(t).getQuery(),l=t.getScrollInfo();switch(r.searchArgs.querySrc){case"prompt":var c=P.macroModeState;if(c.isPlaying)d(f=c.replaySearchQueries.shift(),!0,!1);else ze(t,{onClose:function(e){t.scrollTo(l.left,l.top),d(e,!0,!0);var n=P.macroModeState;n.isRecording&&function(e,t){if(!e.isPlaying){var n=e.latestRegister,r=P.registerController.getRegister(n);r&&r.pushSearchQuery&&r.pushSearchQuery(t)}}(n,e)},prefix:s,desc:"(JavaScript regexp)",onKeyUp:function(n,r,o){var s,a,c,u=e.keyName(n);"Up"==u||"Down"==u?(s="Up"==u,a=n.target?n.target.selectionEnd:0,o(r=P.searchHistoryController.nextMatch(r,s)||""),a&&n.target&&(n.target.selectionEnd=n.target.selectionStart=Math.min(a,n.target.value.length))):"Left"!=u&&"Right"!=u&&"Ctrl"!=u&&"Alt"!=u&&"Shift"!=u&&P.searchHistoryController.reset();try{c=Fe(t,r,!0,!0)}catch(e){}c?t.scrollIntoView(We(t,!i,c),30):(je(t),t.scrollTo(l.left,l.top))},onKeyDown:function(n,r,i){var o=e.keyName(n);"Esc"==o||"Ctrl-C"==o||"Ctrl-["==o||"Backspace"==o&&""==r?(P.searchHistoryController.pushInput(r),P.searchHistoryController.reset(),Fe(t,a),je(t),t.scrollTo(l.left,l.top),e.e_stop(n),W(t),i(),t.focus()):"Up"==o||"Down"==o?e.e_stop(n):"Ctrl-U"==o&&(e.e_stop(n),i(""))}});break;case"wordUnderCursor":var u=ye(t,!1,!0,!1,!0),h=!0;if(u||(u=ye(t,!1,!0,!1,!1),h=!1),!u)return;var f=t.getLine(u.start.line).substring(u.start.ch,u.end.ch);h&&o?f="\\b"+f+"\\b":f=f.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1"),P.jumpList.cachedCursor=t.getCursor(),t.setCursor(u.start),d(f,!0,!1)}}function d(e,i,o){P.searchHistoryController.pushInput(e),P.searchHistoryController.reset();try{Fe(t,e,i,o)}catch(n){return _e(t,"Invalid regex: "+e),void W(t)}q.processMotion(t,n,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:r.searchArgs.toJumplist}})}},processEx:function(t,n,r){function i(e){P.exCommandHistoryController.pushInput(e),P.exCommandHistoryController.reset(),Ge.processCommand(t,e),W(t)}function o(n,r,i){var o,s,a=e.keyName(n);("Esc"==a||"Ctrl-C"==a||"Ctrl-["==a||"Backspace"==a&&""==r)&&(P.exCommandHistoryController.pushInput(r),P.exCommandHistoryController.reset(),e.e_stop(n),W(t),i(),t.focus()),"Up"==a||"Down"==a?(e.e_stop(n),o="Up"==a,s=n.target?n.target.selectionEnd:0,i(r=P.exCommandHistoryController.nextMatch(r,o)||""),s&&n.target&&(n.target.selectionEnd=n.target.selectionStart=Math.min(s,n.target.value.length))):"Ctrl-U"==a?(e.e_stop(n),i("")):"Left"!=a&&"Right"!=a&&"Ctrl"!=a&&"Alt"!=a&&"Shift"!=a&&P.exCommandHistoryController.reset()}"keyToEx"==r.type?Ge.processCommand(t,r.exArgs.input):n.visualMode?ze(t,{onClose:i,prefix:":",value:"'<,'>",onKeyDown:o,selectValueOnOpen:!1}):ze(t,{onClose:i,prefix:":",onKeyDown:o})},evalInput:function(e,n){var r,i,o,s=n.inputState,a=s.motion,l=s.motionArgs||{},c=s.operator,u=s.operatorArgs||{},h=s.registerName,f=n.sel,d=ne(n.visualMode?Y(e,f.head):e.getCursor("head")),p=ne(n.visualMode?Y(e,f.anchor):e.getCursor("anchor")),m=ne(d),g=ne(p);if(c&&this.recordLastEdit(n,s),(o=void 0!==s.repeatOverride?s.repeatOverride:s.getRepeat())>0&&l.explicitRepeat?l.repeatIsExplicit=!0:(l.noRepeat||!l.explicitRepeat&&0===o)&&(o=1,l.repeatIsExplicit=!1),s.selectedCharacter&&(l.selectedCharacter=u.selectedCharacter=s.selectedCharacter),l.repeat=o,W(e),a){var v=$[a](e,d,l,n,s);if(n.lastMotion=$[a],!v)return;if(l.toJumplist){var y=P.jumpList,w=y.cachedCursor;w?(we(e,w,v),delete y.cachedCursor):we(e,d,v)}v instanceof Array?(i=v[0],r=v[1]):r=v,r||(r=ne(d)),n.visualMode?(n.visualBlock&&r.ch===1/0||(r=Y(e,r)),i&&(i=Y(e,i)),i=i||g,f.anchor=i,f.head=r,pe(e),Ae(e,n,"<",ie(i,r)?i:r),Ae(e,n,">",ie(i,r)?r:i)):c||(r=Y(e,r),e.setCursor(r.line,r.ch))}if(c){if(u.lastSel){i=g;var b=u.lastSel,k=Math.abs(b.head.line-b.anchor.line),x=Math.abs(b.head.ch-b.anchor.ch);r=b.visualLine?new t(g.line+k,g.ch):b.visualBlock?new t(g.line+k,g.ch+x):b.head.line==b.anchor.line?new t(g.line,g.ch+x):new t(g.line+k,g.ch),n.visualMode=!0,n.visualLine=b.visualLine,n.visualBlock=b.visualBlock,f=n.sel={anchor:i,head:r},pe(e)}else n.visualMode&&(u.lastSel={anchor:ne(f.anchor),head:ne(f.head),visualBlock:n.visualBlock,visualLine:n.visualLine});var S,C,M,E,O;if(n.visualMode){if(S=oe(f.head,f.anchor),C=se(f.head,f.anchor),M=n.visualLine||u.linewise,O=me(e,{anchor:S,head:C},E=n.visualBlock?"block":M?"line":"char"),M){var L=O.ranges;if("block"==E)for(var T=0;T<L.length;T++)L[T].head.ch=le(e,L[T].head.line);else"line"==E&&(L[0].head=new t(L[0].head.line+1,0))}}else{if(S=ne(i||g),ie(C=ne(r||m),S)){var R=S;S=C,C=R}(M=l.linewise||u.linewise)?function(e,t,n){t.ch=0,n.ch=0,n.line++}(0,S,C):l.forward&&function(e,t,n){var r=e.getRange(t,n);if(/\n\s*$/.test(r)){var i=r.split("\n");i.pop();for(var o=i.pop();i.length>0&&o&&A(o);o=i.pop())n.line--,n.ch=0;o?(n.line--,n.ch=le(e,n.line)):n.ch=0}}(e,S,C),O=me(e,{anchor:S,head:C},E="char",!l.inclusive||M)}e.setSelections(O.ranges,O.primary),n.lastMotion=null,u.repeat=o,u.registerName=h,u.linewise=M;var D=J[c](e,u,O.ranges,g,r);n.visualMode&&ge(e,null!=D),D&&e.setCursor(D)}},recordLastEdit:function(e,t,n){var r=P.macroModeState;r.isPlaying||(e.lastEditInputState=t,e.lastEditActionCommand=n,r.lastInsertModeChanges.changes=[],r.lastInsertModeChanges.expectCursorActivityForChange=!1,r.lastInsertModeChanges.visualBlock=e.visualBlock?e.sel.head.line-e.sel.anchor.line:0)}},$={moveToTopLine:function(e,n,r){var i=Ke(e).top+r.repeat-1;return new t(i,ve(e.getLine(i)))},moveToMiddleLine:function(e){var n=Ke(e),r=Math.floor(.5*(n.top+n.bottom));return new t(r,ve(e.getLine(r)))},moveToBottomLine:function(e,n,r){var i=Ke(e).bottom-r.repeat+1;return new t(i,ve(e.getLine(i)))},expandToLine:function(e,n,r){return new t(n.line+r.repeat-1,1/0)},findNext:function(e,t,n){var r=Te(e),i=r.getQuery();if(i){var o=!n.forward;return o=r.isReversed()?!o:o,He(e,i),We(e,o,i,n.repeat)}},findAndSelectNextInclusive:function(n,r,i,o,s){var a=Te(n),l=a.getQuery();if(l){var c=!i.forward,u=function(e,n,r,i,o){void 0===i&&(i=1);return e.operation((function(){var s=e.getCursor(),a=e.getSearchCursor(r,s),l=a.find(!n);!o.visualMode&&l&&re(a.from(),s)&&a.find(!n);for(var c=0;c<i;c++)if(!(l=a.find(n))&&!(a=e.getSearchCursor(r,n?new t(e.lastLine()):new t(e.firstLine(),0))).find(n))return;return[a.from(),a.to()]}))}(n,c=a.isReversed()?!c:c,l,i.repeat,o);if(u){if(s.operator)return u;var h=u[0],f=new t(u[1].line,u[1].ch-1);if(o.visualMode){(o.visualLine||o.visualBlock)&&(o.visualLine=!1,o.visualBlock=!1,e.signal(n,"vim-mode-change",{mode:"visual",subMode:""}));var d=o.sel.anchor;if(d)return a.isReversed()?i.forward?[d,h]:[d,f]:i.forward?[d,f]:[d,h]}else o.visualMode=!0,o.visualLine=!1,o.visualBlock=!1,e.signal(n,"vim-mode-change",{mode:"visual",subMode:""});return c?[f,h]:[h,f]}}},goToMark:function(e,t,n,r){var i=qe(e,r,n.selectedCharacter);return i?n.linewise?{line:i.line,ch:ve(e.getLine(i.line))}:i:null},moveToOtherHighlightedEnd:function(e,n,r,i){if(i.visualBlock&&r.sameLine){var o=i.sel;return[Y(e,new t(o.anchor.line,o.head.ch)),Y(e,new t(o.head.line,o.anchor.ch))]}return[i.sel.head,i.sel.anchor]},jumpToMark:function(e,n,r,i){for(var o=n,s=0;s<r.repeat;s++){var a=o;for(var l in i.marks)if(C(l)){var c=i.marks[l].find();if(!((r.forward?ie(c,a):ie(a,c))||r.linewise&&c.line==a.line)){var u=re(a,o),h=r.forward?ae(a,c,o):ae(o,c,a);(u||h)&&(o=c)}}}return r.linewise&&(o=new t(o.line,ve(e.getLine(o.line)))),o},moveByCharacters:function(e,n,r){var i=n,o=r.repeat,s=r.forward?i.ch+o:i.ch-o;return new t(i.line,s)},moveByLines:function(e,n,r,i){var o=n,s=o.ch;switch(i.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:s=i.lastHPos;break;default:i.lastHPos=s}var a=r.repeat+(r.repeatOffset||0),l=r.forward?o.line+a:o.line-a,c=e.firstLine(),u=e.lastLine(),h=e.findPosV(o,r.forward?a:-a,"line",i.lastHSPos);return(r.forward?h.line>l:h.line<l)&&(l=h.line,s=h.ch),l<c&&o.line==c?this.moveToStartOfLine(e,n,r,i):l>u&&o.line==u?Ce(e,n,r,i,!0):(r.toFirstChar&&(s=ve(e.getLine(l)),i.lastHPos=s),i.lastHSPos=e.charCoords(new t(l,s),"div").left,new t(l,s))},moveByDisplayLines:function(e,n,r,i){var o=n;switch(i.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:i.lastHSPos=e.charCoords(o,"div").left}var s=r.repeat;if((l=e.findPosV(o,r.forward?s:-s,"line",i.lastHSPos)).hitSide)if(r.forward)var a={top:e.charCoords(l,"div").top+8,left:i.lastHSPos},l=e.coordsChar(a,"div");else{var c=e.charCoords(new t(e.firstLine(),0),"div");c.left=i.lastHSPos,l=e.coordsChar(c,"div")}return i.lastHPos=l.ch,l},moveByPage:function(e,t,n){var r=t,i=n.repeat;return e.findPosV(r,n.forward?i:-i,"page")},moveByParagraph:function(e,t,n){var r=n.forward?1:-1;return Oe(e,t,n.repeat,r)},moveBySentence:function(e,n,r){var i=r.forward?1:-1;return function(e,n,r,i){function o(e,t){if(t.pos+t.dir<0||t.pos+t.dir>=t.line.length){if(t.ln+=t.dir,!S(e,t.ln))return t.line=null,t.ln=null,void(t.pos=null);t.line=e.getLine(t.ln),t.pos=t.dir>0?0:t.line.length-1}else t.pos+=t.dir}function s(e,t,n,r){var i=""===(c=e.getLine(t)),s={line:c,ln:t,pos:n,dir:r},a={ln:s.ln,pos:s.pos},l=""===s.line;for(o(e,s);null!==s.line;){if(a.ln=s.ln,a.pos=s.pos,""===s.line&&!l)return{ln:s.ln,pos:s.pos};if(i&&""!==s.line&&!A(s.line[s.pos]))return{ln:s.ln,pos:s.pos};!E(s.line[s.pos])||i||s.pos!==s.line.length-1&&!A(s.line[s.pos+1])||(i=!0),o(e,s)}var c=e.getLine(a.ln);a.pos=0;for(var u=c.length-1;u>=0;--u)if(!A(c[u])){a.pos=u;break}return a}function a(e,t,n,r){var i={line:l=e.getLine(t),ln:t,pos:n,dir:r},s={ln:i.ln,pos:null},a=""===i.line;for(o(e,i);null!==i.line;){if(""===i.line&&!a)return null!==s.pos?s:{ln:i.ln,pos:i.pos};if(E(i.line[i.pos])&&null!==s.pos&&(i.ln!==s.ln||i.pos+1!==s.pos))return s;""===i.line||A(i.line[i.pos])||(a=!1,s={ln:i.ln,pos:i.pos}),o(e,i)}var l=e.getLine(s.ln);s.pos=0;for(var c=0;c<l.length;++c)if(!A(l[c])){s.pos=c;break}return s}var l={ln:n.line,pos:n.ch};for(;r>0;)l=i<0?a(e,l.ln,l.pos,i):s(e,l.ln,l.pos,i),r--;return new t(l.ln,l.pos)}(e,n,r.repeat,i)},moveByScroll:function(e,t,n,r){var i,o=e.getScrollInfo(),s=n.repeat;s||(s=o.clientHeight/(2*e.defaultTextHeight()));var a=e.charCoords(t,"local");if(n.repeat=s,!(i=$.moveByDisplayLines(e,t,n,r)))return null;var l=e.charCoords(i,"local");return e.scrollTo(null,o.top+l.top-a.top),i},moveByWords:function(e,n,r){return function(e,n,r,i,o,s){var a=ne(n),l=[];(i&&!o||!i&&o)&&r++;for(var c=!(i&&o),u=0;u<r;u++){var h=Se(e,n,i,s,c);if(!h){var f=le(e,e.lastLine());l.push(i?{line:e.lastLine(),from:f,to:f}:{line:0,from:0,to:0});break}l.push(h),n=new t(h.line,i?h.to-1:h.from)}var d=l.length!=r,p=l[0],m=l.pop();return i&&!o?(d||p.from==a.ch&&p.line==a.line||(m=l.pop()),new t(m.line,m.from)):i&&o?new t(m.line,m.to-1):!i&&o?(d||p.to==a.ch&&p.line==a.line||(m=l.pop()),new t(m.line,m.to)):new t(m.line,m.from)}(e,n,r.repeat,!!r.forward,!!r.wordEnd,!!r.bigWord)},moveTillCharacter:function(e,t,n){var r=Me(e,n.repeat,n.forward,n.selectedCharacter),i=n.forward?-1:1;return be(i,n),r?(r.ch+=i,r):null},moveToCharacter:function(e,t,n){var r=n.repeat;return be(0,n),Me(e,r,n.forward,n.selectedCharacter)||t},moveToSymbol:function(e,n,r){return function(e,n,r,i){var o=ne(e.getCursor()),s=r?1:-1,a=r?e.lineCount():-1,l=o.ch,c=o.line,u=e.getLine(c),h={lineText:u,nextCh:u.charAt(l),lastCh:null,index:l,symb:i,reverseSymb:(r?{")":"(","}":"{"}:{"(":")","{":"}"})[i],forward:r,depth:0,curMoveThrough:!1},f=ke[i];if(!f)return o;var d=xe[f].init,p=xe[f].isComplete;d&&d(h);for(;c!==a&&n;){if(h.index+=s,h.nextCh=h.lineText.charAt(h.index),!h.nextCh){if(c+=s,h.lineText=e.getLine(c)||"",s>0)h.index=0;else{var m=h.lineText.length;h.index=m>0?m-1:0}h.nextCh=h.lineText.charAt(h.index)}p(h)&&(o.line=c,o.ch=h.index,n--)}return h.nextCh||h.curMoveThrough?new t(c,h.index):o}(e,r.repeat,r.forward,r.selectedCharacter)||n},moveToColumn:function(e,n,r,i){var o=r.repeat;return i.lastHPos=o-1,i.lastHSPos=e.charCoords(n,"div").left,function(e,n){var r=e.getCursor().line;return Y(e,new t(r,n-1))}(e,o)},moveToEol:function(e,t,n,r){return Ce(e,t,n,r,!1)},moveToFirstNonWhiteSpaceCharacter:function(e,n){var r=n;return new t(r.line,ve(e.getLine(r.line)))},moveToMatchedSymbol:function(e,n){for(var r,i=n,o=i.line,s=i.ch,a=e.getLine(o);s<a.length;s++)if((r=a.charAt(s))&&-1!="()[]{}".indexOf(r)){var l=e.getTokenTypeAt(new t(o,s+1));if("string"!==l&&"comment"!==l)break}if(s<a.length){var c="<"===s||">"===s?/[(){}[\]<>]/:/[(){}[\]]/;return e.findMatchingBracket(new t(o,s),{bracketRegex:c}).to}return i},moveToStartOfLine:function(e,n){return new t(n.line,0)},moveToLineOrEdgeOfDocument:function(e,n,r){var i=r.forward?e.lastLine():e.firstLine();return r.repeatIsExplicit&&(i=r.repeat-e.getOption("firstLineNumber")),new t(i,ve(e.getLine(i)))},textObjectManipulation:function(n,r,i,o){var s=i.selectedCharacter;"b"==s?s="(":"B"==s&&(s="{");var a,l=!i.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[s])a=function(e,n,r,i){var o,s,a=n,l={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[r],c={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[r],u=e.getLine(a.line).charAt(a.ch)===c?1:0;if(o=e.scanForBracket(new t(a.line,a.ch+u),-1,void 0,{bracketRegex:l}),s=e.scanForBracket(new t(a.line,a.ch+u),1,void 0,{bracketRegex:l}),!o||!s)return{start:a,end:a};if(o=o.pos,s=s.pos,o.line==s.line&&o.ch>s.ch||o.line>s.line){var h=o;o=s,s=h}i?s.ch+=1:o.ch+=1;return{start:o,end:s}}(n,r,s,l);else if({"'":!0,'"':!0,"`":!0}[s])a=function(e,n,r,i){var o,s,a,l,c=ne(n),u=e.getLine(c.line).split(""),h=u.indexOf(r);c.ch<h?c.ch=h:h<c.ch&&u[c.ch]==r&&(s=c.ch,--c.ch);if(u[c.ch]!=r||s)for(a=c.ch;a>-1&&!o;a--)u[a]==r&&(o=a+1);else o=c.ch+1;if(o&&!s)for(a=o,l=u.length;a<l&&!s;a++)u[a]==r&&(s=a);if(!o||!s)return{start:c,end:c};i&&(--o,++s);return{start:new t(c.line,o),end:new t(c.line,s)}}(n,r,s,l);else if("W"===s)a=ye(n,l,!0,!0);else if("w"===s)a=ye(n,l,!0,!1);else if("p"===s)if(a=Oe(n,r,i.repeat,0,l),i.linewise=!0,o.visualMode)o.visualLine||(o.visualLine=!0);else{var c=o.inputState.operatorArgs;c&&(c.linewise=!0),a.end.line--}else{if("t"!==s)return null;a=function(t,n,r){var i=n;if(!e.findMatchingTag||!e.findEnclosingTag)return{start:i,end:i};var o=e.findMatchingTag(t,n)||e.findEnclosingTag(t,n);return o&&o.open&&o.close?r?{start:o.open.from,end:o.close.to}:{start:o.open.to,end:o.close.from}:{start:i,end:i}}(n,r,l)}return n.state.vim.visualMode?function(e,n,r){var i,o=e.state.vim.sel,s=o.head,a=o.anchor;ie(r,n)&&(i=r,r=n,n=i);ie(s,a)?(s=oe(n,s),a=se(a,r)):(a=oe(n,a),-1==(s=Z(s=se(s,r),0,-1)).ch&&s.line!=e.firstLine()&&(s=new t(s.line-1,le(e,s.line-1))));return[a,s]}(n,a.start,a.end):[a.start,a.end]},repeatLastCharacterSearch:function(e,t,n){var r=P.lastCharacterSearch,i=n.repeat,o=n.forward===r.forward,s=(r.increment?1:0)*(o?-1:1);e.moveH(-s,"char"),n.inclusive=!!o;var a=Me(e,i,o,r.selectedCharacter);return a?(a.ch+=s,a):(e.moveH(s,"char"),t)}};function Q(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}var J={change:function(n,r,i){var o,s,a=n.state.vim,l=i[0].anchor,c=i[0].head;if(a.visualMode)if(r.fullLine)c.ch=Number.MAX_VALUE,c.line--,n.setSelection(l,c),s=n.getSelection(),n.replaceSelection(""),o=l;else{s=n.getSelection();var u=Q("",i.length);n.replaceSelections(u),o=oe(i[0].head,i[0].anchor)}else{s=n.getRange(l,c);var h=a.lastEditInputState||{};if("moveByWords"==h.motion&&!A(s)){var f=/\s+$/.exec(s);f&&h.motionArgs&&h.motionArgs.forward&&(c=Z(c,0,-f[0].length),s=s.slice(0,-f[0].length))}var d=new t(l.line-1,Number.MAX_VALUE),p=n.firstLine()==n.lastLine();c.line>n.lastLine()&&r.linewise&&!p?n.replaceRange("",d,c):n.replaceRange("",l,c),r.linewise&&(p||(n.setCursor(d),e.commands.newlineAndIndent(n)),l.ch=Number.MAX_VALUE),o=l}P.registerController.pushText(r.registerName,"change",s,r.linewise,i.length>1),G.enterInsertMode(n,{head:o},n.state.vim)},delete:function(e,n,r){var i,o,s=e.state.vim;if(s.visualBlock){o=e.getSelection();var a=Q("",r.length);e.replaceSelections(a),i=oe(r[0].head,r[0].anchor)}else{var l=r[0].anchor,c=r[0].head;n.linewise&&c.line!=e.firstLine()&&l.line==e.lastLine()&&l.line==c.line-1&&(l.line==e.firstLine()?l.ch=0:l=new t(l.line-1,le(e,l.line-1))),o=e.getRange(l,c),e.replaceRange("",l,c),i=l,n.linewise&&(i=$.moveToFirstNonWhiteSpaceCharacter(e,l))}return P.registerController.pushText(n.registerName,"delete",o,n.linewise,s.visualBlock),Y(e,i)},indent:function(e,t,n){var r=e.state.vim;if(e.indentMore)for(var i=r.visualMode?t.repeat:1,o=0;o<i;o++)t.indentRight?e.indentMore():e.indentLess();else{var s=n[0].anchor.line,a=r.visualBlock?n[n.length-1].anchor.line:n[0].head.line;i=r.visualMode?t.repeat:1;t.linewise&&a--;for(var l=s;l<=a;l++)for(o=0;o<i;o++)e.indentLine(l,t.indentRight)}return $.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},indentAuto:function(e,t,n){return e.execCommand("indentAuto"),$.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},changeCase:function(e,t,n,r,i){for(var o=e.getSelections(),s=[],a=t.toLower,l=0;l<o.length;l++){var c=o[l],u="";if(!0===a)u=c.toLowerCase();else if(!1===a)u=c.toUpperCase();else for(var h=0;h<c.length;h++){var f=c.charAt(h);u+=M(f)?f.toLowerCase():f.toUpperCase()}s.push(u)}return e.replaceSelections(s),t.shouldMoveCursor?i:!e.state.vim.visualMode&&t.linewise&&n[0].anchor.line+1==n[0].head.line?$.moveToFirstNonWhiteSpaceCharacter(e,r):t.linewise?r:oe(n[0].anchor,n[0].head)},yank:function(e,t,n,r){var i=e.state.vim,o=e.getSelection(),s=i.visualMode?oe(i.sel.anchor,i.sel.head,n[0].head,n[0].anchor):r;return P.registerController.pushText(t.registerName,"yank",o,t.linewise,i.visualBlock),s}};var G={jumpListWalk:function(e,t,n){if(!n.visualMode){var r=t.repeat,i=t.forward,o=P.jumpList.move(e,i?r:-r),s=o?o.find():void 0;s=s||e.getCursor(),e.setCursor(s)}},scroll:function(e,t,n){if(!n.visualMode){var r=t.repeat||1,i=e.defaultTextHeight(),o=e.getScrollInfo().top,s=i*r,a=t.forward?o+s:o-s,l=ne(e.getCursor()),c=e.charCoords(l,"local");if(t.forward)a>c.top?(l.line+=(a-c.top)/i,l.line=Math.ceil(l.line),e.setCursor(l),c=e.charCoords(l,"local"),e.scrollTo(null,c.top)):e.scrollTo(null,a);else{var u=a+e.getScrollInfo().clientHeight;u<c.bottom?(l.line-=(c.bottom-u)/i,l.line=Math.floor(l.line),e.setCursor(l),c=e.charCoords(l,"local"),e.scrollTo(null,c.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,a)}}},scrollToCursor:function(e,n){var r=e.getCursor().line,i=e.charCoords(new t(r,0),"local"),o=e.getScrollInfo().clientHeight,s=i.top,a=i.bottom-s;switch(n.position){case"center":s=s-o/2+a;break;case"bottom":s=s-o+a}e.scrollTo(null,s)},replayMacro:function(e,t,n){var r=t.selectedCharacter,i=t.repeat,o=P.macroModeState;for("@"==r?r=o.latestRegister:o.latestRegister=r;i--;)Ze(e,n,o,r)},enterMacroRecordMode:function(e,t){var n=P.macroModeState,r=t.selectedCharacter;P.registerController.isValidRegister(r)&&n.enterMacroRecordMode(e,r)},toggleOverwrite:function(t){t.state.overwrite?(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})):(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(n,r,i){if(!n.getOption("readOnly")){i.insertMode=!0,i.insertModeRepeat=r&&r.repeat||1;var o=r?r.insertAt:null,s=i.sel,a=r.head||n.getCursor("head"),l=n.listSelections().length;if("eol"==o)a=new t(a.line,le(n,a.line));else if("bol"==o)a=new t(a.line,0);else if("charAfter"==o)a=Z(a,0,1);else if("firstNonBlank"==o)a=$.moveToFirstNonWhiteSpaceCharacter(n,a);else if("startOfSelectedArea"==o){if(!i.visualMode)return;i.visualBlock?(a=new t(Math.min(s.head.line,s.anchor.line),Math.min(s.head.ch,s.anchor.ch)),l=Math.abs(s.head.line-s.anchor.line)+1):a=s.head.line<s.anchor.line?s.head:new t(s.anchor.line,0)}else if("endOfSelectedArea"==o){if(!i.visualMode)return;i.visualBlock?(a=new t(Math.min(s.head.line,s.anchor.line),Math.max(s.head.ch,s.anchor.ch)+1),l=Math.abs(s.head.line-s.anchor.line)+1):a=s.head.line>=s.anchor.line?Z(s.head,0,1):new t(s.anchor.line,0)}else if("inplace"==o){if(i.visualMode)return}else"lastEdit"==o&&(a=$e(n)||a);n.setOption("disableInput",!1),r&&r.replace?(n.toggleOverwrite(!0),n.setOption("keyMap","vim-replace"),e.signal(n,"vim-mode-change",{mode:"replace"})):(n.toggleOverwrite(!1),n.setOption("keyMap","vim-insert"),e.signal(n,"vim-mode-change",{mode:"insert"})),P.macroModeState.isPlaying||(n.on("change",et),e.on(n.getInputField(),"keydown",it)),i.visualMode&&ge(n),fe(n,a,l)}},toggleVisualMode:function(n,r,i){var o,s=r.repeat,a=n.getCursor();i.visualMode?i.visualLine^r.linewise||i.visualBlock^r.blockwise?(i.visualLine=!!r.linewise,i.visualBlock=!!r.blockwise,e.signal(n,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),pe(n)):ge(n):(i.visualMode=!0,i.visualLine=!!r.linewise,i.visualBlock=!!r.blockwise,o=Y(n,new t(a.line,a.ch+s-1)),i.sel={anchor:a,head:o},e.signal(n,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),pe(n),Ae(n,i,"<",oe(a,o)),Ae(n,i,">",se(a,o)))},reselectLastSelection:function(t,n,r){var i=r.lastSelection;if(r.visualMode&&de(t,r),i){var o=i.anchorMark.find(),s=i.headMark.find();if(!o||!s)return;r.sel={anchor:o,head:s},r.visualMode=!0,r.visualLine=i.visualLine,r.visualBlock=i.visualBlock,pe(t),Ae(t,r,"<",oe(o,s)),Ae(t,r,">",se(o,s)),e.signal(t,"vim-mode-change",{mode:"visual",subMode:r.visualLine?"linewise":r.visualBlock?"blockwise":""})}},joinLines:function(e,n,r){var i,o;if(r.visualMode){if(i=e.getCursor("anchor"),ie(o=e.getCursor("head"),i)){var s=o;o=i,i=s}o.ch=le(e,o.line)-1}else{var a=Math.max(n.repeat,2);i=e.getCursor(),o=Y(e,new t(i.line+a-1,1/0))}for(var l=0,c=i.line;c<o.line;c++){l=le(e,i.line);s=new t(i.line+1,le(e,i.line+1));var u=e.getRange(i,s);u=n.keepSpaces?u.replace(/\n\r?/g,""):u.replace(/\n\s*/g," "),e.replaceRange(u,i,s)}var h=new t(i.line,l);r.visualMode&&ge(e,!1),e.setCursor(h)},newLineAndEnterInsertMode:function(n,r,i){i.insertMode=!0;var o=ne(n.getCursor());o.line!==n.firstLine()||r.after?(o.line=r.after?o.line:o.line-1,o.ch=le(n,o.line),n.setCursor(o),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(n)):(n.replaceRange("\n",new t(n.firstLine(),0)),n.setCursor(n.firstLine(),0));this.enterInsertMode(n,{repeat:r.repeat},i)},paste:function(e,n,r){var i=ne(e.getCursor()),o=P.registerController.getRegister(n.registerName);if(d=o.toString()){if(n.matchIndent){var s=e.getOption("tabSize"),a=function(e){var t=e.split("\t").length-1,n=e.split(" ").length-1;return t*s+1*n},l=e.getLine(e.getCursor().line),c=a(l.match(/^\s*/)[0]),u=d.replace(/\n$/,""),h=d!==u,f=a(d.match(/^\s*/)[0]),d=u.replace(/^\s*/gm,(function(t){var n=c+(a(t)-f);if(n<0)return"";if(e.getOption("indentWithTabs")){var r=Math.floor(n/s);return Array(r+1).join("\t")}return Array(n+1).join(" ")}));d+=h?"\n":""}if(n.repeat>1)d=Array(n.repeat+1).join(d);var p,m,g=o.linewise,v=o.blockwise;if(v){d=d.split("\n"),g&&d.pop();for(var y=0;y<d.length;y++)d[y]=""==d[y]?" ":d[y];i.ch+=n.after?1:0,i.ch=Math.min(le(e,i.line),i.ch)}else g?r.visualMode?d=r.visualLine?d.slice(0,-1):"\n"+d.slice(0,d.length-1)+"\n":n.after?(d="\n"+d.slice(0,d.length-1),i.ch=le(e,i.line)):i.ch=0:i.ch+=n.after?1:0;if(r.visualMode){var w;r.lastPastedText=d;var b=function(e,n){var r=n.lastSelection,i=function(){var t=e.listSelections(),n=t[0],r=t[t.length-1];return[ie(n.anchor,n.head)?n.anchor:n.head,ie(r.anchor,r.head)?r.head:r.anchor]},o=function(){var n=e.getCursor(),i=e.getCursor(),o=r.visualBlock;if(o){var s=o.width,a=o.height;i=new t(n.line+a,n.ch+s);for(var l=[],c=n.line;c<i.line;c++){var u={anchor:new t(c,n.ch),head:new t(c,i.ch)};l.push(u)}e.setSelections(l)}else{var h=r.anchorMark.find(),f=r.headMark.find(),d=f.line-h.line,p=f.ch-h.ch;i={line:i.line+d,ch:d?i.ch:p+i.ch},r.visualLine&&(n=new t(n.line,0),i=new t(i.line,le(e,i.line))),e.setSelection(n,i)}return[n,i]};return n.visualMode?i():o()}(e,r),k=b[0],x=b[1],S=e.getSelection(),C=e.listSelections(),M=new Array(C.length).join("1").split("1");r.lastSelection&&(w=r.lastSelection.headMark.find()),P.registerController.unnamedRegister.setText(S),v?(e.replaceSelections(M),x=new t(k.line+d.length-1,k.ch),e.setCursor(k),he(e,x),e.replaceSelections(d),p=k):r.visualBlock?(e.replaceSelections(M),e.setCursor(k),e.replaceRange(d,k,k),p=k):(e.replaceRange(d,k,x),p=e.posFromIndex(e.indexFromPos(k)+d.length-1)),w&&(r.lastSelection.headMark=e.setBookmark(w)),g&&(p.ch=0)}else if(v){e.setCursor(i);for(y=0;y<d.length;y++){var A=i.line+y;A>e.lastLine()&&e.replaceRange("\n",new t(A,0)),le(e,A)<i.ch&&ue(e,A,i.ch)}e.setCursor(i),he(e,new t(i.line+d.length-1,i.ch)),e.replaceSelections(d),p=i}else e.replaceRange(d,i),g&&n.after?p=new t(i.line+1,ve(e.getLine(i.line+1))):g&&!n.after?p=new t(i.line,ve(e.getLine(i.line))):!g&&n.after?(m=e.indexFromPos(i),p=e.posFromIndex(m+d.length-1)):(m=e.indexFromPos(i),p=e.posFromIndex(m+d.length));r.visualMode&&ge(e,!1),e.setCursor(p)}},undo:function(t,n){t.operation((function(){te(t,e.commands.undo,n.repeat)(),t.setCursor(t.getCursor("anchor"))}))},redo:function(t,n){te(t,e.commands.redo,n.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){Ae(e,n,t.selectedCharacter,e.getCursor())},replace:function(n,r,i){var o,s,a=r.selectedCharacter,l=n.getCursor(),c=n.listSelections();if(i.visualMode)l=n.getCursor("start"),s=n.getCursor("end");else{var u=n.getLine(l.line);(o=l.ch+r.repeat)>u.length&&(o=u.length),s=new t(l.line,o)}if("\n"==a)i.visualMode||n.replaceRange("",l,s),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(n);else{var h=n.getRange(l,s);if(h=h.replace(/[^\n]/g,a),i.visualBlock){var f=new Array(n.getOption("tabSize")+1).join(" ");h=(h=n.getSelection()).replace(/\t/g,f).replace(/[^\n]/g,a).split("\n"),n.replaceSelections(h)}else n.replaceRange(h,l,s);i.visualMode?(l=ie(c[0].anchor,c[0].head)?c[0].anchor:c[0].head,n.setCursor(l),ge(n,!1)):n.setCursor(Z(s,0,-1))}},incrementNumberToken:function(e,n){for(var r,i,o,s,a=e.getCursor(),l=e.getLine(a.line),c=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(r=c.exec(l))&&(o=(i=r.index)+r[0].length,!(a.ch<o)););if((n.backtrack||!(o<=a.ch))&&r){var u=r[2]||r[4],h=r[3]||r[5],f=n.increase?1:-1,d={"0b":2,0:8,"":10,"0x":16}[u.toLowerCase()];s=(parseInt(r[1]+h,d)+f*n.repeat).toString(d);var p=u?new Array(h.length-s.length+1+r[1].length).join("0"):"";s="-"===s.charAt(0)?"-"+u+p+s.substr(1):u+p+s;var m=new t(a.line,i),g=new t(a.line,o);e.replaceRange(s,m,g),e.setCursor(new t(a.line,i+s.length-1))}},repeatLastEdit:function(e,t,n){if(n.lastEditInputState){var r=t.repeat;r&&t.repeatIsExplicit?n.lastEditInputState.repeatOverride=r:r=n.lastEditInputState.repeatOverride||r,ot(e,n,r,!1)}},indent:function(e,t){e.indentLine(e.getCursor().line,t.indentRight)},exitInsertMode:Ye};function Y(e,n){var r=e.state.vim,i=r.insertMode||r.visualMode,o=Math.min(Math.max(e.firstLine(),n.line),e.lastLine()),s=le(e,o)-1+!!i,a=Math.min(Math.max(0,n.ch),s);return new t(o,a)}function X(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Z(e,n,r){return"object"==typeof n&&(r=n.ch,n=n.line),new t(e.line+n,e.ch+r)}function ee(e,t){if("<character>"==t.slice(-11)){var n=t.length-11,r=e.slice(0,n),i=t.slice(0,n);return r==i&&e.length>n?"full":0==i.indexOf(r)&&"partial"}return e==t?"full":0==t.indexOf(e)&&"partial"}function te(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function ne(e){return new t(e.line,e.ch)}function re(e,t){return e.ch==t.ch&&e.line==t.line}function ie(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function oe(e,t){return arguments.length>2&&(t=oe.apply(void 0,Array.prototype.slice.call(arguments,1))),ie(e,t)?e:t}function se(e,t){return arguments.length>2&&(t=se.apply(void 0,Array.prototype.slice.call(arguments,1))),ie(e,t)?t:e}function ae(e,t,n){var r=ie(e,t),i=ie(t,n);return r&&i}function le(e,t){return e.getLine(t).length}function ce(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function ue(e,n,r){var i=le(e,n),o=new Array(r-i+1).join(" ");e.setCursor(new t(n,i)),e.replaceRange(o,e.getCursor())}function he(e,n){var r=[],i=e.listSelections(),o=ne(e.clipPos(n)),s=!re(n,o),a=function(e,t,n){for(var r=0;r<e.length;r++){var i="head"!=n&&re(e[r].anchor,t),o="anchor"!=n&&re(e[r].head,t);if(i||o)return r}return-1}(i,e.getCursor("head")),l=re(i[a].head,i[a].anchor),c=i.length-1,u=c-a>a?c:0,h=i[u].anchor,f=Math.min(h.line,o.line),d=Math.max(h.line,o.line),p=h.ch,m=o.ch,g=i[u].head.ch-p,v=m-p;g>0&&v<=0?(p++,s||m--):g<0&&v>=0?(p--,l||m++):g<0&&-1==v&&(p--,m++);for(var y=f;y<=d;y++){var w={anchor:new t(y,p),head:new t(y,m)};r.push(w)}return e.setSelections(r),n.ch=m,h.ch=p,h}function fe(e,t,n){for(var r=[],i=0;i<n;i++){var o=Z(t,i,0);r.push({anchor:o,head:o})}e.setSelections(r,0)}function de(e,t){var n=t.sel.anchor,r=t.sel.head;t.lastPastedText&&(r=e.posFromIndex(e.indexFromPos(n)+t.lastPastedText.length),t.lastPastedText=null),t.lastSelection={anchorMark:e.setBookmark(n),headMark:e.setBookmark(r),anchor:ne(n),head:ne(r),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:t.visualBlock}}function pe(e,t,n){var r=e.state.vim,i=me(e,t=t||r.sel,n=n||r.visualLine?"line":r.visualBlock?"block":"char");e.setSelections(i.ranges,i.primary)}function me(e,n,r,i){var o=ne(n.head),s=ne(n.anchor);if("char"==r){var a=i||ie(n.head,n.anchor)?0:1,l=ie(n.head,n.anchor)?1:0;return o=Z(n.head,0,a),{ranges:[{anchor:s=Z(n.anchor,0,l),head:o}],primary:0}}if("line"==r){if(ie(n.head,n.anchor))o.ch=0,s.ch=le(e,s.line);else{s.ch=0;var c=e.lastLine();o.line>c&&(o.line=c),o.ch=le(e,o.line)}return{ranges:[{anchor:s,head:o}],primary:0}}if("block"==r){var u=Math.min(s.line,o.line),h=s.ch,f=Math.max(s.line,o.line),d=o.ch;h<d?d+=1:h+=1;for(var p=f-u+1,m=o.line==u?0:p-1,g=[],v=0;v<p;v++)g.push({anchor:new t(u+v,h),head:new t(u+v,d)});return{ranges:g,primary:m}}}function ge(t,n){var r=t.state.vim;!1!==n&&t.setCursor(Y(t,r.sel.head)),de(t,r),r.visualMode=!1,r.visualLine=!1,r.visualBlock=!1,r.insertMode||e.signal(t,"vim-mode-change",{mode:"normal"})}function ve(e){if(!e)return 0;var t=e.search(/\S/);return-1==t?e.length:t}function ye(e,n,r,i,o){for(var s=function(e){var t=e.getCursor("head");return 1==e.getSelection().length&&(t=oe(t,e.getCursor("anchor"))),t}(e),a=e.getLine(s.line),l=s.ch,c=o?p[0]:m[0];!c(a.charAt(l));)if(++l>=a.length)return null;i?c=m[0]:(c=p[0])(a.charAt(l))||(c=p[1]);for(var u=l,h=l;c(a.charAt(u))&&u<a.length;)u++;for(;c(a.charAt(h))&&h>=0;)h--;if(h++,n){for(var f=u;/\s/.test(a.charAt(u))&&u<a.length;)u++;if(f==u){for(var d=h;/\s/.test(a.charAt(h-1))&&h>0;)h--;h||(h=d)}}return{start:new t(s.line,h),end:new t(s.line,u)}}function we(e,t,n){re(t,n)||P.jumpList.add(e,t,n)}function be(e,t){P.lastCharacterSearch.increment=e,P.lastCharacterSearch.forward=t.forward,P.lastCharacterSearch.selectedCharacter=t.selectedCharacter}var ke={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},xe={bracket:{isComplete:function(e){if(e.nextCh===e.symb){if(e.depth++,e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return 0===e.index&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t="*"===e.lastCh&&"/"===e.nextCh;return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb="m"===e.symb?"{":"}",e.reverseSymb="{"===e.symb?"}":"{"},isComplete:function(e){return e.nextCh===e.symb}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if("#"===e.nextCh){var t=e.lineText.match(/^#(\w+)/)[1];if("endif"===t){if(e.forward&&0===e.depth)return!0;e.depth++}else if("if"===t){if(!e.forward&&0===e.depth)return!0;e.depth--}if("else"===t&&0===e.depth)return!0}return!1}}};function Se(e,t,n,r,i){var o=t.line,s=t.ch,a=e.getLine(o),l=n?1:-1,c=r?m:p;if(i&&""==a){if(o+=l,a=e.getLine(o),!S(e,o))return null;s=n?0:a.length}for(;;){if(i&&""==a)return{from:0,to:0,line:o};for(var u=l>0?a.length:-1,h=u,f=u;s!=u;){for(var d=!1,g=0;g<c.length&&!d;++g)if(c[g](a.charAt(s))){for(h=s;s!=u&&c[g](a.charAt(s));)s+=l;if(d=h!=(f=s),h==t.ch&&o==t.line&&f==h+l)continue;return{from:Math.min(h,f+1),to:Math.max(h,f),line:o}}d||(s+=l)}if(!S(e,o+=l))return null;a=e.getLine(o),s=l>0?0:a.length}}function Ce(e,n,r,i,o){var s=new t(n.line+r.repeat-1,1/0),a=e.clipPos(s);return a.ch--,o||(i.lastHPos=1/0,i.lastHSPos=e.charCoords(a,"div").left),s}function Me(e,n,r,i){for(var o,s=e.getCursor(),a=s.ch,l=0;l<n;l++){if(-1==(o=Ee(a,e.getLine(s.line),i,r,!0)))return null;a=o}return new t(e.getCursor().line,o)}function Ae(e,t,n,r){O(n,k)&&(t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r))}function Ee(e,t,n,r,i){var o;return r?-1==(o=t.indexOf(n,e+1))||i||(o-=1):-1==(o=t.lastIndexOf(n,e-1))||i||(o+=1),o}function Oe(e,n,r,i,o){var s,a=n.line,l=e.firstLine(),c=e.lastLine(),u=a;function h(t){return!e.getLine(t)}function f(e,t,n){return n?h(e)!=h(e+t):!h(e)&&h(e+t)}if(i){for(;l<=u&&u<=c&&r>0;)f(u,i)&&r--,u+=i;return new t(u,0)}var d=e.state.vim;if(d.visualLine&&f(a,1,!0)){var p=d.sel.anchor;f(p.line,-1,!0)&&(o&&p.line==a||(a+=1))}var m=h(a);for(u=a;u<=c&&r;u++)f(u,1,!0)&&(o&&h(u)==m||r--);for(s=new t(u,0),u>c&&!m?m=!0:o=!1,u=a;u>l&&(o&&h(u)!=m&&u!=a||!f(u,-1,!0));u--);return{start:new t(u,0),end:s}}function Le(){}function Te(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new Le)}function Re(e,t){var n=De(e,t)||[];if(!n.length)return[];var r=[];if(0===n[0]){for(var i=0;i<n.length;i++)"number"==typeof n[i]&&r.push(e.substring(n[i]+1,n[i+1]));return r}}function De(e,t){t||(t="/");for(var n=!1,r=[],i=0;i<e.length;i++){var o=e.charAt(i);n||o!=t||r.push(i),n=!n&&"\\"==o}return r}T("pcre",!0,"boolean"),Le.prototype={getQuery:function(){return P.query},setQuery:function(e){P.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return P.isReversed},setReversed:function(e){P.isReversed=e},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(e){this.annotate=e}};var Pe={"\\n":"\n","\\r":"\r","\\t":"\t"};var Ne={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\&":"&"};function Be(e,t,n){if(P.registerController.getRegister("/").setText(e),e instanceof RegExp)return e;var r,i,o=De(e,"/");o.length?(r=e.substring(0,o[0]),i=-1!=e.substring(o[0]).indexOf("i")):r=e;return r?(D("pcre")||(r=function(e){for(var t=!1,n=[],r=-1;r<e.length;r++){var i=e.charAt(r)||"",o=e.charAt(r+1)||"",s=o&&-1!="|(){".indexOf(o);t?("\\"===i&&s||n.push(i),t=!1):"\\"===i?(t=!0,o&&-1!="}".indexOf(o)&&(s=!0),s&&"\\"!==o||n.push(i)):(n.push(i),s&&"\\"!==o&&n.push("\\"))}return n.join("")}(r)),n&&(t=/^[^A-Z]*$/.test(r)),new RegExp(r,t||i?"im":"m")):null}function Ie(e){"string"==typeof e&&(e=document.createElement(e));for(var t,n=1;n<arguments.length;n++)if(t=arguments[n])if("object"!=typeof t&&(t=document.createTextNode(t)),t.nodeType)e.appendChild(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&("$"===r[0]?e.style[r.slice(1)]=t[r]:e.setAttribute(r,t[r]));return e}function _e(e,t){var n=Ie("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},t);e.openNotification?e.openNotification(n,{bottom:!0,duration:5e3}):alert(n.innerText)}function ze(e,t){var n,r,i=(n=t.prefix,r=t.desc,Ie(document.createDocumentFragment(),Ie("span",{$fontFamily:"monospace",$whiteSpace:"pre"},n,Ie("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),r&&Ie("span",{$color:"#888"},r)));if(e.openDialog)e.openDialog(i,t.onClose,{onKeyDown:t.onKeyDown,onKeyUp:t.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:t.value,onClose:function(){e.state.vim&&W(e)}});else{var o="";"string"!=typeof t.prefix&&t.prefix&&(o+=t.prefix.textContent),t.desc&&(o+=" "+t.desc),t.onClose(prompt(o,""))}}function Fe(e,t,n,r){if(t){var i=Te(e),o=Be(t,!!n,!!r);if(o)return He(e,o),function(e,t){if(e instanceof RegExp&&t instanceof RegExp){for(var n=["global","multiline","ignoreCase","source"],r=0;r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}return!0}return!1}(o,i.getQuery())||i.setQuery(o),o}}var Ve=0;function He(e,t){clearTimeout(Ve),Ve=setTimeout((function(){if(e.state.vim){var n=Te(e),r=n.getOverlay();r&&t==r.query||(r&&e.removeOverlay(r),r=function(e){if("^"==e.source.charAt(0))var t=!0;return{token:function(n){if(!t||n.sol()){var r=n.match(e,!1);if(r)return 0==r[0].length?(n.next(),"searching"):n.sol()||(n.backUp(1),e.exec(n.next()+r[0]))?(n.match(e),"searching"):(n.next(),null);for(;!n.eol()&&(n.next(),!n.match(e,!1)););}else n.skipToEnd()},query:e}}(t),e.addOverlay(r),e.showMatchesOnScrollbar&&(n.getScrollbarAnnotate()&&n.getScrollbarAnnotate().clear(),n.setScrollbarAnnotate(e.showMatchesOnScrollbar(t))),n.setOverlay(r))}}),50)}function We(e,n,r,i){return void 0===i&&(i=1),e.operation((function(){for(var o=e.getCursor(),s=e.getSearchCursor(r,o),a=0;a<i;a++){var l=s.find(n);if(0==a&&l&&re(s.from(),o)){var c=n?s.from():s.to();(l=s.find(n))&&!l[0]&&re(s.from(),c)&&e.getLine(c.line).length==c.ch&&(l=s.find(n))}if(!l&&!(s=e.getSearchCursor(r,n?new t(e.lastLine()):new t(e.firstLine(),0))).find(n))return}return s.from()}))}function je(e){var t=Te(e);e.removeOverlay(Te(e).getOverlay()),t.setOverlay(null),t.getScrollbarAnnotate()&&(t.getScrollbarAnnotate().clear(),t.setScrollbarAnnotate(null))}function Ue(e,t,n){return"number"!=typeof e&&(e=e.line),t instanceof Array?O(e,t):"number"==typeof n?e>=t&&e<=n:e==t}function Ke(e){var t=e.getScrollInfo(),n=e.coordsChar({left:0,top:6+t.top},"local"),r=t.clientHeight-10+t.top,i=e.coordsChar({left:0,top:r},"local");return{top:n.line,bottom:i.line}}function qe(e,n,r){if("'"==r||"`"==r)return P.jumpList.find(e,-1)||new t(0,0);if("."==r)return $e(e);var i=n.marks[r];return i&&i.find()}function $e(e){for(var t=e.doc.history.done,n=t.length;n--;)if(t[n].changes)return ne(t[n].changes[0].to)}var Qe=function(){this.buildCommandMap_()};Qe.prototype={processCommand:function(e,t,n){var r=this;e.operation((function(){e.curOp.isVimOp=!0,r._processCommand(e,t,n)}))},_processCommand:function(t,n,r){var i=t.state.vim,o=P.registerController.getRegister(":"),s=o.toString();i.visualMode&&ge(t);var a=new e.StringStream(n);o.setText(n);var l,c,u=r||{};u.input=n;try{this.parseInput_(t,a,u)}catch(e){throw _e(t,e.toString()),e}if(u.commandName){if(l=this.matchCommand_(u.commandName)){if(c=l.name,l.excludeFromCommandHistory&&o.setText(s),this.parseCommandArgs_(a,u,l),"exToKey"==l.type){for(var h=0;h<l.toKeys.length;h++)V.handleKey(t,l.toKeys[h],"mapping");return}if("exToEx"==l.type)return void this.processCommand(t,l.toInput)}}else void 0!==u.line&&(c="move");if(c)try{Je[c](t,u),l&&l.possiblyAsync||!u.callback||u.callback()}catch(e){throw _e(t,e.toString()),e}else _e(t,'Not an editor command ":'+n+'"')},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),void 0!==n.line&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var r=t.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return n.commandName=r?r[1]:t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return this.parseLineSpecOffset_(t,e.getCursor().line);case"$":return this.parseLineSpecOffset_(t,e.lastLine());case"'":var r=t.next(),i=qe(e,e.state.vim,r);if(!i)throw new Error("Mark not set");return this.parseLineSpecOffset_(t,i.line);case"-":case"+":return t.backUp(1),this.parseLineSpecOffset_(t,e.getCursor().line);default:return void t.backUp(1)}},parseLineSpecOffset_:function(e,t){var n=e.match(/^([+-])?(\d+)/);if(n){var r=parseInt(n[2],10);"-"==n[1]?t-=r:t+=r}return t},parseCommandArgs_:function(e,t,n){if(!e.eol()){t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\s+/,i=ce(t.argString).split(r);i.length&&i[0]&&(t.args=i)}},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(0===r.name.indexOf(e))return r}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<o.length;e++){var t=o[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(e,t,n){if(":"!=e&&":"==e.charAt(0)){if(n)throw Error("Mode not supported for ex mappings");var i=e.substring(1);":"!=t&&":"==t.charAt(0)?this.commandMap_[i]={name:i,type:"exToEx",toInput:t.substring(1),user:!0}:this.commandMap_[i]={name:i,type:"exToKey",toKeys:t,user:!0}}else if(":"!=t&&":"==t.charAt(0)){var o={keys:e,type:"keyToEx",exArgs:{input:t.substring(1)}};n&&(o.context=n),r.unshift(o)}else{o={keys:e,type:"keyToKey",toKeys:t};n&&(o.context=n),r.unshift(o)}},unmap:function(e,t){if(":"!=e&&":"==e.charAt(0)){if(t)throw Error("Mode not supported for ex mappings");var n=e.substring(1);if(this.commandMap_[n]&&this.commandMap_[n].user)return delete this.commandMap_[n],!0}else for(var i=e,o=0;o<r.length;o++)if(i==r[o].keys&&r[o].context===t)return r.splice(o,1),!0}};var Je={colorscheme:function(e,t){!t.args||t.args.length<1?_e(e,e.getOption("theme")):e.setOption("theme",t.args[0])},map:function(e,t,n){var r=t.args;!r||r.length<2?e&&_e(e,"Invalid mapping: "+t.input):Ge.map(r[0],r[1],n)},imap:function(e,t){this.map(e,t,"insert")},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},unmap:function(e,t,n){var r=t.args;(!r||r.length<1||!Ge.unmap(r[0],n))&&e&&_e(e,"No such mapping: "+t.input)},move:function(e,t){q.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var n=t.args,r=t.setCfg||{};if(!n||n.length<1)e&&_e(e,"Invalid mapping: "+t.input);else{var i=n[0].split("="),o=i[0],s=i[1],a=!1;if("?"==o.charAt(o.length-1)){if(s)throw Error("Trailing characters: "+t.argString);o=o.substring(0,o.length-1),a=!0}void 0===s&&"no"==o.substring(0,2)&&(o=o.substring(2),s=!1);var l=L[o]&&"boolean"==L[o].type;if(l&&null==s&&(s=!0),!l&&void 0===s||a){var c=D(o,e,r);c instanceof Error?_e(e,c.message):_e(e,!0===c||!1===c?" "+(c?"":"no")+o:"  "+o+"="+c)}else{var u=R(o,s,e,r);u instanceof Error&&_e(e,u.message)}}},setlocal:function(e,t){t.setCfg={scope:"local"},this.set(e,t)},setglobal:function(e,t){t.setCfg={scope:"global"},this.set(e,t)},registers:function(e,t){var n=t.args,r=P.registerController.registers,i="----------Registers----------\n\n";if(n){n=n.join("");for(var o=0;o<n.length;o++){if(s=n.charAt(o),P.registerController.isValidRegister(s))i+='"'+s+"    "+(r[s]||new j).toString()+"\n"}}else for(var s in r){var a=r[s].toString();a.length&&(i+='"'+s+"    "+a+"\n")}_e(e,i)},sort:function(n,r){var i,o,s,a,l;var c=function(){if(r.argString){var t=new e.StringStream(r.argString);if(t.eat("!")&&(i=!0),t.eol())return;if(!t.eatSpace())return"Invalid arguments";var n=t.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!n&&!t.eol())return"Invalid arguments";if(n[1]){o=-1!=n[1].indexOf("i"),s=-1!=n[1].indexOf("u");var c=-1!=n[1].indexOf("d")||-1!=n[1].indexOf("n")&&1,u=-1!=n[1].indexOf("x")&&1,h=-1!=n[1].indexOf("o")&&1;if(c+u+h>1)return"Invalid arguments";a=(c?"decimal":u&&"hex")||h&&"octal"}n[2]&&(l=new RegExp(n[2].substr(1,n[2].length-2),o?"i":""))}}();if(c)_e(n,c+": "+r.argString);else{var u=r.line||n.firstLine(),h=r.lineEnd||r.line||n.lastLine();if(u!=h){var f=new t(u,0),d=new t(h,le(n,h)),p=n.getRange(f,d).split("\n"),m=l||("decimal"==a?/(-?)([\d]+)/:"hex"==a?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==a?/([0-7]+)/:null),g="decimal"==a?10:"hex"==a?16:"octal"==a?8:null,v=[],y=[];if(a||l)for(var w=0;w<p.length;w++){var b=l?p[w].match(l):null;b&&""!=b[0]?v.push(b):!l&&m.exec(p[w])?v.push(p[w]):y.push(p[w])}else y=p;if(v.sort(l?function(e,t){var n;return i&&(n=e,e=t,t=n),o&&(e[0]=e[0].toLowerCase(),t[0]=t[0].toLowerCase()),e[0]<t[0]?-1:1}:S),l)for(w=0;w<v.length;w++)v[w]=v[w].input;else a||y.sort(S);if(p=i?v.concat(y):y.concat(v),s){var k,x=p;p=[];for(w=0;w<x.length;w++)x[w]!=k&&p.push(x[w]),k=x[w]}n.replaceRange(p.join("\n"),f,d)}}function S(e,t){var n;i&&(n=e,e=t,t=n);o&&(e=e.toLowerCase(),t=t.toLowerCase());var r=a&&m.exec(e),s=a&&m.exec(t);return r?(r=parseInt((r[1]+r[2]).toLowerCase(),g))-(s=parseInt((s[1]+s[2]).toLowerCase(),g)):e<t?-1:1}},vglobal:function(e,t){this.global(e,t)},global:function(e,t){var n=t.argString;if(n){var r,i="v"===t.commandName[0],o=void 0!==t.line?t.line:e.firstLine(),s=t.lineEnd||t.line||e.lastLine(),a=function(e){return Re(e,"/")}(n),l=n;if(a.length&&(l=a[0],r=a.slice(1,a.length).join("/")),l)try{Fe(e,l,!0,!0)}catch(t){return void _e(e,"Invalid regex: "+l)}for(var c=Te(e).getQuery(),u=[],h=o;h<=s;h++){var f=e.getLineHandle(h);c.test(f.text)!==i&&u.push(r?f:f.text)}if(r){var d=0,p=function(){if(d<u.length){var t=u[d++],n=e.getLineNumber(t);if(null==n)return void p();var i=n+1+r;Ge.processCommand(e,i,{callback:p})}};p()}else _e(e,u.join("\n"))}else _e(e,"Regular Expression missing from global")},substitute:function(n,r){if(!n.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var i,o,s,a,l=r.argString,c=l?Re(l,l[0]):[],u="",h=!1,f=!1;if(c.length)i=c[0],D("pcre")&&""!==i&&(i=new RegExp(i).source),void 0!==(u=c[1])&&(u=D("pcre")?function(t){for(var n=new e.StringStream(t),r=[];!n.eol();){for(;n.peek()&&"\\"!=n.peek();)r.push(n.next());var i=!1;for(var o in Ne)if(n.match(o,!0)){i=!0,r.push(Ne[o]);break}i||r.push(n.next())}return r.join("")}(u.replace(/([^\\])&/g,"$1$$&")):function(e){for(var t,n=!1,r=[],i=-1;i<e.length;i++){var o=e.charAt(i)||"",s=e.charAt(i+1)||"";Pe[o+s]?(r.push(Pe[o+s]),i++):n?(r.push(o),n=!1):"\\"===o?(n=!0,t=s,d.test(t)||"$"===s?r.push("$"):"/"!==s&&"\\"!==s&&r.push("\\")):("$"===o&&r.push("$"),r.push(o),"/"===s&&r.push("\\"))}return r.join("")}(u),P.lastSubstituteReplacePart=u),o=c[2]?c[2].split(" "):[];else if(l&&l.length)return void _e(n,"Substitutions should be of the form :s/pattern/replace/");if(o&&(s=o[0],a=parseInt(o[1]),s&&(-1!=s.indexOf("c")&&(h=!0),-1!=s.indexOf("g")&&(f=!0),i=D("pcre")?i+"/"+s:i.replace(/\//g,"\\/")+"/"+s)),i)try{Fe(n,i,!0,!0)}catch(e){return void _e(n,"Invalid regex: "+i)}if(void 0!==(u=u||P.lastSubstituteReplacePart)){var p=Te(n).getQuery(),m=void 0!==r.line?r.line:n.getCursor().line,g=r.lineEnd||m;m==n.firstLine()&&g==n.lastLine()&&(g=1/0),a&&(g=(m=g)+a-1);var v=Y(n,new t(m,0)),y=n.getSearchCursor(p,v);!function(t,n,r,i,o,s,a,l,c){t.state.vim.exMode=!0;var u,h,f,d=!1;function p(){t.operation((function(){for(;!d;)m(),v();y()}))}function m(){var e=t.getRange(s.from(),s.to()).replace(a,l),n=s.to().line;s.replace(e),h=s.to().line,o+=h-n,f=h<n}function g(){var e=u&&ne(s.to()),t=s.findNext();return t&&!t[0]&&e&&re(s.from(),e)&&(t=s.findNext()),t}function v(){for(;g()&&Ue(s.from(),i,o);)if(r||s.from().line!=h||f)return t.scrollIntoView(s.from(),30),t.setSelection(s.from(),s.to()),u=s.from(),void(d=!1);d=!0}function y(e){if(e&&e(),t.focus(),u){t.setCursor(u);var n=t.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=u.ch}c&&c()}function w(n,r,i){switch(e.e_stop(n),e.keyName(n)){case"Y":m(),v();break;case"N":v();break;case"A":var o=c;c=void 0,t.operation(p),c=o;break;case"L":m();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":y(i)}return d&&y(i),!0}if(v(),d)return void _e(t,"No matches for "+a.source);if(!n)return p(),void(c&&c());ze(t,{prefix:Ie("span","replace with ",Ie("strong",l)," (y/n/a/q/l)"),onKeyDown:w})}(n,h,f,m,g,y,p,u,r.callback)}else _e(n,"No previous substitute regular expression")},redo:e.commands.redo,undo:e.commands.undo,write:function(t){e.commands.save?e.commands.save(t):t.save&&t.save()},nohlsearch:function(e){je(e)},yank:function(e){var t=ne(e.getCursor()).line,n=e.getLine(t);P.registerController.pushText("0","yank",n,!0,!0)},delmarks:function(t,n){if(n.argString&&ce(n.argString))for(var r=t.state.vim,i=new e.StringStream(ce(n.argString));!i.eol();){i.eatSpace();var o=i.pos;if(!i.match(/[a-zA-Z]/,!1))return void _e(t,"Invalid argument: "+n.argString.substring(o));var s=i.next();if(i.match("-",!0)){if(!i.match(/[a-zA-Z]/,!1))return void _e(t,"Invalid argument: "+n.argString.substring(o));var a=s,l=i.next();if(!(C(a)&&C(l)||M(a)&&M(l)))return void _e(t,"Invalid argument: "+a+"-");var c=a.charCodeAt(0),u=l.charCodeAt(0);if(c>=u)return void _e(t,"Invalid argument: "+n.argString.substring(o));for(var h=0;h<=u-c;h++){var f=String.fromCharCode(c+h);delete r.marks[f]}}else delete r.marks[s]}else _e(t,"Argument required")}},Ge=new Qe;function Ye(t){var n=t.state.vim,r=P.macroModeState,i=P.registerController.getRegister("."),o=r.isPlaying,s=r.lastInsertModeChanges;o||(t.off("change",et),e.off(t.getInputField(),"keydown",it)),!o&&n.insertModeRepeat>1&&(ot(t,n,n.insertModeRepeat-1,!0),n.lastEditInputState.repeatOverride=n.insertModeRepeat),delete n.insertModeRepeat,n.insertMode=!1,t.setCursor(t.getCursor().line,t.getCursor().ch-1),t.setOption("keyMap","vim"),t.setOption("disableInput",!0),t.toggleOverwrite(!1),i.setText(s.changes.join("")),e.signal(t,"vim-mode-change",{mode:"normal"}),r.isRecording&&function(e){if(e.isPlaying)return;var t=e.latestRegister,n=P.registerController.getRegister(t);n&&n.pushInsertModeChanges&&n.pushInsertModeChanges(e.lastInsertModeChanges)}(r)}function Xe(e){r.unshift(e)}function Ze(e,t,n,r){var i=P.registerController.getRegister(r);if(":"==r)return i.keyBuffer[0]&&Ge.processCommand(e,i.keyBuffer[0]),void(n.isPlaying=!1);var o=i.keyBuffer,s=0;n.isPlaying=!0,n.replaySearchQueries=i.searchQueries.slice(0);for(var a=0;a<o.length;a++)for(var l,c,u=o[a];u;)if(c=(l=/<\w+-.+?>|<\w+>|./.exec(u))[0],u=u.substring(l.index+c.length),V.handleKey(e,c,"macro"),t.insertMode){var h=i.insertModeChanges[s++].changes;P.macroModeState.lastInsertModeChanges.changes=h,st(e,h,1),Ye(e)}n.isPlaying=!1}function et(e,t){var n=P.macroModeState,r=n.lastInsertModeChanges;if(!n.isPlaying)for(;t;){if(r.expectCursorActivityForChange=!0,r.ignoreCount>1)r.ignoreCount--;else if("+input"==t.origin||"paste"==t.origin||void 0===t.origin){var i=e.listSelections().length;i>1&&(r.ignoreCount=i);var o=t.text.join("\n");r.maybeReset&&(r.changes=[],r.maybeReset=!1),o&&(e.state.overwrite&&!/\n/.test(o)?r.changes.push([o]):r.changes.push(o))}t=t.next}}function tt(e){var t=e.state.vim;if(t.insertMode){var n=P.macroModeState;if(n.isPlaying)return;var r=n.lastInsertModeChanges;r.expectCursorActivityForChange?r.expectCursorActivityForChange=!1:r.maybeReset=!0}else e.curOp.isVimOp||nt(e,t)}function nt(t,n){var r=t.getCursor("anchor"),i=t.getCursor("head");if(n.visualMode&&!t.somethingSelected()?ge(t,!1):n.visualMode||n.insertMode||!t.somethingSelected()||(n.visualMode=!0,n.visualLine=!1,e.signal(t,"vim-mode-change",{mode:"visual"})),n.visualMode){var o=ie(i,r)?0:-1,s=ie(i,r)?-1:0;i=Z(i,0,o),r=Z(r,0,s),n.sel={anchor:r,head:i},Ae(t,n,"<",oe(i,r)),Ae(t,n,">",se(i,r))}else n.insertMode||(n.lastHPos=t.getCursor().ch)}function rt(e){this.keyName=e}function it(t){var n=P.macroModeState.lastInsertModeChanges,r=e.keyName(t);r&&(-1==r.indexOf("Delete")&&-1==r.indexOf("Backspace")||e.lookupKey(r,"vim-insert",(function(){return n.maybeReset&&(n.changes=[],n.maybeReset=!1),n.changes.push(new rt(r)),!0})))}function ot(e,t,n,r){var i=P.macroModeState;i.isPlaying=!0;var o=!!t.lastEditActionCommand,s=t.inputState;function a(){o?q.processAction(e,t,t.lastEditActionCommand):q.evalInput(e,t)}function l(n){if(i.lastInsertModeChanges.changes.length>0){n=t.lastEditActionCommand?n:1;var r=i.lastInsertModeChanges;st(e,r.changes,n)}}if(t.inputState=t.lastEditInputState,o&&t.lastEditActionCommand.interlaceInsertRepeat)for(var c=0;c<n;c++)a(),l(1);else r||a(),l(n);t.inputState=s,t.insertMode&&!r&&Ye(e),i.isPlaying=!1}function st(t,n,r){function i(n){return"string"==typeof n?e.commands[n](t):n(t),!0}var o=t.getCursor("head"),s=P.macroModeState.lastInsertModeChanges.visualBlock;s&&(fe(t,o,s+1),r=t.listSelections().length,t.setCursor(o));for(var a=0;a<r;a++){s&&t.setCursor(Z(o,a,0));for(var l=0;l<n.length;l++){var c=n[l];if(c instanceof rt)e.lookupKey(c.keyName,"vim-insert",i);else if("string"==typeof c)t.replaceSelection(c);else{var u=t.getCursor(),h=Z(u,0,c[0].length);t.replaceRange(c[0],u,h),t.setCursor(h)}}}s&&t.setCursor(Z(o,0,1))}function at(e){var t=new e.constructor;return Object.keys(e).forEach((function(n){var r=e[n];Array.isArray(r)?r=r.slice():r&&"object"==typeof r&&r.constructor!=Object&&(r=at(r)),t[n]=r})),e.sel&&(t.sel={head:e.sel.head&&ne(e.sel.head),anchor:e.sel.anchor&&ne(e.sel.anchor)}),t}return e.keyMap.vim={attach:l,detach:a,call:c},T("insertModeEscKeysTimeout",200,"number"),e.keyMap["vim-insert"]={fallthrough:["default"],attach:l,detach:a,call:c},e.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:l,detach:a,call:c},F(),V}function dh(e,t){var n=t.ch,r=t.line+1;r<1&&(r=1,n=0),r>e.lines&&(r=e.lines,n=Number.MAX_VALUE);var i=e.line(r);return Math.min(i.from+Math.max(0,n),i.to)}function ph(e,t){let n=e.lineAt(t);return{line:n.number-1,ch:t-n.from}}class mh{constructor(e,t){this.line=e,this.ch=t}}function gh(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||[]).concat(n)}}function vh(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else{var r=e._handlers,i=r&&r[t];if(i){var o=i.indexOf(n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function yh(e,t,...n){var r,i=null===(r=e._handlers)||void 0===r?void 0:r[t];if(i)for(var o=0;o<i.length;++o)i[o](...n)}function wh(e,...t){if(e)for(var n=0;n<e.length;++n)e[n](...t)}var bh={Return:"CR",Backspace:"BS",Delete:"Del",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"CR"," ":"Space"},kh={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1};let xh;try{xh=new RegExp("[\\w\\p{Alphabetic}\\p{Number}_]","u")}catch(e){xh=/[\w]/}function Sh(e,t){if(t.annotations)try{t.annotations.some((function(e){"input"==e.value&&(e.value="input.type.compose")}))}catch(e){console.error(e)}else t.userEvent="input.type.compose";return e.dispatch(t)}class Ch{constructor(e){this.state={},this.marks=Object.create(null),this.$mid=0,this.options={},this._handlers={},this.doc={history:{done:[{changes:[{cm:this,get to(){return this.cm.posFromIndex(this.cm.$lastChangeEndOffset)}}]}]}},this.$lastChangeEndOffset=0,this.virtualSelection=null,this.cm6=e,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this)}openDialog(e,t,n){return function(e,t,n,r){r||(r={});Ah(e,void 0);var i=Mh(e,t,r.bottom),o=!1;function s(t){if("string"==typeof t)a.value=t;else{if(o)return;o=!0,Oh(e,i),e.state.dialog||e.focus(),r.onClose&&r.onClose(i)}}Eh(e,i);var a=i.getElementsByTagName("input")[0];a&&(r.value&&(a.value=r.value,!1!==r.selectValueOnOpen&&a.select()),r.onInput&&Ch.on(a,"input",(function(e){r.onInput(e,a.value,s)})),r.onKeyUp&&Ch.on(a,"keyup",(function(e){r.onKeyUp(e,a.value,s)})),Ch.on(a,"keydown",(function(e){r&&r.onKeyDown&&r.onKeyDown(e,a.value,s)||(13==e.keyCode&&n(a.value),(27==e.keyCode||!1!==r.closeOnEnter&&13==e.keyCode)&&(a.blur(),Ch.e_stop(e),s()))})),!1!==r.closeOnBlur&&Ch.on(a,"blur",(function(){setTimeout((function(){document.activeElement!==a&&s()}))})),a.focus());return s}(this,e,t,n)}openNotification(e,t){return function(e,t,n){Ah(e,a);var r,i=Mh(e,t,n&&n.bottom),o=!1,s=n&&void 0!==n.duration?n.duration:5e3;function a(){o||(o=!0,clearTimeout(r),i.remove(),Oh(e,i))}i.onclick=function(e){e.preventDefault(),a()},Eh(e,i),s&&(r=setTimeout(a,s));return a}(this,e,t)}on(e,t){gh(this,e,t)}off(e,t){vh(this,e,t)}signal(e,t,n){yh(this,e,t,n)}indexFromPos(e){return dh(this.cm6.state.doc,e)}posFromIndex(e){return ph(this.cm6.state.doc,e)}foldCode(e){let t=this.cm6,n=t.state.selection.ranges,r=dh(this.cm6.state.doc,e),i=we.create([we.range(r,r)],0).ranges;t.state.selection.ranges=i,_a(t),t.state.selection.ranges=n}firstLine(){return 0}lastLine(){return this.cm6.state.doc.lines-1}lineCount(){return this.cm6.state.doc.lines}setCursor(e,t){"object"==typeof e&&(t=e.ch,e=e.line);var n=dh(this.cm6.state.doc,{line:e,ch:t});this.cm6.dispatch({selection:{anchor:n}},{scrollIntoView:!this.curOp}),this.curOp&&!this.curOp.isVimOp&&this.onBeforeEndOperation()}getCursor(e){var t=this.cm6.state.selection.main,n="head"!=e&&e?"anchor"==e?t.anchor:"start"==e?t.from:"end"==e?t.to:null:t.head;if(null==n)throw new Error("Invalid cursor type");return this.posFromIndex(n)}listSelections(){var e=this.cm6.state.doc;return this.cm6.state.selection.ranges.map((t=>({anchor:ph(e,t.anchor),head:ph(e,t.head)})))}setSelections(e,t){var n=this.cm6.state.doc,r=e.map((e=>we.range(dh(n,e.anchor),dh(n,e.head))));this.cm6.dispatch({selection:we.create(r,t)})}setSelection(e,t,n){var r=this.cm6.state.doc,i=[we.range(dh(r,e),dh(r,t))];this.cm6.dispatch({selection:we.create(i,0)}),n&&"*mouse"==n.origin&&this.onBeforeEndOperation()}getLine(e){var t=this.cm6.state.doc;return e<0||e>=t.lines?"":this.cm6.state.doc.line(e+1).text}getLineHandle(e){return{text:this.getLine(e),row:e}}getLineNumber(e){return e.row}getRange(e,t){var n=this.cm6.state.doc;return this.cm6.state.sliceDoc(dh(n,e),dh(n,t))}replaceRange(e,t,n){n||(n=t);var r=this.cm6.state.doc,i=dh(r,t),o=dh(r,n);Sh(this.cm6,{changes:{from:i,to:o,insert:e}})}replaceSelection(e){Sh(this.cm6,this.cm6.state.replaceSelection(e))}replaceSelections(e){var t=this.cm6.state.selection.ranges.map(((t,n)=>({from:t.from,to:t.to,insert:e[n]||""})));Sh(this.cm6,{changes:t})}getSelection(){return this.getSelections().join("\n")}getSelections(){var e=this.cm6;return e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to)))}somethingSelected(){return this.cm6.state.selection.ranges.some((e=>!e.empty))}getInputField(){return this.cm6.contentDOM}clipPos(e){var t=this.cm6.state.doc,n=e.ch,r=e.line+1;r<1&&(r=1,n=0),r>t.lines&&(r=t.lines,n=Number.MAX_VALUE);var i=t.line(r);return n=Math.min(Math.max(0,n),i.to-i.from),new mh(r-1,n)}getValue(){return this.cm6.state.doc.toString()}setValue(e){var t=this.cm6;return t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e},selection:we.range(0,0)})}focus(){return this.cm6.focus()}blur(){return this.cm6.contentDOM.blur()}defaultTextHeight(){return this.cm6.defaultLineHeight}findMatchingBracket(e){var t=this.cm6.state,n=dh(t.doc,e),r=Xa(t,n+1,-1);return r&&r.end||(r=Xa(t,n,1))&&r.end?{to:ph(t.doc,r.end.from)}:{to:void 0}}scanForBracket(e,t,n,r){return function(e,t,n,r,i){for(var o=i&&i.maxScanLineLength||1e4,s=i&&i.maxScanLines||1e3,a=[],l=function(e){return e&&e.bracketRegex||/[(){}[\]]/}(i),c=n>0?Math.min(t.line+s,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-s),u=t.line;u!=c;u+=n){var h=e.getLine(u);if(h){var f=n>0?0:h.length-1,d=n>0?h.length:-1;if(!(h.length>o))for(u==t.line&&(f=t.ch-(n<0?1:0));f!=d;f+=n){var p=h.charAt(f);if(l.test(p)){var m=Lh[p];if(m&&">"==m.charAt(1)==n>0)a.push(p);else{if(!a.length)return{pos:new mh(u,f),ch:p};a.pop()}}}}}return u-n!=(n>0?e.lastLine():e.firstLine())&&null}(this,e,t,0,r)}indentLine(e,t){t?this.indentMore():this.indentLess()}indentMore(){Xl(this.cm6)}indentLess(){Zl(this.cm6)}execCommand(e){"indentAuto"==e?Ch.commands.indentAuto(this):console.log(e+" is not implemented")}setBookmark(e,t){var n=(null==t?void 0:t.insertLeft)?1:-1,r=this.indexFromPos(e);return new Rh(this,r,n)}addOverlay({query:e}){let t=new Rc({regexp:!0,search:e.source,caseSensitive:!/i/.test(e.flags)});if(t.valid){t.forVim=!0,this.cm6Query=t;let e=_c.of(t);return this.cm6.dispatch({effects:e}),t}}removeOverlay(e){if(!this.cm6Query)return;this.cm6Query.forVim=!1;let t=_c.of(this.cm6Query);this.cm6.dispatch({effects:t})}getSearchCursor(e,t){var n=this,r=null,i=null;null==t.ch&&(t.ch=Number.MAX_VALUE);var o=dh(n.cm6.state.doc,t),s=e.source.replace(/(\\.|{(?:\d+(?:,\d*)?|,\d+)})|[{}]/g,(function(e,t){return t||"\\"+e}));function a(t,n=0,r=t.length){return new pc(t,s,{ignoreCase:e.ignoreCase},n,r)}return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var t=n.cm6.state.doc;if(e){let e=r?r.from==r.to?r.to-1:r.from:o;r=function(e,t){var r=n.cm6.state.doc;for(let n=1;;n++){let i=Math.max(e,t-1e4*n),o=a(r,i,t),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==e||s.from>i+10))return s;if(i==e)return null}}(0,e)}else{let e=r?r.from==r.to?r.to+1:r.to:o;r=function(e){var t=n.cm6.state.doc;if(e>t.length)return null;let r=a(t,e).next();return r.done?null:r.value}(e)}return i=r&&{from:ph(t,r.from),to:ph(t,r.to),match:r.match},r&&r.match},from:function(){return null==i?void 0:i.from},to:function(){return null==i?void 0:i.to},replace:function(e){r&&(Sh(n.cm6,{changes:{from:r.from,to:r.to,insert:e}}),r.to=r.from+e.length,i&&(i.to=ph(n.cm6.state.doc,r.to)))}}}findPosV(e,t,n,r){let{cm6:i}=this;const o=i.state.doc;let s="page"==n?i.dom.clientHeight:0;const a=dh(o,e);let l=we.range(a,a,r),c=Math.round(Math.abs(t));for(let e=0;e<c;e++)"page"==n?l=i.moveVertically(l,t>0,s):"line"==n&&(l=i.moveVertically(l,t>0));return ph(o,l.head)}charCoords(e,t){var n=this.cm6.contentDOM.getBoundingClientRect(),r=dh(this.cm6.state.doc,e),i=this.cm6.coordsAtPos(r),o=this.cm6.scrollDOM.scrollTop-n.top;return{left:((null==i?void 0:i.left)||0)-n.left,top:((null==i?void 0:i.top)||0)+o,bottom:((null==i?void 0:i.bottom)||0)+o}}coordsChar(e,t){var n=this.cm6.contentDOM.getBoundingClientRect(),r=this.cm6.posAtCoords({x:e.left+n.left,y:e.top+n.top})||0;return ph(this.cm6.state.doc,r)}getScrollInfo(){var e=this.cm6.scrollDOM;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight,width:e.scrollWidth,clientHeight:e.clientHeight,clientWidth:e.clientWidth}}scrollTo(e,t){null!=e&&(this.cm6.scrollDOM.scrollLeft=e),null!=t&&(this.cm6.scrollDOM.scrollTop=t)}scrollIntoView(e,t){if(e){var n=this.indexFromPos(e);this.cm6.dispatch({effects:go.scrollIntoView(n)})}else this.cm6.dispatch({scrollIntoView:!0,userEvent:"scroll"})}getWrapperElement(){return this.cm6.dom}getMode(){return{name:this.getOption("mode")}}setSize(e,t){this.cm6.dom.style.width=e+4+"px",this.cm6.dom.style.height=t+"px",this.refresh()}refresh(){this.cm6.measure()}destroy(){this.removeOverlay()}onChange(e){for(let t in this.marks){this.marks[t].update(e.changes)}this.virtualSelection&&(this.virtualSelection.ranges=this.virtualSelection.ranges.map((t=>t.map(e.changes))));var t=this.curOp=this.curOp||{};e.changes.iterChanges(((e,n,r,i,o)=>{this.$lastChangeEndOffset=i;var s={text:o.toJSON()};t.lastChange?t.lastChange.next=t.lastChange=s:t.lastChange=t.change=s}),!0),t.changeHandlers||(t.changeHandlers=this._handlers.change&&this._handlers.change.slice())}onSelectionChange(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._handlers.cursorActivity&&this._handlers.cursorActivity.slice()),this.curOp.cursorActivity=!0}operation(e){this.curOp||(this.curOp={$d:0}),this.curOp.$d++;try{var t=e()}finally{this.curOp&&(this.curOp.$d--,this.curOp.$d||this.onBeforeEndOperation())}return t}onBeforeEndOperation(){var e=this.curOp,t=!1;e&&(e.change&&wh(e.changeHandlers,this,e.change),e&&e.cursorActivity&&(wh(e.cursorActivityHandlers,this,null),e.isVimOp&&(t=!0)),this.curOp=null),t&&this.scrollIntoView()}moveH(e,t){if("char"==t){var n=this.getCursor();this.setCursor(n.line,n.ch+e)}}setOption(e,t){if("keyMap"===e)this.state.keyMap=t}getOption(e){switch(e){case"firstLineNumber":return 1;case"tabSize":return this.cm6.state.tabSize||4;case"readonly":return this.cm6.state.readOnly;case"indentWithTabs":return"\t"==this.cm6.state.facet(ua);case"indentUnit":return this.cm6.state.facet(ua).length||2;case"keyMap":return this.state.keyMap||"vim"}}toggleOverwrite(e){this.state.overwrite=e}getTokenTypeAt(e){var t,n=this.indexFromPos(e),r=function(e,t,n=50){var r;let i=null===(r=e.field(Xs.state,!1))||void 0===r?void 0:r.context;return i&&(i.isDone(t)||i.work(n,t))?i.tree:null}(this.cm6.state,n),i=null==r?void 0:r.resolve(n),o=(null===(t=null==i?void 0:i.type)||void 0===t?void 0:t.name)||"";return/comment/i.test(o)?"comment":/string/i.test(o)?"string":""}overWriteSelection(e){var t=this.cm6.state.doc,n=this.cm6.state.selection,r=n.ranges.map((e=>{if(e.empty){var n=e.to<t.length?t.sliceString(e.from,e.to+1):"";if(n&&!/\n/.test(n))return we.range(e.from,e.to+1)}return e}));this.cm6.dispatch({selection:we.create(r,n.mainIndex)}),this.replaceSelection(e)}isInMultiSelectMode(){return this.cm6.state.selection.ranges.length>1}virtualSelectionMode(){return!!this.virtualSelection}forEachSelection(e){var t=this.cm6.state.selection;this.virtualSelection=we.create(t.ranges,t.mainIndex);for(var n=0;n<this.virtualSelection.ranges.length;n++){var r=this.virtualSelection.ranges[n];r&&(this.cm6.dispatch({selection:we.create([r])}),e(),this.virtualSelection.ranges[n]=this.cm6.state.selection.ranges[0])}this.cm6.dispatch({selection:this.virtualSelection}),this.virtualSelection=null}}function Mh(e,t,n){var r=document.createElement("div");return r.appendChild(t),r}function Ah(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}function Eh(e,t){var n=e.state.dialog;e.state.dialog=t,t&&n!==t&&(n&&n.contains(document.activeElement)&&e.focus(),n&&n.parentElement?n.parentElement.replaceChild(t,n):n&&n.remove(),Ch.signal(e,"dialog"))}function Oh(e,t){e.state.dialog==t&&(e.state.dialog=null,Ch.signal(e,"dialog"))}Ch.Pos=mh,Ch.StringStream=oh,Ch.commands={cursorCharLeft:function(e){ol(e.cm6)},redo:function(e){hs(e.cm6)},undo:function(e){us(e.cm6)},newlineAndIndent:function(e){Ql({state:e.cm6.state,dispatch:t=>Sh(e.cm6,t)})},indentAuto:function(e){Yl(e.cm6)}},Ch.defineOption=function(e,t,n){},Ch.isWordChar=function(e){return xh.test(e)},Ch.keys={Backspace:function(e){Vl(e.cm6)},Delete:function(e){Hl(e.cm6)}},Ch.keyMap={},Ch.addClass=function(){},Ch.rmClass=function(){},Ch.e_preventDefault=function(e){e.preventDefault()},Ch.e_stop=function(e){var t,n;null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e),null===(n=null==e?void 0:e.preventDefault)||void 0===n||n.call(e)},Ch.keyName=function(e){var t=e.key;if(!kh[t]){"Escape"==t&&(t="Esc")," "==t&&(t="Space"),t.length>1&&(t=t.replace(/Numpad|Arrow/,"")),1==t.length&&(t=t.toUpperCase());var n="";return e.ctrlKey&&(n+="Ctrl-"),e.altKey&&(n+="Alt-"),(n||t.length>1)&&e.shiftKey&&(n+="Shift-"),n+=t}},Ch.vimKey=function(e){var t=e.key;if(!kh[t]){t.length>1&&"n"==t[0]&&(t=t.replace("Numpad","")),t=bh[t]||t;var n="";return e.ctrlKey&&(n+="C-"),e.altKey&&(n+="A-"),e.metaKey&&(n+="M-"),(n||t.length>1)&&e.shiftKey&&(n+="S-"),(n+=t).length>1&&(n="<"+n+">"),n}},Ch.lookupKey=function(e,t,n){var r=Ch.keys[e];r&&n(r)},Ch.on=gh,Ch.off=vh,Ch.signal=yh,Ch.findMatchingTag=function(e,t){var n=e.cm6.state,r=e.indexFromPos(t),i=Xa(n,r+1,-1,{brackets:"\n\n"});if(i){if(!i.end||!i.start)return;return{open:Th(n.doc,i.end),close:Th(n.doc,i.start)}}if(i=Xa(n,r,1,{brackets:"\n\n"})){if(!i.end||!i.start)return;return{open:Th(n.doc,i.start),close:Th(n.doc,i.end)}}},Ch.findEnclosingTag=function(e,t){var n=e.cm6.state,r=e.indexFromPos(t),i=n.sliceDoc(0,r),o=r;for(;o>0;){var s=Xa(n,o,1,{brackets:"\n\n"});if(s&&s.start&&s.end)return{open:Th(n.doc,s.start),close:Th(n.doc,s.end)};o=i.lastIndexOf(">",o-1)}};var Lh={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function Th(e,t){return{from:ph(e,t.from),to:ph(e,t.to)}}class Rh{constructor(e,t,n){this.cm=e,this.id=e.$mid++,this.offset=t,this.assoc=n,e.marks[this.id]=this}clear(){delete this.cm.marks[this.id]}find(){return null==this.offset?null:this.cm.posFromIndex(this.offset)}update(e){null!=this.offset&&(this.offset=e.mapPos(this.offset,this.assoc,ce.TrackDel))}}class Dh{constructor(e,t,n,r,i,o,s,a,l,c){this.left=e,this.top=t,this.height=n,this.fontFamily=r,this.fontSize=i,this.fontWeight=o,this.color=s,this.className=a,this.letter=l,this.partial=c}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.fontFamily=this.fontFamily,e.style.fontSize=this.fontSize,e.style.fontWeight=this.fontWeight,e.style.color=this.partial?"transparent":this.color,e.className=this.className,e.textContent=this.letter}eq(e){return this.left==e.left&&this.top==e.top&&this.height==e.height&&this.fontFamily==e.fontFamily&&this.fontSize==e.fontSize&&this.fontWeight==e.fontWeight&&this.color==e.color&&this.className==e.className&&this.letter==e.letter}}class Ph{constructor(e,t){this.view=e,this.rangePieces=[],this.cursors=[],this.cm=t,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration="1200ms"}update(e){(e.selectionSet||e.geometryChanged||e.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink")}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:e}=this.view,t=[];for(let n of e.selection.ranges){let r=n==e.selection.main,i=Ih(this.cm,this.view,n,r);i&&t.push(i)}return{cursors:t}}drawSel({cursors:e}){if(e.length!=this.cursors.length||e.some(((e,t)=>!e.eq(this.cursors[t])))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const t of e)this.cursorLayer.appendChild(t.draw())}else e.forEach(((e,n)=>e.adjust(t[n])));this.cursors=e}}destroy(){this.cursorLayer.remove()}}const Nh={".cm-vimMode .cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696"}},Bh=Ie.override(go.theme(Nh));function Ih(e,t,n,r){let i=n.head,o=!1,s=1,a=e.state.vim;if(a&&(!a.insertMode||e.state.overwrite)){if(o=!0,a.visualBlock&&!r)return null;n.anchor<n.head&&i--,e.state.overwrite?s=.2:a.status&&(s=.5)}if(o){let e=t.coordsAtPos(i,n.assoc||1);if(!e)return null;let o=function(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Or.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}(t),a=t.domAtPos(i),l=a?a.node:t.contentDOM;for(;a&&a.node instanceof HTMLElement;)l=a.node,a={node:a.node.childNodes[a.offset],offset:0};l instanceof HTMLElement||(l=l.parentNode);let c=getComputedStyle(l),u=i<t.state.doc.length&&t.state.sliceDoc(i,i+1);u&&"\n"!=u&&"\r"!=u||(u="");let h=e.bottom-e.top;return new Dh(e.left-o.left,e.top-o.top+h*(1-s),h*s,c.fontFamily,c.fontSize,c.fontWeight,c.color,r?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",u,1!=s)}return null}const _h=fh(Ch),zh=go.baseTheme({".cm-vimMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"0px 10px",fontFamily:"monospace",minHeight:"1.3em"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"inherit"},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"}}),Fh=wr.fromClass(class{constructor(e){this.status="",this.query=null,this.decorations=Kn.none,this.view=e;const t=this.cm=new Ch(e);_h.enterVimMode(this.cm),this.view.cm=this.cm,this.cm.state.vimPlugin=this,this.blockCursor=new Ph(e,t),this.updateClass(),this.cm.on("vim-command-done",(()=>{t.state.vim&&(t.state.vim.status=""),this.blockCursor.scheduleRedraw(),this.updateStatus()})),this.cm.on("vim-mode-change",(e=>{t.state.vim.mode=e.mode,e.subMode&&(t.state.vim.mode+=" block"),t.state.vim.status="",this.blockCursor.scheduleRedraw(),this.updateClass(),this.updateStatus()})),this.cm.on("dialog",(()=>{this.cm.state.statusbar?this.updateStatus():e.dispatch({effects:Hh.of(!!this.cm.state.dialog)})})),this.dom=document.createElement("span"),this.dom.style.cssText="position: absolute; right: 10px; top: 1px"}update(e){var t;if(e.docChanged&&(this.cm.onChange(e),this.query&&this.highlight(this.query)),e.selectionSet&&this.cm.onSelectionChange(),e.viewportChanged,this.cm.curOp&&!this.cm.curOp.isVimOp&&this.cm.onBeforeEndOperation(),e.transactions)for(let n of e.transactions)for(let e of n.effects)if(e.is(_c)){if(null===(t=e.value)||void 0===t?void 0:t.forVim){let t=e.value.create();this.highlight(t)}else this.highlight(null)}this.blockCursor.update(e)}updateClass(){const e=this.cm.state;!e.vim||e.vim.insertMode&&!e.overwrite?this.view.scrollDOM.classList.remove("cm-vimMode"):this.view.scrollDOM.classList.add("cm-vimMode")}updateStatus(){let e=this.cm.state.statusbar;if(!e)return;let t=this.cm.state.dialog,n=this.cm.state.vim;t?t.parentElement!=e&&(e.textContent="",e.appendChild(t)):e.textContent=`--${(n.mode||"normal").toUpperCase()}--`,this.dom.textContent=n.status,e.appendChild(this.dom)}destroy(){this.cm.state.vim=null,this.updateClass(),this.blockCursor.destroy(),delete this.view.cm}highlight(e){if(this.query=e,!e)return this.decorations=Kn.none;let{view:t}=this,n=new Ct;for(let r=0,i=t.visibleRanges,o=i.length;r<o;r++){let{from:s,to:a}=i[r];for(;r<o-1&&a>i[r+1].from-500;)a=i[++r].to;e.highlight(t.state.doc,s,a,((e,t)=>{n.add(e,t,Vh)}))}return this.decorations=n.finish()}},{eventHandlers:{keydown:function(e,t){const n=Ch.vimKey(e),r=this.cm;if(!n)return;let i=r.state.vim;"<Esc>"!=n||i.insertMode||i.visualMode||!this.query||r.removeOverlay(null),r.state.vim.status=(r.state.vim.status||"")+n;let o=_h.multiSelectHandleKey(r,n,"user");return!o&&r.state.vim.insertMode&&r.state.overwrite&&(e.key&&1==e.key.length&&!/\n/.test(e.key)?(o=!0,r.overWriteSelection(e.key)):"Backspace"==e.key&&(o=!0,Ch.commands.cursorCharLeft(r))),o&&(e.preventDefault(),e.stopPropagation(),this.blockCursor.scheduleRedraw()),this.updateStatus(),!!o}},decorations:e=>e.decorations}),Vh=Kn.mark({class:"cm-searchMatch"}),Hh=Ze.define(),Wh=Le.define({create:()=>!1,update(e,t){for(let n of t.effects)n.is(Hh)&&(e=n.value);return e},provide:e=>ac.from(e,(e=>e?jh:null))});function jh(e){let t=document.createElement("div");t.className="cm-vim-panel";let n=e.cm;return n.state.dialog&&t.appendChild(n.state.dialog),{top:!1,dom:t}}function Uh(e){let t=document.createElement("div");t.className="cm-vim-panel";let n=e.cm;return n.state.statusbar=t,n.state.vimPlugin.updateStatus(),{dom:t}}function Kh(e={}){return[zh,Fh,Bh,e.status?ac.of(Uh):Wh]}function qh(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}Se.define();const $h=wr.fromClass(class{update(e){const t=[];for(const{from:n,to:r}of e.view.visibleRanges){const i=e.view.state.doc.lineAt(n),o=e.view.state.doc.lineAt(r);for(let n=i.number;n<=o.number;n++){const r=e.view.state.doc.line(n),i=(r.text.indexOf("- "),/\[\[([^\]]*)\]\]/g);let o;for(;null!==(o=i.exec(r.text));){let e=o.index,n=o[0].length;t.push(Kn.mark({inclusive:!1,class:"cm-wikilink"}).range(r.from+e,r.from+e+n))}}}this.decorations=Kn.set(t)}constructor(){this.decorations=Kn.none}},{decorations:e=>e.decorations,eventHandlers:{mousedown:(e,t)=>{let n=e.target;t.state.doc.lineAt(t.posAtDOM(n));n.classList.contains("cm-wikilink")&&console.log("pressed wikilink")},mousemove:(e,t)=>{e.target},dragstart:(e,t)=>{e.target},drag:(e,t)=>{e.target},dragenter:(e,t)=>{e.target}}});function Qh(e,t){for(let n=t;n>=1;n--){const t=Gh(e.line(n).text);if(t>0)return t}return 0}function Jh(e,t){for(let n=t;n>=1;n--){const t=Gh(e.line(n).text);if(t>0)return{rootBlockLine:n,blockLevel:t}}return{rootBlockLine:0,blockLevel:0}}function Gh(e){const t=e.indexOf("- ");return t>=0?t+2:0}const Yh=ht.transactionFilter.of((e=>{const t=e.newDoc,n=[];return e.changes.iterChanges(((e,r,i,o,s)=>{const a=t.lineAt(e),l=t.lineAt(o);for(let e=a.number;e<=l.number;e++){const r=t.line(e);if(Gh(r.text)<=0){const i=Qh(t,e)-(r.text.length-r.text.trimLeft().length)-2;i>-2&&n.push({from:r.from,insert:" ".repeat(i)+"- "})}}})),[e,{changes:n,sequential:!0}]}));qh({},"blockLevelChangeEffect",(()=>Xh));const Xh=Ze.define(),Zh=Se.define(),ef=ht.transactionFilter.of((e=>{let t=e.startState.facet(Zh);if(t.length){const n=e.effects.filter((e=>e.is(Xh))).map((e=>e.value));t.forEach((e=>{e(n)}))}return e}));class tf extends jn{constructor(e){super(),this.level=e}eq(e){return e.level==this.level}toDOM(){const e=document.createElement("span");e.classList.add("cm-dot");const t=document.createElement("span");return t.style.paddingRight="0.7ch",t.appendChild(e),t}ignoreEvent(){return!1}}const nf=wr.fromClass(class{update(e){const t=[];for(const{from:n,to:r}of e.view.visibleRanges){const i=e.view.state.doc.lineAt(n),o=e.view.state.doc.lineAt(r);for(let n=i.number;n<=o.number;n++){const r=e.view.state.doc.line(n),i=r.text.indexOf("- ");i>=0&&t.push(Kn.replace({widget:new tf(i),inclusiveStart:!0}).range(r.from+i,r.from+i+2))}}this.decorations=Kn.set(t)}constructor(){this.decorations=Kn.none}},{decorations:e=>e.decorations,eventHandlers:{mousedown:(e,t)=>{let n=e.target;const r=t.state.doc.lineAt(t.posAtDOM(n));n.classList.contains("cm-dot")&&(console.log("mouse down on",r),e.preventDefault())},mousemove:(e,t)=>{e.target},dragstart:(e,t)=>{e.target},drag:(e,t)=>{e.target},dragenter:(e,t)=>{e.target}}}),rf=Se.define({combine:e=>e.length?e[0]:2}),of=ht.transactionFilter.of((e=>{const{doc:t}=e.startState,n=[],r=[],i=e.startState.facet(rf);return e.changes.iterChanges(((o,s,a,l,c)=>{const u=t.lineAt(o),h=Qh(t,u.number);if(o===u.from&&o===s&&1===c.lines&&!c.line(1).text.trim().length)return console.log("level increased"),r.push(Xh.of({fromLevel:Math.floor(h/i),toLevel:Math.floor((h+c.line(1).length)/i),lineNumber:u.number})),e;const f=s-u.from;if(a===l&&1===c.lines&&f<h)return console.log(`level decreased from ${h} to ${f}`),r.push(Xh.of({fromLevel:Math.floor(h/i),toLevel:Math.floor(f/i),lineNumber:u.number})),e;if(o>u.from&&o-u.from<h){console.log("deleting line");const e=1===u.number?0:1;n.push({from:u.from-e,to:u.from+h,insert:""})}})),[e,{changes:n,effects:r,sequential:!1}]})),sf=Mo.of([{key:"Tab",preventDefault:!0,run:e=>af(e,"increase"),shift:e=>af(e,"decrease")}]);function af(e,t){const n=[],r=e.state.selection.ranges.map((t=>e.state.doc.lineAt(t.from)));for(const i of r)if("increase"===t)console.log("increase"),n.push({from:i.from,insert:"  "});else{if("decrease"!==t)throw new Error("Unhandled mode: "+t);{const{rootBlockLine:t,blockLevel:r}=Jh(e.state.doc,i.number);t&&r-2>0&&(console.log(`decrease rootBlockLine=${t}, blockLevel=${r}`),n.push({from:i.from,to:i.from+2}))}}return!!n.length&&(e.dispatch({changes:n}),!0)}const lf=go.baseTheme({".cm-dot":{height:"1.3ch",width:"1.3ch",backgroundColor:"#bbb",borderRadius:"50%",display:"inline-block",cursor:"grab"},".cm-dot:hover":{backgroundColor:"#000"},".cm-wikilink":{color:"#AA5555",cursor:"pointer"}}),cf=ht.transactionFilter.of((e=>{const t=e.newDoc;let n;for(const{head:r,anchor:i}of e.newSelection.ranges){const e=t.lineAt(r),o=Qh(t,e.number),s=e.from+o,a=t.lineAt(i),l=Qh(t,a.number),c=a.from+l;let u=r,h=i;r<=s&&(u=s),i<=c&&(h=c),u===r&&h===i||(n={anchor:h,head:u})}return[e,{selection:n,sequential:!0}]}));qh({},"version",(()=>uf));const uf="0.7.7";l=i("lydNP");function hf({lines:e,setLines:t}){const n=l.useRef(null);return l.useEffect((()=>{if(!n.current)return;const r=ht.create({doc:e.join("\n"),extensions:[Kh(),[$h,nf,lf,ef,cf,Yh,of,sf],Oa,Yo(),ls(),Do(),[Wo,jo],ht.allowMultipleSelections.of(!1),ht.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==a)continue;a=t.from;let n=da(s,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],i=fa(s,n);r!=i&&l.push({from:t.from,to:t.from+r.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e})),Hu.fallback,Ga(),[Gu,qu],ns,Cc(),Mo.of([...Yu,...ec,...eu,...Cs,...Fa]),wr.define((()=>({update:e=>{console.log("update"),t(e.view.state.doc.toJSON())}})))]}),i=new go({parent:n.current,state:r});return()=>{console.log("destroy"),i.destroy()}}),[n,e]),o.jsx("div",{ref:n})}function ff({pages:e,activePage:t}){const n=e.find((e=>e.title===t))?.lines,r=l.useCallback((n=>{const r=e.find((e=>e.title===t));r&&(console.log("update lines"),r.lines=n)}),[e,t]);return o.jsx("div",{children:n?o.jsx(hf,{lines:n,setLines:r}):o.jsx("div",{children:"Select a Page to edit"})})}function df({}){return o.jsx("div",{children:"Analysis"})}function pf({pages:e,addPage:t,selectPage:n}){return o.jsxs("div",{style:{backgroundColor:"#AAA",width:"12rem",padding:"0.5rem"},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{display:"inline"},children:"All Pages"}),o.jsx("button",{style:{float:"right"},onClick:()=>t(),children:"New"})]}),o.jsx("ul",{children:e.map((({title:e})=>o.jsx("li",{style:{cursor:"pointer"},onClick:()=>n(e),children:e},e)))}),o.jsx(df,{pages:e})]})}function mf(){const e=function(){let{matches:e}=l.useContext(y),t=e[e.length-1];return t?t.params:{}}(),t=C(),[n,r]=l.useState(void 0),[i,s]=l.useState([{title:"Ma first page",lines:["- Ma first page","- is","- cool"]},{title:"Ma second page",lines:["- Ma second page","- is","- cool"]}]),a=l.useRef(1);l.useEffect((()=>{r(e.noteId)}),[e,r]);const c=l.useCallback((()=>{const e="Untitled Page "+a.current++;s([...i,{title:e,lines:[`- ${e}`,"- "]}])}),[i,s,a]),u=l.useCallback((e=>{i.find((t=>t.title===e))||console.warn(`No page with title "${e}" existing.`),t(`/${e}`)}),[i,r]);return o.jsxs("div",{children:[o.jsx(V,{}),o.jsxs("div",{style:{display:"flex",alignItems:"stretch"},children:[o.jsx(pf,{pages:i,addPage:c,selectPage:u}),o.jsx(ff,{pages:i,activePage:n})]})]})}i("lydNP"),s.render(o.jsx(F,{children:o.jsx(k,{children:o.jsx(w,{path:"*",element:o.jsx(mf,{}),children:o.jsx(w,{path:":noteId",element:o.jsx(mf,{})})})})}),document.getElementById("app"));
//# sourceMappingURL=index.67038d4c.js.map
